"use strict";!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LC=e(),window&&(!window.LC||window.LC&&!window.LC.shapeToJSON)&&(window.LC=e())}(function(){return function n(i,a,r){function s(o,e){if(!a[o]){if(!i[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(l)return l(o,!0);t=new Error("Cannot find module '"+o+"'");throw t.code="MODULE_NOT_FOUND",t}t=a[o]={exports:{}};i[o][0].call(t.exports,function(e){var t=i[o][1][e];return s(t||e)},t,t.exports,n,i,a,r)}return a[o].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)s(r[e]);return s}({1:[function(e,t,o){var h,c,u,i,n,a,s,r,l,d,m,f=[].slice,p=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1};function g(e,t){var o,n,i,a;this.setImageSize=(o=this.setImageSize,n=this,function(){return o.apply(n,arguments)}),i=a=null,a=e instanceof HTMLElement?(i=e,t):e,this.opts=a||{},this.config={zoomMin:a.zoomMin||.2,zoomMax:a.zoomMax||4,zoomStep:a.zoomStep||.2},this.colors={primary:a.primaryColor||"#000",secondary:a.secondaryColor||"#fff",background:a.backgroundColor||"transparent"},this.watermarkImage=a.watermarkImage,this.watermarkScale=a.watermarkScale||1,this.backgroundCanvas=document.createElement("canvas"),this.backgroundCanvas.className="background-canvas",this.backgroundCtx=this.backgroundCanvas.getContext("2d"),this.canvas=document.createElement("canvas"),this.canvas.style["background-color"]="transparent",this.buffer=document.createElement("canvas"),this.buffer.style["background-color"]="transparent",this.ctx=this.canvas.getContext("2d"),this.bufferCtx=this.buffer.getContext("2d"),this.backingScale=m.getBackingScale(this.ctx),this.backgroundShapes=a.backgroundShapes||[],this._shapesInProgress=[],this.shapes=[],this.undoStack=[],this.redoStack=[],this.isDragging=!1,this.isDrawAble=!0,this.isTmpDrawAble=!0,this.rotateDeg=0,this.position={x:0,y:0},this.scale=1,this.setTool(new this.opts.tools[0](this)),this.width=a.imageSize.width||h,this.height=a.imageSize.height||h,this.setZoom(this.scale),a.snapshot&&this.loadSnapshot(a.snapshot),this.isBound=!1,i&&this.bindToElement(i)}u=e("./actions"),i=e("./bindEvents"),n=e("./math"),(a=e("./shapes")).createShape,d=a.shapeToJSON,c=a.JSONToShape,s=e("./canvasRenderer").renderShapeToContext,e("./svgRenderer").renderShapeToSVG,r=e("./renderSnapshotToImage"),l=e("./renderSnapshotToSVG"),e("../tools/Pencil"),m=e("./util"),h="infinite",t.exports=(g.prototype.setWatermarkImageToLcBackground=function(e){this.watermarkImageToLcBackground=e,this.containerEl.setAttribute("watermarkImageToLcBackground",this.watermarkImageToLcBackground)},g.prototype.bindToElement=function(e){var t,o,n;if(!this.containerEl)return this.containerEl=e,this._unsubscribeEvents=i(this,this.containerEl,this.opts.keyboardShortcuts),this.containerEl.style["background-color"]=this.colors.background,this.containerEl.appendChild(this.backgroundCanvas),this.containerEl.appendChild(this.canvas),this.isBound=!0,t=function(){return o.keepPanInImageBounds(),o.repaintAllLayers()},(o=this).respondToSizeChange=m.matchElementSize(this.containerEl,[this.backgroundCanvas,this.canvas],this.backingScale,t),this.watermarkImage&&(this.watermarkImage.onload=(n=this,function(){return n.repaintLayer("background")})),null!=(e=this.tool)&&e.didBecomeActive(this),t();console.warn("Trying to bind Literally Canvas to a DOM element more than once is unsupported.")},g.prototype._teardown=function(){var e;return null!=(e=this.tool)&&e.willBecomeInactive(this),"function"==typeof this._unsubscribeEvents&&this._unsubscribeEvents(),this.tool=null,this.containerEl=null,this.isBound=!1},g.prototype.trigger=function(e,t){return this.canvas.dispatchEvent(new CustomEvent(e,{detail:t})),null},g.prototype.on=function(e,t){var o,n=function(e){return t(e.detail)};return this.canvas.addEventListener(e,n),o=this,function(){return o.canvas.removeEventListener(e,n)}},g.prototype.getRenderScale=function(){return this.scale*this.backingScale},g.prototype.clientCoordsToDrawingCoords=function(e,t){var o,n,i=this.canvas.width,a=this.canvas.height;switch(this.rotateDeg){case 0:o=e,n=t;break;case 90:o=t,n=a-e;break;case 180:o=i-e,n=a-t;break;case 270:o=i-t,n=e;break;default:o=e,n=t}return{x:(o*this.backingScale-this.position.x)/this.getRenderScale(),y:(n*this.backingScale-this.position.y)/this.getRenderScale()}},g.prototype.drawingCoordsToClientCoords=function(e,t){return{x:e*this.getRenderScale()+this.position.x,y:t*this.getRenderScale()+this.position.y}},g.prototype.setImageSize=function(e,t){return this.width=e||h,this.height=t||h,this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("imageSizeChange",{width:this.width,height:this.height})},g.prototype.setTool=function(e){var t;if(this.isBound&&null!=(t=this.tool)&&t.willBecomeInactive(this),this.tool=e,this.trigger("toolChange",{tool:e}),this.isBound)return this.tool.didBecomeActive(this)},g.prototype.setShapesInProgress=function(e){return this._shapesInProgress=e},g.prototype.pointerDown=function(e,t){var o=this.clientCoordsToDrawingCoords(e,t);return this.tool.usesSimpleAPI?(this.tool.begin(o.x,o.y,this),this.isDragging=!0,this.trigger("drawStart",{tool:this.tool})):(this.isDragging=!0,this.trigger("lc-pointerdown",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},g.prototype.pointerMove=function(o,n){return m.requestAnimationFrame((i=this,function(){var e,t=i.clientCoordsToDrawingCoords(o,n);return null!=(e=i.tool)&&e.usesSimpleAPI?i.isDragging?(i.tool.continue(t.x,t.y,i),i.trigger("drawContinue",{tool:i.tool})):void 0:i.isDragging?i.trigger("lc-pointerdrag",{tool:i.tool,x:t.x,y:t.y,rawX:o,rawY:n}):i.trigger("lc-pointermove",{tool:i.tool,x:t.x,y:t.y,rawX:o,rawY:n})}));var i},g.prototype.pointerUp=function(e,t){var o=this.clientCoordsToDrawingCoords(e,t);return this.tool.usesSimpleAPI?this.isDragging?(this.tool.end(o.x,o.y,this),this.isDragging=!1,this.trigger("drawEnd",{tool:this.tool})):void 0:(this.isDragging=!1,this.trigger("lc-pointerup",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},g.prototype.setColor=function(e,t){if(this.colors[e]=t,this.isBound){switch(e){case"background":this.containerEl.style.backgroundColor=this.colors.background,this.repaintLayer("background");break;case"primary":this.repaintLayer("main");break;case"secondary":this.repaintLayer("main")}return this.trigger(e+"ColorChange",this.colors[e]),"background"===e?this.trigger("drawingChange"):void 0}},g.prototype.getColor=function(e){return this.colors[e]},g.prototype.saveShape=function(e,t,o,n,i,a){n=null!=n&&null!=n&&n,null==t&&(t=!0),null==o&&(o=null),o=o||(this.shapes.length?this.shapes[this.shapes.length-1].id:null),e.authorUserId=i;var r="saveShape_"+(new Date).getTime()+parseInt(1e4*Math.random()),a=new u.AddShapeAction(this,e,o,r,n,i,a);return this.execute(a),this.isDrawAble&&t&&this.trigger("shapeSave",{shape:e,previousShapeId:o,executeId:r,shapeId:e.id,action:{actionName:a.actionName}}),this.trigger("drawingChange")},g.prototype.pan=function(e,t){return this.setPan(this.position.x-e,this.position.y-t)},g.prototype.keepPanInImageBounds=function(){var e=this.getRenderScale(),t=this.position,o=t.x,t=t.y;return this.width!==h&&(o=this.canvas.width>this.width*e?(this.canvas.width-this.width*e)/2:Math.max(Math.min(0,o),this.canvas.width-this.width*e)),this.height!==h&&(t=this.canvas.height>this.height*e?(this.canvas.height-this.height*e)/2:Math.max(Math.min(0,t),this.canvas.height-this.height*e)),this.position={x:o,y:t}},g.prototype.setPan=function(e,t){return this.position={x:e,y:t},this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("pan",{x:this.position.x,y:this.position.y})},g.prototype.zoom=function(e){e=this.scale+e;return e=Math.max(e,this.config.zoomMin),e=Math.min(e,this.config.zoomMax),e=Math.round(100*e)/100,this.setZoom(e)},g.prototype.setZoom=function(e){var t=this.scale;return this.scale=e,this.position.x=n.scalePositionScalar(this.position.x,this.canvas.width,t,this.scale),this.position.y=n.scalePositionScalar(this.position.y,this.canvas.height,t,this.scale),this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("zoom",{oldScale:t,newScale:this.scale})},g.prototype.setPdf=function(e,t){var o={pdfOpenParams:{pagemode:"bookmarks",navpanes:0,statusbar:0,toolbar:0,view:"FitV"},forcePDFJS:!0,PDFJS_URL:e},n="#"+this.customCanvasBackgroundElement.id;window.PDFObject.embed(e,n,o),t&&"function"==typeof t&&t()},g.prototype.setWatermarkImage=function(e){if(this.watermarkImage=e,this.watermarkImageToLcBackground){if(m.addImageOnload(e,(t=this,function(){return t.repaintLayer("background")})),e.width)return this.repaintLayer("background")}else this.customCanvasBackgroundElement.style.backgroundImage="url("+JSON.stringify(e.src)+")";var t},g.prototype.repaintAllLayers=function(){for(var e,t=["background","main"],o=0,n=t.length;o<n;o++)e=t[o],this.repaintLayer(e);return null},g.prototype.repaintLayer=function(e,t){var o,a,n,i,r;if(null==t&&(t="main"===e),this.isBound){switch(e){case"background":if(!this.watermarkImageToLcBackground)return;this.backgroundCtx.clearRect(0,0,this.backgroundCanvas.width,this.backgroundCanvas.height),o=function(){return r.repaintLayer("background")},(r=this).watermarkImage&&this._renderWatermark(this.backgroundCtx,!0,o),this.draw(this.backgroundShapes,this.backgroundCtx,o);break;case"main":i=this,o=function(){return i.repaintLayer("main",!0)},t&&(this.buffer.width=this.canvas.width,this.buffer.height=this.canvas.height,this.bufferCtx.clearRect(0,0,this.buffer.width,this.buffer.height),this.draw(this.shapes,this.bufferCtx,o)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),0<this.canvas.width&&0<this.canvas.height&&(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.clipped(function(){return n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),n.ctx.drawImage(n.buffer,0,0)},(n=this).ctx),this.clipped(function(){return a.transformed(function(){for(var e,t=a._shapesInProgress,o=[],n=0,i=t.length;n<i;n++)e=t[n],o.push(s(a.ctx,e,{bufferCtx:a.bufferCtx,shouldOnlyDrawLatest:!0}));return o},a.ctx,a.bufferCtx)},(a=this).ctx,this.bufferCtx))}return this.trigger("repaint",{layerKey:e})}},g.prototype._renderWatermark=function(e,t,o){if(null==t&&(t=!0),this.watermarkImage.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(this.watermarkScale,this.watermarkScale),t&&e.scale(this.backingScale,this.backingScale),e.drawImage(this.watermarkImage,-this.watermarkImage.width/2,-this.watermarkImage.height/2),e.restore();this.watermarkImage.onload=o},g.prototype.drawShapeInProgress=function(e){return this.repaintLayer("main",!1),this.clipped(function(){return t.transformed(function(){return s(t.ctx,e,{bufferCtx:t.bufferCtx,shouldOnlyDrawLatest:!0})},t.ctx,t.bufferCtx)},(t=this).ctx,this.bufferCtx);var t},g.prototype.draw=function(i,a,r){var e,t;if(i.length)return e=function(){for(var e,t=[],o=0,n=i.length;o<n;o++)e=i[o],t.push(s(a,e,{retryCallback:r}));return t},this.clipped((t=this,function(){return t.transformed(e,a)}),a)},g.prototype.clipped=function(){for(var e,t,o,n,i=arguments[0],a=2<=arguments.length?f.call(arguments,1):[],r=this.width===h?0:this.position.x,s=this.height===h?0:this.position.y,l=function(){return this.width!==h?this.width*this.getRenderScale():this.canvas.width}.call(this),d=function(){return this.height!==h?this.height*this.getRenderScale():this.canvas.height}.call(this),c=0,u=a.length;c<u;c++)(e=a[c]).save(),e.beginPath(),e.rect(r,s,l,d),e.clip();for(i(),n=[],t=0,o=a.length;t<o;t++)e=a[t],n.push(e.restore());return n},g.prototype.transformed=function(){for(var e,t,o,n,i,a=arguments[0],r=2<=arguments.length?f.call(arguments,1):[],s=0,l=r.length;s<l;s++)(e=r[s]).save(),e.translate(Math.floor(this.position.x),Math.floor(this.position.y)),i=this.getRenderScale(),e.scale(i,i);for(a(),n=[],t=0,o=r.length;t<o;t++)e=r[t],n.push(e.restore());return n},g.prototype.sendClear=function(e){var t,o=!1;if(e){for(var n=0;n<this.shapes.length;n++)if(this.shapes[n].authorUserId===e){o=!0;break}}else o=!0;o&&(t="clear_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendClear",{clearActionId:t,action:{actionName:"ClearAction"}}))},g.prototype.clear=function(e,t,o,n,i){var a,r;if(null==e&&(e=!0),r=this.shapes,a=[],0!==this.shapes.length){if(n&&0<this.shapes.length){for(var s=!1,l=0;l<this.shapes.length;l++)this.shapes[l].authorUserId!==n?a.push(this.shapes[l]):s=!0;if(!s)return}this.setShapesInProgress([]);t=t||"clear_"+(new Date).getTime()+parseInt(1e4*Math.random()),i=new u.ClearAction(this,r,a,t,o,n,i);return this.execute(i),this.repaintLayer("main"),e&&this.trigger("clear",{clearActionId:t,oldShapes:r,action:{actionName:i.actionName}}),this.trigger("drawingChange",{})}},g.prototype.execute=function(e){return this.undoStack.push(e),e.do(),0<this.redoStack.length&&this.trigger("doClearRedoStack",{doClearRedoStack:this.redoStack}),this.redoStack=[]},g.prototype.goToStackPosition=function(e){},g.prototype.sendUndo=function(e){if(this.undoStack.length){var t;if(e){for(var o=this.undoStack.length-1;0<=o;o--)if(e===this.undoStack[o].authorUserId){t=this.undoStack[o];break}}else t=this.undoStack[this.undoStack.length-1];t&&(t.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendUndo",{action:t,executeId:t.executeId}))}},g.prototype.undo=function(e,t){var o;if(null==e&&(e=!0),this.undoStack.length){if(t){for(var n=this.undoStack.length-1;0<=n;n--)if(this.undoStack[n]&&this.undoStack[n].id===t){o=this.undoStack[n],this.undoStack.splice(n,1);break}}else o=this.undoStack.pop();return o?(o.undo(),o.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.redoStack.push(o),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),e&&this.trigger("undo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})):void 0}},g.prototype.sendRedo=function(e){if(this.redoStack.length){var t;if(e){for(var o=this.redoStack.length-1;0<=o;o--)if(e===this.redoStack[o].authorUserId){t=this.redoStack[o];break}}else t=this.redoStack[this.redoStack.length-1];t&&(t.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendRedo",{action:t,executeId:t.executeId}))}},g.prototype.redo=function(e,t){var o;if(null==e&&(e=!0),this.redoStack.length){if(t){for(var n=this.redoStack.length-1;0<=n;n--)if(this.redoStack[n]&&this.redoStack[n].id===t){o=this.redoStack[n],this.redoStack.splice(n,1);break}}else o=this.redoStack.pop();if(o){this.undoStack.push(o);return o.do(!0),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),o.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),e&&this.trigger("redo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})}}},g.prototype.canUndo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=this.undoStack.length-1;0<=t;t--)if(this.undoStack[t].authorUserId==this.myselfId){e=!0;break}return e}return!!this.undoStack.length},g.prototype.canRedo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=0;t<this.redoStack.length;t++)this.redoStack[t].authorUserId==this.myselfId&&(e=!0);return e}return!!this.redoStack.length},g.prototype.getPixel=function(e,t){var t=this.drawingCoordsToClientCoords(e,t),t=this.ctx.getImageData(t.x,t.y,1,1).data;return t[3]?"rgb("+t[0]+", "+t[1]+", "+t[2]+")":null},g.prototype.getContentBounds=function(){return m.getBoundingRect(this.shapes.concat(this.backgroundShapes).map(function(e){return e.getBoundingRect()}),this.width===h?0:this.width,this.height===h?0:this.height)},g.prototype.getDefaultImageRect=function(e,t){var i;return null==e&&(e={width:0,height:0}),null==t&&(t={top:0,right:0,bottom:0,left:0}),m.getDefaultImageRect(function(){for(var e=this.shapes.concat(this.backgroundShapes),t=[],o=0,n=e.length;o<n;o++)i=e[o],t.push(i.getBoundingRect(this.ctx));return t}.call(this),e,t)},g.prototype.getImage=function(e){return null==e&&(e={}),null==e.includeWatermark&&(e.includeWatermark=!0),null==e.scaleDownRetina&&(e.scaleDownRetina=!0),null==e.scale&&(e.scale=1),e.scaleDownRetina||(e.scale*=this.backingScale),e.includeWatermark&&(e.watermarkImage=this.watermarkImage,e.watermarkScale=this.watermarkScale,e.scaleDownRetina||(e.watermarkScale*=this.backingScale)),r(this.getSnapshot(),e)},g.prototype.canvasForExport=function(){return this.repaintAllLayers(),m.combineCanvases(this.backgroundCanvas,this.canvas)},g.prototype.canvasWithBackground=function(e){return m.combineCanvases(e,this.canvasForExport())},g.prototype.getSnapshot=function(e){var t,o,n,i,a,r;for(null==e&&(e=null),null==e&&(e=["shapes","imageSize","colors","position","scale","backgroundShapes"]),r={},t=0,n=(i=["colors","position","scale"]).length;t<n;t++)o=i[t],0<=p.call(e,o)&&(r[o]=this[o]);return 0<=p.call(e,"shapes")&&(r.shapes=function(){for(var e=this.shapes,t=[],o=0,n=e.length;o<n;o++)a=e[o],t.push(d(a));return t}.call(this)),0<=p.call(e,"backgroundShapes")&&(r.backgroundShapes=function(){for(var e=this.backgroundShapes,t=[],o=0,n=e.length;o<n;o++)a=e[o],t.push(d(a));return t}.call(this)),0<=p.call(e,"imageSize")&&(r.imageSize={width:this.width,height:this.height}),r},g.prototype.getSnapshotJSON=function(){return console.warn("lc.getSnapshotJSON() is deprecated. use JSON.stringify(lc.getSnapshot()) instead."),JSON.stringify(this.getSnapshot())},g.prototype.getSVGString=function(e){return null==e&&(e={}),l(this.getSnapshot(),e)},g.prototype.loadSnapshot=function(i){var e,t,o,n,a,r,s,l,d;if(i){if(i.colors)for(e=0,n=(r=["primary","secondary","background"]).length;e<n;e++)o=r[e],this.setColor(o,i.colors[o]);if(i.shapes)for(this.shapes=[],t=0,a=(s=i.shapes).length;t<a;t++)d=s[t],(d=c(d))&&this.execute(new u.AddShapeAction(this,d));return i.backgroundShapes&&(this.backgroundShapes=function(){for(var e=i.backgroundShapes,t=[],o=0,n=e.length;o<n;o++)l=e[o],t.push(c(l));return t}()),i.imageSize&&(this.width=i.imageSize.width,this.height=i.imageSize.height),i.position&&(this.position=i.position),i.scale&&(this.scale=i.scale),this.repaintAllLayers(),this.trigger("snapshotLoad"),this.trigger("drawingChange",{})}},g.prototype.loadSnapshotJSON=function(e){return console.warn("lc.loadSnapshotJSON() is deprecated. use lc.loadSnapshot(JSON.parse(snapshot)) instead."),this.loadSnapshot(JSON.parse(e))},g)},{"../tools/Pencil":24,"./actions":3,"./bindEvents":4,"./canvasRenderer":5,"./math":10,"./renderSnapshotToImage":11,"./renderSnapshotToSVG":12,"./shapes":13,"./svgRenderer":14,"./util":15}],2:[function(e,t,o){var s,h,l;function n(t,e,o,n,i){var a,r;this.text=e,this.font=o,this.forcedWidth=n,this.forcedHeight=i,i=(n=l(this.font)).fontFamily,a=n.fontSize,t.font=this.font,t.textBaseline="baseline",this.emDashWidth=t.measureTextWidth("—",a,i).width,this.caratWidth=t.measureTextWidth("|",a,i).width,this.lines=s(t,this.text,this.forcedWidth),this.metricses=this.lines.map((r=this,function(e){return t.measureText2(e||"X",a,r.font)})),this.metrics={ascent:Math.max.apply(Math,this.metricses.map(function(e){return e.ascent})),descent:Math.max.apply(Math,this.metricses.map(function(e){return e.descent})),fontsize:Math.max.apply(Math,this.metricses.map(function(e){return e.fontsize})),leading:Math.max.apply(Math,this.metricses.map(function(e){return e.leading})),width:Math.max.apply(Math,this.metricses.map(function(e){return e.width})),height:Math.max.apply(Math,this.metricses.map(function(e){return e.height})),bounds:{minx:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.minx})),miny:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.miny})),maxx:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxx})),maxy:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxy}))}},this.boundingBoxWidth=Math.ceil(this.metrics.width)}e("./fontmetrics.js"),l=function(e){for(var t,o=e.split(" "),n=0,i=0,a=o.length;i<a;i++)t=o[i],t=parseInt(t.replace("px",""),10),isNaN(t)||(n=t);if(!n)throw"Font size not found";return{fontSize:n,fontFamily:e.substring(o[0].length+1).replace("bold ","").replace("italic ","").replace("underline ","")}},h=function(e,t,o){var n,i,a,r,s,l,d,c,u;if(!t.length)return["",""];for(l=s=n=0,u=!1;;)if(a=(r=!(i=(n+=1)>=t.length)&&t[n].match(/\s/))||i,c=t.substring(0,n),(c=!o||e.measureTextWidth(c).width<=o)&&(l=n),a&&u&&(u=!1,c&&(s=n)),u=!r,i||!c){if(c)return[t,""];if(0<s){for(d=s+1;d<t.length&&t[d].match("/s/");)d+=1;return[t.substring(0,s),t.substring(d)]}return[t.substring(0,l),t.substring(l)]}},s=function(e,t,o){for(var n,i,a,r,s,l=t.split(/\r\n|\r|\n/g),d=[],c=0,u=l.length;c<u;c++)if(s=l[c],n=(i=h(e,s,o))[0],r=i[1],n)for(;n;)d.push(n),n=(a=h(e,r,o))[0],r=a[1];else d.push(s);return d},n.prototype.draw=function(e,t,o){var n,i,a,r,s,l;for(e.textBaseline="top",e.font=this.font,l=[],i=n=0,a=(s=this.lines).length;i<a;i++)r=s[i],e.fillText(r,t,o+n*this.metrics.leading),l.push(n+=1);return l},n.prototype.getWidth=function(e){return null==e&&(e=!1),this.forcedWidth||(e?this.metrics.bounds.maxx+this.caratWidth:this.metrics.bounds.maxx)},n.prototype.getHeight=function(){return this.forcedHeight||this.metrics.leading*this.lines.length},t.exports=n},{"./fontmetrics.js":7}],3:[function(e,t,o){var n;function i(e,t,o,n,i,a,r){this.lc=e,this.oldShapes=t,this.newShapes=o,this.executeId=n,this.id=n,this.clearActionId=n,this.authorUserId=i,this.toAuthorUserId=a,this.seq=r,this.actions=[],this.actionName="ClearAction"}function a(e,t,o,n,i,a,r){this.lc=e,this.shape=t,this.previousShapeId=null!=o?o:null,this.doNotPaint=i,this.executeId=n,this.shapeId=t.id,this.id=t.id,this.authorUserId=a,this.seq=r,this.actionName="AddShapeAction"}i.prototype.do=function(){var e=[];this.actions=[];for(var t=this.lc.undoStack.length-1;0<=t;t--){var o=this.lc.undoStack[t];"AddShapeAction"===o.actionName&&(!this.toAuthorUserId||this.lc.undoStack[t].authorUserId===this.toAuthorUserId?(this.actions.push(o),this.lc.undoStack.splice(t,1)):e.push(this.lc.undoStack[t].shape))}return this.lc.shapes=e.reverse(),this.lc.repaintLayer("main")},i.prototype.undo=function(){var e=[];this.lc.undoStack=this.lc.undoStack.concat(this.actions),this.actions=[],this.lc.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0});for(var t=0;t<this.lc.undoStack.length;t++)"AddShapeAction"===this.lc.undoStack[t].actionName&&e.push(this.lc.undoStack[t].shape);return this.lc.shapes=e,this.lc.repaintLayer("main")},n=i,a.prototype.do=function(e,t){var o,n,i,a,r,s;if(e=null!=e&&e,this.lc.shapes.length&&this.lc.shapes[this.lc.shapes.length-1].id!==this.previousShapeId&&null!==this.previousShapeId){for(o=!(a=[]),n=0,i=(r=this.lc.shapes).length;n<i;n++)s=r[n],a.push(s),s.id===this.previousShapeId&&(a.push(this.shape),o=!0);o||a.push(this.shape),this.lc.shapes=a}else this.lc.shapes.push(this.shape);if((e||!this.doNotPaint)&&!t)return this.lc.repaintLayer("main")},a.prototype.undo=function(){var e,t,o,n,i;if(this.lc.shapes[this.lc.shapes.length-1].id===this.shape.id)this.lc.shapes.pop();else{for(o=[],e=0,t=(n=this.lc.shapes).length;e<t;e++)(i=n[e]).id!==this.shape.id&&o.push(i);this.lc.shapes=o}return this.lc.repaintLayer("main")},t.exports={ClearAction:n,AddShapeAction:a}},{}],4:[function(e,t,o){var m=function(e,t){var o=t.changedTouches[0].clientX,t=t.changedTouches[0].clientY,e=e.getBoundingClientRect();return[o-e.left,t-e.top]},f=function(e,t){e=e.getBoundingClientRect();return{left:t.clientX-e.left,top:t.clientY-e.top}};t.exports=function(l,d,e){var t,c,u,s,h,i;return null==e&&(e=!1),i=[],c=function(e){return e.preventDefault(),e=f(d,e),l.pointerMove(e.left,e.top)},u=function(e){var t;e.preventDefault(),d.onselectstart=function(){return!0},t=f(d,e),l.pointerUp(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var n=0;n<o.length;n++){var i=o[n].parentNode;if(i){var a=i.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)i.removeChild(a[r])}}}catch(e){console.error("tklc error:",e)}return document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),d.addEventListener("mousemove",c)},d.addEventListener("mousedown",function(e){var t;if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault(),d.onselectstart=function(){return!1},t=f(d,e),l.pointerDown(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var n=0;n<o.length;n++){var i=o[n].parentNode;if(i){var a=i.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)i.removeChild(a[r]);var s=document.createElement("div");s.className="ifreamTempLayer",i.appendChild(s)}}}catch(e){console.error("tklc error:",e)}return d.removeEventListener("mousemove",c),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)}}),h=function(e){return e.preventDefault(),l.pointerMove.apply(l,m(d,e))},s=function(e){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o].parentNode;if(n){var i=n.getElementsByClassName("ifreamTempLayer");if(i&&0<i.length)for(var a=i.length-1;0<=a;a--)n.removeChild(i[a])}}}catch(e){console.error("tklc error:",e)}return l.pointerUp.apply(l,m(d,e)),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)},d.addEventListener("touchstart",function(e){if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o].parentNode;if(n){var i=n.getElementsByClassName("ifreamTempLayer");if(i&&0<i.length)for(var a=i.length-1;0<=a;a--)n.removeChild(i[a]);var r=document.createElement("div");r.className="ifreamTempLayer",n.appendChild(r)}}}catch(e){console.error("tklc error:",e)}return 1===e.touches.length?(l.pointerDown.apply(l,m(d,e)),document.addEventListener("touchmove",h),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s)):l.pointerMove.apply(l,m(d,e))}}),e&&(console.warn("Keyboard panning is deprecated."),t=function(e){switch(e.keyCode){case 37:l.pan(-10,0);break;case 38:l.pan(0,-10);break;case 39:l.pan(10,0);break;case 40:l.pan(0,10)}return l.repaintAllLayers()},i.push(function(){return document.removeEventListener(t)})),function(){for(var e,t=[],o=0,n=i.length;o<n;o++)e=i[o],t.push(e());return t}}},{}],5:[function(e,t,o){var a,n,i,r,s=e("./lineEndCapShapes"),l={},d=function(e,t,o){return l[e]={drawFunc:t,drawLatestFunc:o}},c=function(){},u=function(e,t,o){var n;if(null==o&&(o={}),null==o.shouldIgnoreUnsupportedShapes&&(o.shouldIgnoreUnsupportedShapes=!1),null==o.retryCallback&&(o.retryCallback=c),null==o.shouldOnlyDrawLatest&&(o.shouldOnlyDrawLatest=!1),null==o.bufferCtx&&(o.bufferCtx=null),n=o.bufferCtx,l[t.className])return o.shouldOnlyDrawLatest&&l[t.className].drawLatestFunc?l[t.className].drawLatestFunc(e,n,t,o.retryCallback):l[t.className].drawFunc(e,t,o.retryCallback);if(o.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+t.className+" to canvas");throw"Can't render shape of type "+t.className+" to canvas"},e=function(e,t,o){return u(e.getContext("2d"),t,o)};d("Rectangle",function(e,t){var o=t.x,n=t.y;return t.strokeWidth%2!=0&&(o+=.5,n+=.5),e.fillStyle=t.fillColor,e.fillRect(o,n,t.width,t.height),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.strokeRect(o,n,t.width,t.height)}),d("Ellipse",function(e,t){var o,n,i;return e.save(),i=Math.floor(t.width/2),n=Math.floor(t.height/2),o=t.x+i,n=t.y+n,e.translate(o,n),e.scale(1,Math.abs(t.height/t.width)),e.beginPath(),e.arc(0,0,Math.abs(i),0,2*Math.PI),e.closePath(),e.restore(),e.fillStyle=t.fillColor,e.fill(),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.stroke()}),d("SelectionBox",(r=function(e,t,o){var n=t.x,t=t.y;if(0!==o)return e.fillStyle="#fff",e.fillRect(n,t,o,o),e.strokeStyle="#000",e.strokeRect(n,t,o,o)},function(e,t){return r(e,t.getTopLeftHandleRect(),t.handleSize),r(e,t.getTopRightHandleRect(),t.handleSize),r(e,t.getBottomLeftHandleRect(),t.handleSize),r(e,t.getBottomRightHandleRect(),t.handleSize),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin)),e.lineWidth=1,e.strokeStyle="#000",e.setLineDash([2,4]),e.strokeRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin),e.setLineDash([])})),d("Image",function(e,t,o){return t.image.width?1===t.scale?e.drawImage(t.image,t.x,t.y):e.drawImage(t.image,t.x,t.y,t.image.width*t.scale,t.image.height*t.scale):o?t.image.onload=o:void 0}),d("Line",function(e,t){var o,n,i,a,r;if(t.x1!==t.x2||t.y1!==t.y2)return n=t.x1,i=t.x2,a=t.y1,r=t.y2,t.strokeWidth%2!=0&&(n+=.5,i+=.5,a+=.5,r+=.5),e.lineWidth=t.strokeWidth,e.strokeStyle=t.color,e.lineCap=t.capStyle,t.dash&&e.setLineDash(t.dash),e.beginPath(),e.moveTo(n,a),e.lineTo(i,r),e.stroke(),t.dash&&e.setLineDash([]),o=Math.max(2.2*t.strokeWidth,5),t.endCapShapes[0]&&s[t.endCapShapes[0]].drawToCanvas(e,n,a,Math.atan2(a-r,n-i),o,t.color),t.endCapShapes[1]?s[t.endCapShapes[1]].drawToCanvas(e,i,r,Math.atan2(r-a,i-n),o,t.color):void 0}),a=function(e,t,o,n){var i,a,r,s;if(null==o&&(o=!1),null==n&&(n="round"),t.length){for(e.lineCap=n,e.strokeStyle=t[0].color,e.lineWidth=t[0].size,e.beginPath(),t[0].size%2==0?e.moveTo(t[0].x,t[0].y):e.moveTo(t[0].x+.5,t[0].y+.5),i=0,a=(s=t.slice(1)).length;i<a;i++)r=s[i],t[0].size%2==0?e.lineTo(r.x,r.y):e.lineTo(r.x+.5,r.y+.5);return o?e.closePath():void 0}},d("LinePath",n=function(e,t){return a(e,t.smoothedPoints),e.stroke()},i=function(e,t,o){var n,i;return o.tail?(n=(i=o.smoothedPoints.length-o.segmentSize*o.tailSize)<2*o.segmentSize?0:i,i=i+o.segmentSize+1,a(t,o.smoothedPoints.slice(n,i))):a(t,o.smoothedPoints),t.stroke()}),d("ErasedLinePath",function(e,t){return e.save(),e.globalCompositeOperation="destination-out",n(e,t),e.restore()},function(e,t,o){return e.save(),e.globalCompositeOperation="destination-out",t.save(),t.globalCompositeOperation="destination-out",i(0,t,o),e.restore(),t.restore()}),d("Text",function(e,t){return t.renderer||t._makeRenderer(e),e.fillStyle=t.color,t.renderer.draw(e,t.x,t.y)}),d("Polygon",function(e,t){return e.fillStyle=t.fillColor,a(e,t.points,t.isClosed,"butt"),e.fill(),e.stroke()}),t.exports={defineCanvasRenderer:d,renderShapeToCanvas:e,renderShapeToContext:u}},{"./lineEndCapShapes":8}],6:[function(e,t,o){t.exports={imageURLPrefix:"lib/img",primaryColor:"hsla(0, 0%, 0%, 1)",secondaryColor:"hsla(0, 0%, 100%, 1)",backgroundColor:"transparent",strokeWidths:[1,2,5,10,20,30],defaultStrokeWidth:5,toolbarPosition:"top",keyboardShortcuts:!1,imageSize:{width:"infinite",height:"infinite"},backgroundShapes:[],watermarkImage:null,watermarkScale:1,zoomMin:.2,zoomMax:4,zoomStep:.2,snapshot:null,onInit:function(){},tools:[e("../tools/Pencil"),e("../tools/Eraser"),e("../tools/Line"),e("../tools/Rectangle"),e("../tools/Ellipse"),e("../tools/Text"),e("../tools/Polygon"),e("../tools/Pan"),e("../tools/Eyedropper")]}},{"../tools/Ellipse":19,"../tools/Eraser":20,"../tools/Eyedropper":21,"../tools/Line":22,"../tools/Pan":23,"../tools/Pencil":24,"../tools/Polygon":25,"../tools/Rectangle":26,"../tools/Text":28}],7:[function(e,t,o){!function(){if(!document.defaultView.getComputedStyle)throw"ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";CanvasRenderingContext2D.prototype.measureTextWidth=CanvasRenderingContext2D.prototype.measureText,CanvasRenderingContext2D.prototype.measureText2=function(e,t,o){var n=this.measureTextWidth(e),i=!/\S/.test(e);n.fontsize=t;var a=document.createElement("div");a.style.position="absolute",a.style.opacity=0,a.style.font=o,a.innerHTML=e+"<br/>"+e,document.body.appendChild(a),n.leading=1.2*t;var r,s,s=(r=a,s="height",document.defaultView.getComputedStyle(r,null).getPropertyValue(s));if(2*t<=(s=s.replace("px",""))&&(n.leading=s/2|0),document.body.removeChild(a),i)n.ascent=0,n.descent=0,n.bounds={minx:0,maxx:n.width,miny:0,maxy:0},n.height=0;else{a=document.createElement("canvas");a.width=n.width+100,a.height=3*t,a.style.opacity=1,a.style.font=o;i=a.getContext("2d");i.font=o;t=a.width,o=a.height,a=o/2;i.fillStyle="white",i.fillRect(-1,-1,t+2,o+2),i.fillStyle="black",i.fillText(e,50,a);for(var l=i.getImageData(0,0,t,o).data,d=0,c=4*t,u=l.length;++d<u&&255===l[d];);for(e=d/c|0,d=u-1;0<--d&&255===l[d];);i=d/c|0;for(d=0;d<u&&255===l[d];)u<=(d+=c)&&(d=d-u+4);var o=d%c/4|0,h=1;for(d=u-3;0<=d&&255===l[d];)(d-=c)<0&&(d=u-3-4*h++);t=d%c/4+1|0;n.ascent=a-e,n.descent=i-a,n.bounds={minx:o-50,maxx:t-50,miny:0,maxy:i-e},n.height=i-e+1}return n}}()},{}],8:[function(e,t,o){var s;t.exports={arrow:(s=function(e,t,o,n,i){return[{x:e+Math.cos(o+Math.PI/2)*n/2,y:t+Math.sin(o+Math.PI/2)*n/2},{x:e+Math.cos(o)*i,y:t+Math.sin(o)*i},{x:e+Math.cos(o-Math.PI/2)*n/2,y:t+Math.sin(o-Math.PI/2)*n/2}]},{drawToCanvas:function(e,t,o,n,i,a,r){return null==r&&(r=0),r=r||i,e.fillStyle=a,e.lineWidth=0,e.strokeStyle="transparent",e.beginPath(),r=s(t,o,n,i,r),e.moveTo(r[0].x,r[0].y),e.lineTo(r[1].x,r[1].y),e.lineTo(r[2].x,r[2].y),e.fill()},svg:function(e,t,o,n,i,a){return null==a&&(a=0),"<polygon fill='"+i+"' stroke='none' points='"+s(e,t,o,n,a=a||n).map(function(e){return e.x+","+e.y})+"' />"}})}},{}],9:[function(e,t,o){var n={},i=function(e){return n=e},a=function(e){return n[e]||e};t.exports={localize:i,_:a}},{}],10:[function(e,t,o){e("./shapes").Point,e("./util");var s,n,i={toPoly:function(e){for(var t,o=[],n=[],i=0,a=0,r=e.length;a<r;a++)t=e[a],t=s(t,l(e,i)),o=o.concat([t[0]]),n=[t[1]].concat(n),i+=1;return o.concat(n)}},l=function(e,t){return e.length<3&&0,0===t?l(e,t+1):t===e.length-1?l(e,t-1):i.diff(e[t-1],e[t+1])};i.diff=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},n=function(e){var t=i.len(e);return{x:e.x/t,y:e.y/t}},s=function(e,t){return(t=n(t)).x=t.x*e.size/2,t.y=t.y*e.size/2,[{x:e.x-t.y,y:e.y+t.x,color:e.color},{x:e.x+t.y,y:e.y-t.x,color:e.color}]},i.len=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},i.scalePositionScalar=function(e,t,o,n){return e+(t*o-t*n)/2},t.exports=i},{"./shapes":13,"./util":15}],11:[function(e,t,o){var c=e("./util"),u=e("./shapes").JSONToShape,h="infinite",m=function(e,t,o){if(t.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(o,o),e.drawImage(t,-t.width/2,-t.height/2),e.restore()};t.exports=function(i,e){var n,t,o,a,r,s,l,d;return null==e&&(e={}),null==e.scale&&(e.scale=1),s=function(){for(var e=i.shapes,t=[],o=0,n=e.length;o<n;o++)r=e[o],t.push(u(r));return t}(),t=[],i.backgroundShapes&&(t=function(){for(var e=i.backgroundShapes,t=[],o=0,n=e.length;o<n;o++)r=e[o],t.push(u(r));return t}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),a=i.imageSize||{width:h,height:h},o=i.colors||{background:"transparent"},n=s.concat(t),l=document.createElement("canvas"),d=l.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=c.getDefaultImageRect(function(){for(var e=[],t=0,o=n.length;t<o;t++)r=n[t],e.push(r.getBoundingRect(d));return e}(),a,e.margin),l.width=e.rect.width*e.scale,l.height=e.rect.height*e.scale,d.fillStyle=o.background,d.fillRect(0,0,l.width,l.height),e.rect.width&&e.rect.height?(e.watermarkImage&&m(d,e.watermarkImage,e.watermarkScale),c.combineCanvases(l,c.renderShapes(t,e.rect,e.scale),c.renderShapes(s,e.rect,e.scale))):null}},{"./shapes":13,"./util":15}],12:[function(e,t,o){var c=e("./util"),u=e("./shapes").JSONToShape,h="infinite";t.exports=function(i,e){var n,t,o,a,r,s,l,d;return null==e&&(e={}),d=function(){for(var e=i.shapes,t=[],o=0,n=e.length;o<n;o++)l=e[o],t.push(u(l));return t}(),t=[],i.backgroundShapes&&(t=function(){for(var e=i.backgroundShapes,t=[],o=0,n=e.length;o<n;o++)l=e[o],t.push(u(l));return t}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),s=i.imageSize||{width:h,height:h},o=i.colors||{background:"transparent"},n=d.concat(t),r=document.createElement("canvas"),a=r.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=c.getDefaultImageRect(function(){for(var e=[],t=0,o=n.length;t<o;t++)l=n[t],e.push(l.getBoundingRect(a));return e}(),s,e.margin),LC.renderShapesToSVG(t.concat(d),e.rect,o.background)}},{"./shapes":13,"./util":15}],13:[function(e,t,o){var n,r,y=e("./util"),i=e("./TextRenderer"),a=(e("./lineEndCapShapes"),e("./canvasRenderer")),l=a.defineCanvasRenderer,d=a.renderShapeToContext,a=e("./svgRenderer"),c=a.defineSVGRenderer,u=a.renderShapeToSVG,v={},e=function(e,g){var t,o,n,i,a,r,s=function(e,t,o,n,i,a,r,s,l,d,c,u,h,m,f,p){return g.constructor.call(this,e,t,o,n,i,a,r,s,l,d,c,u,h,m,f,p),this};for(o in s.prototype.className=e,s.fromJSON=g.fromJSON,g.draw&&(n=g.draw,i=g.draw||function(e,t,o){return this.draw(e,t,o)},t=function(e,t,o){return n.call(t,e,o)},r=function(e,t,o,n){return i.call(o,e,t,n)},delete g.draw,g.drawLatest&&delete g.drawLatest,l(e,t,r)),g.toSVG&&(a=g.toSVG,r=function(e){return a.call(e)},delete g.toSVG,c(e,r)),s.prototype.draw=function(e,t){return d(e,this,{retryCallback:t})},s.prototype.drawLatest=function(e,t,o){return d(e,this,{retryCallback:o,bufferCtx:t,shouldOnlyDrawLatest:!0})},s.prototype.toSVG=function(){return u(this)},g)"fromJSON"!==o&&(s.prototype[o]=g[o]);return v[e]=s},h=function(e,t,o,n,i,a,r,s,l,d,c,u,h,m,f,p,g){g=new v[e](t,o,n,i,a,r,s,l,d,c,u,h,m,f,p,g);return g.id=y.getGUID(),g},m=function(e){var t=e.className,o=e.data,n=e.id;return t in v?(e=v[t].fromJSON(o))?(n&&(e.id=n),e):(console.log("Unreadable shape:",t,o),null):(console.log("Unknown shape:",t,o),null)},s=function(e){return{className:e.className,data:e.toJSON(),id:e.id}},f=function(e,t){return t?f(g(g(p(e))),t-1):e},p=function(e){for(var t,o,n=[],i=t=0,a=(e=[e[0]].concat(e).concat(y.last(e))).length;i<a;i++)o=e[i],n[2*t]=o,e[t+1]&&(n[2*t+1]=b(o,e[t+1])),t+=1;return n},g=function(e){for(var t,o=[],n=0,i=0,a=e.length;i<a;i++)t=e[i],e[n+1]&&(o[n]=b(t,e[n+1])),n+=1;return o},b=function(e,t){return h("Point",{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2,size:e.size+(t.size-e.size)/2,color:e.color})};e("Image",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.scale=e.scale||1,this.image=e.image||null},getBoundingRect:function(){return{x:this.x,y:this.y,width:this.image.width*this.scale,height:this.image.height*this.scale}},toJSON:function(){return{x:this.x,y:this.y,imageSrc:this.image.src,imageObject:this.image,scale:this.scale}},fromJSON:function(e){var t,o=null;return null!=(t=e.imageObject)&&t.width?o=e.imageObject:(o=new Image).src=e.imageSrc,h("Image",{x:e.x,y:e.y,image:o,scale:e.scale})},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),e("Rectangle",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return h("Rectangle",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),e("Ellipse",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return h("Ellipse",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),e("Line",{constructor:function(e){return null==e&&(e={}),this.x1=e.x1||0,this.y1=e.y1||0,this.x2=e.x2||0,this.y2=e.y2||0,this.strokeWidth=e.strokeWidth||1,this.color=e.color||"black",this.capStyle=e.capStyle||"round",this.endCapShapes=e.endCapShapes||[null,null],this.dash=e.dash||null},getBoundingRect:function(){return{x:Math.min(this.x1,this.x2)-this.strokeWidth/2,y:Math.min(this.y1,this.y2)-this.strokeWidth/2,width:Math.abs(this.x2-this.x1)+this.strokeWidth/2,height:Math.abs(this.y2-this.y1)+this.strokeWidth/2}},toJSON:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2,strokeWidth:this.strokeWidth,color:this.color,capStyle:this.capStyle,dash:this.dash,endCapShapes:this.endCapShapes}},fromJSON:function(e){return h("Line",e)},move:function(e){return null==e&&(e={}),this.x1=this.x1-e.xDiff,this.y1=this.y1-e.yDiff,this.x2=this.x2-e.xDiff,this.y2=this.y2-e.yDiff},setUpperLeft:function(e){var t,o;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,e=t.y-e.y,this.move({xDiff:o,yDiff:e})}}),r=function(e){var t,o,n,i,a;if(!e.length)return!1;for(a=e[0].size,t=e[0].color,i=0,o=e.length;i<o;i++)if((n=e[i]).size===a&&n.color===t||console.log(a,t,n.size,n.color),n.size!==a||n.color!==t)return!1;return!0},n=function(e,a){var i,t,r,s,o=null;return a.points?o=function(){for(var e=a.points,t=[],o=0,n=e.length;o<n;o++)i=e[o],t.push(m(i));return t}():a.pointCoordinatePairs&&(o=function(){for(var e,t=a.pointCoordinatePairs,o=[],n=0,i=t.length;n<i;n++)e=t[n],r=e[0],s=e[1],o.push(m({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return o}()),t=null,a.smoothedPointCoordinatePairs&&(t=function(){for(var e,t=a.smoothedPointCoordinatePairs,o=[],n=0,i=t.length;n<i;n++)e=t[n],r=e[0],s=e[1],o.push(m({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return o}()),o[0]?h(e,{points:o,smoothedPoints:t,order:a.order,tailSize:a.tailSize,smooth:a.smooth}):null},e("LinePath",a={constructor:function(e){var t,o,n,i,a;if(null==e&&(e={}),n=e.points||[],this.order=e.order||3,this.tailSize=e.tailSize||3,this.smooth=!("smooth"in e)||e.smooth,this.segmentSize=Math.pow(2,this.order),this.sampleSize=this.tailSize+1,e.smoothedPoints)return this.points=e.points,this.smoothedPoints=e.smoothedPoints;for(this.points=[],a=[],i=0,t=n.length;i<t;i++)o=n[i],a.push(this.addPoint(o));return a},getBoundingRect:function(){return y.getBoundingRect(this.points.map(function(e){return{x:e.x-e.size/2,y:e.y-e.size/2,width:e.size,height:e.size}}))},toJSON:function(){var i,a;return r(this.points)?{order:this.order,tailSize:this.tailSize,smooth:this.smooth,pointCoordinatePairs:function(){for(var e=this.points,t=[],o=0,n=e.length;o<n;o++)a=e[o],t.push([a.x,a.y]);return t}.call(this),smoothedPointCoordinatePairs:function(){for(var e=this.smoothedPoints,t=[],o=0,n=e.length;o<n;o++)a=e[o],t.push([a.x,a.y]);return t}.call(this),pointSize:this.points[0].size,pointColor:this.points[0].color}:{order:this.order,tailSize:this.tailSize,smooth:this.smooth,points:function(){for(var e=this.points,t=[],o=0,n=e.length;o<n;o++)i=e[o],t.push(s(i));return t}.call(this)}},fromJSON:function(e){return n("LinePath",e)},addPoint:function(e){if(this.points.push(e),this.smooth)return!this.smoothedPoints||this.points.length<this.sampleSize?this.smoothedPoints=f(this.points,this.order):(this.tail=y.last(f(y.last(this.points,this.sampleSize),this.order),this.segmentSize*this.tailSize),this.smoothedPoints=this.smoothedPoints.slice(0,this.smoothedPoints.length-this.segmentSize*(this.tailSize-1)).concat(this.tail));this.smoothedPoints=this.points},move:function(e){var t,o,n;for(null==e&&(e={}),n=0,t=(o=this.smooth?this.smoothedPoints:this.points).length;n<t;n++)o[n].move(e);return this.points=this.smoothedPoints},setUpperLeft:function(e){var t,o;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,e=t.y-e.y,this.move({xDiff:o,yDiff:e})}}),e("ErasedLinePath",{constructor:a.constructor,toJSON:a.toJSON,addPoint:a.addPoint,getBoundingRect:a.getBoundingRect,fromJSON:function(e){return n("ErasedLinePath",e)}}),e("Point",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.size=e.size||0,this.color=e.color||""},getBoundingRect:function(){return{x:this.x-this.size/2,y:this.y-this.size/2,width:this.size,height:this.size}},toJSON:function(){return{x:this.x,y:this.y,size:this.size,color:this.color}},fromJSON:function(e){return h("Point",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),e("Polygon",{constructor:function(e){var t,o,n,i,a;for(null==e&&(e={}),this.points=e.points,this.fillColor=e.fillColor||"white",this.strokeColor=e.strokeColor||"black",this.strokeWidth=e.strokeWidth,this.dash=e.dash||null,null==e.isClosed&&(e.isClosed=!0),this.isClosed=e.isClosed,a=[],n=0,t=(i=this.points).length;n<t;n++)(o=i[n]).color=this.strokeColor,a.push(o.size=this.strokeWidth);return a},addPoint:function(e,t){return this.points.push(LC.createShape("Point",{x:e,y:t}))},getBoundingRect:function(){return y.getBoundingRect(this.points.map(function(e){return e.getBoundingRect()}))},toJSON:function(){return{strokeWidth:this.strokeWidth,fillColor:this.fillColor,strokeColor:this.strokeColor,dash:this.dash,isClosed:this.isClosed,pointCoordinatePairs:this.points.map(function(e){return[e.x,e.y]})}},fromJSON:function(o){return o.points=o.pointCoordinatePairs.map(function(e){var t=e[0],e=e[1];return h("Point",{x:t,y:e,size:o.strokeWidth,color:o.strokeColor})}),h("Polygon",o)},move:function(e){var t,o,n,i,a;for(null==e&&(e={}),a=[],n=0,t=(i=this.points).length;n<t;n++)o=i[n],a.push(o.move(e));return a},setUpperLeft:function(e){var t,o;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,e=t.y-e.y,this.move({xDiff:o,yDiff:e})}}),e("Text",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.v=e.v||0,this.text=e.text||"",this.color=e.color||"black",this.font=e.font||"18px sans-serif",this.forcedWidth=e.forcedWidth||null,this.forcedHeight=e.forcedHeight||null},_makeRenderer:function(e){if(e.lineHeight=1.2,this.renderer=new i(e,this.text,this.font,this.forcedWidth,this.forcedHeight),this.v<1)return console.log("repairing baseline"),this.v=1,this.x-=this.renderer.metrics.bounds.minx,this.y-=this.renderer.metrics.leading-this.renderer.metrics.descent},setText:function(e){return this.text=e,this.renderer=null},setFont:function(e){return this.font=e,this.renderer=null},setPosition:function(e,t){return this.x=e,this.y=t},setSize:function(e,t){return this.forcedWidth=Math.max(e,0),this.forcedHeight=Math.max(t,0),this.renderer=null},enforceMaxBoundingRect:function(e){var t=this.getBoundingRect(e.ctx),e={x:-e.position.x/e.scale,y:-e.position.y/e.scale,width:e.canvas.width/e.scale,height:e.canvas.height/e.scale};if(t.x+t.width>e.x+e.width)return t=t.x-e.x,this.forcedWidth=e.width-t-10,this.renderer=null},getBoundingRect:function(e,t){if(null==t&&(t=!1),!this.renderer){if(!e)throw"Must pass ctx if text hasn't been rendered yet";this._makeRenderer(e)}return{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.ceil(this.renderer.getWidth(!0)),height:Math.ceil(this.renderer.getHeight())}},toJSON:function(){return{x:this.x,y:this.y,text:this.text,color:this.color,font:this.font,forcedWidth:this.forcedWidth,forcedHeight:this.forcedHeight,v:this.v}},fromJSON:function(e){return h("Text",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),e("SelectionBox",{constructor:function(e){return null==e&&(e={}),this.shape=e.shape,null!=e.handleSize?this.handleSize=e.handleSize:this.handleSize=10,this.margin=4,this.backgroundColor=e.backgroundColor||null,this._br=this.shape.getBoundingRect(e.ctx)},toJSON:function(){return{shape:s(this.shape),backgroundColor:this.backgroundColor}},fromJSON:function(e){var t=e.shape,e=(e.handleSize,e.margin,e.backgroundColor);return h("SelectionBox",{shape:m(t),backgroundColor:e})},getTopLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getTopRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getBoundingRect:function(){return{x:this._br.x-this.margin,y:this._br.y-this.margin,width:this._br.width+2*this.margin,height:this._br.height+2*this.margin}}}),t.exports={defineShape:e,createShape:h,JSONToShape:m,shapeToJSON:s}},{"./TextRenderer":2,"./canvasRenderer":5,"./lineEndCapShapes":8,"./svgRenderer":14,"./util":15}],14:[function(e,t,o){var l=e("./lineEndCapShapes"),n={},i=function(e,t){return n[e]=t},e=function(e,t){if(null==t&&(t={}),null==t.shouldIgnoreUnsupportedShapes&&(t.shouldIgnoreUnsupportedShapes=!1),n[e.className])return n[e.className](e);if(t.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+e.className+" to SVG"),"";throw"Can't render shape of type "+e.className+" to SVG"};n.Rectangle=function(e){var t=e.x,o=e.y,n=e.x+e.width,i=e.y+e.height,a=Math.min(t,n),r=Math.min(o,i),n=Math.max(t,n)-a,i=Math.max(o,i)-r;return e.strokeWidth%2!=0&&(a+=.5,r+=.5),"<rect x='"+a+"' y='"+r+"' width='"+n+"' height='"+i+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"},n.SelectionBox=function(e){return""},n.Ellipse=function(e){var t=Math.floor(e.width/2),o=Math.floor(e.height/2);return"<ellipse cx='"+(e.x+t)+"' cy='"+(e.y+o)+"' rx='"+Math.abs(t)+"' ry='"+Math.abs(o)+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"},n.Image=function(e){return"<image x='"+e.x+"' y='"+e.y+"' width='"+e.image.naturalWidth*e.scale+"' height='"+e.image.naturalHeight*e.scale+"' xlink:href='"+e.image.src+"' />"},n.Line=function(e){var t=e.dash?"stroke-dasharray='"+e.dash.join(", ")+"'":"",o="",n=Math.max(2.2*e.strokeWidth,5),i=e.x1,a=e.x2,r=e.y1,s=e.y2;return e.strokeWidth%2!=0&&(i+=.5,a+=.5,r+=.5,s+=.5),e.endCapShapes[0]&&(o+=l[e.endCapShapes[0]].svg(i,r,Math.atan2(r-s,i-a),n,e.color)),e.endCapShapes[1]&&(o+=l[e.endCapShapes[1]].svg(a,s,Math.atan2(s-r,a-i),n,e.color)),"<g> <line x1='"+i+"' y1='"+r+"' x2='"+a+"' y2='"+s+"' "+t+" stroke-linecap='"+e.capStyle+"' stroke='"+e.color+" 'stroke-width='"+e.strokeWidth+"' /> "+o+" </g>"},n.LinePath=function(e){return"<polyline fill='none' points='"+e.smoothedPoints.map(function(e){var t=e.strokeWidth%2==0?0:.5;return e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.points[0].color+"' stroke-linecap='round' stroke-width='"+e.points[0].size+"' />"},n.ErasedLinePath=function(e){return""},n.Polygon=function(e){return e.isClosed?"<polygon fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t=e.strokeWidth%2==0?0:.5;return e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />":"<polyline fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t=e.strokeWidth%2==0?0:.5;return e.x+t+","+(e.y+t)}).join(" ")+"' stroke='none' /> <polyline fill='none' points='"+e.points.map(function(e){var t=e.strokeWidth%2==0?0:.5;return e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />"},n.Text=function(o){var e=o.forcedWidth?"width='"+o.forcedWidth+"px'":"",t=o.forcedHeight?"height='"+o.forcedHeight+"px'":"",n=o.text.split(/\r\n|\r|\n/g);return o.renderer&&(n=o.renderer.lines),"<text x='"+o.x+"' y='"+o.y+"' "+e+" "+t+" fill='"+o.color+"' style='font: "+o.font+";'> "+n.map(function(e,t){t=0===t?0:"1.2em";return"<tspan x='"+o.x+"' dy='"+t+"' alignment-baseline='text-before-edge'> "+e+" </tspan>"}).join("")+" </text>"},t.exports={defineSVGRenderer:i,renderShapeToSVG:e}},{"./lineEndCapShapes":8}],15:[function(e,t,o){var n,l=[].slice,i=Array.prototype.slice,d=e("./canvasRenderer").renderShapeToContext,r=e("./svgRenderer").renderShapeToSVG,a={addImageOnload:function(e,t){var o=e.onload;return e.onload=function(){return"function"==typeof o&&o(),t()},e},last:function(e,t){return null==t&&(t=null),t?i.call(e,Math.max(e.length-t,0)):e[e.length-1]},classSet:function(e){var t,o=[];for(t in e)e[t]&&o.push(t);return o.join(" ")},matchElementSize:function(n,i,e,a){var t;return null==a&&(a=function(){}),t=function(){for(var e,t=0,o=i.length;t<o;t++)(e=i[t]).style.width=n.offsetWidth+"px",e.style.height=n.offsetHeight+"px",null!=e.width&&(e.setAttribute("width",n.offsetWidth),e.setAttribute("height",n.offsetHeight));return a()},n.addEventListener("resize",t),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),t(),t},combineCanvases:function(){var e,t,o,n,i,a,r=1<=arguments.length?l.call(arguments,0):[],s=document.createElement("canvas");for(s.width=r[0].width,s.height=r[0].height,o=0,i=r.length;o<i;o++)e=r[o],s.width=Math.max(e.width,s.width),s.height=Math.max(e.height,s.height);for(t=s.getContext("2d"),n=0,a=r.length;n<a;n++)e=r[n],t.drawImage(e,0,0);return s},renderShapes:function(e,t,o,n){var i,a,r,s;for(null==o&&(o=1),null==n&&(n=null),(n=n||document.createElement("canvas")).width=t.width*o,n.height=t.height*o,(i=n.getContext("2d")).translate(-t.x*o,-t.y*o),i.scale(o,o),a=0,r=e.length;a<r;a++)s=e[a],d(i,s);return n},renderShapesToSVG:function(e,t,o){var n=t.x,i=t.y,a=t.width,t=t.height;return("<svg xmlns='http://www.w3.org/2000/svg' width='"+a+"' height='"+t+"' viewBox='0 0 "+a+" "+t+"'> <rect width='"+a+"' height='"+t+"' x='0' y='0' fill='"+o+"' /> <g transform='translate("+-n+", "+-i+")'> "+e.map(r).join("")+" </g> </svg>").replace(/(\r\n|\n|\r)/gm,"")},getBoundingRect:function(e,t,o){var n,i,a,r,s,l,d;if(!e.length)return{x:0,y:0,width:t,height:o};for(s=e[0].x,l=e[0].y,a=e[0].x+e[0].width,r=e[0].y+e[0].height,n=0,i=e.length;n<i;n++)d=e[n],s=Math.floor(Math.min(d.x,s)),l=Math.floor(Math.min(d.y,l)),a=Math.ceil(Math.max(a,d.x+d.width)),r=Math.ceil(Math.max(r,d.y+d.height));return{x:s=t?0:s,y:l=o?0:l,width:(a=t||a)-s,height:(r=o||r)-l}},getDefaultImageRect:function(e,t,o){var n;return null==t&&(t={width:0,height:0}),null==o&&(o={top:0,right:0,bottom:0,left:0}),n=t.width,t=t.height,(t=a.getBoundingRect(e,"infinite"===n?0:n,"infinite"===t?0:t)).x-=o.left,t.y-=o.top,t.width+=o.left+o.right,t.height+=o.top+o.bottom,t},getBackingScale:function(e){return null!=window.devicePixelRatio&&1<window.devicePixelRatio?window.devicePixelRatio:1},getGUID:(n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}),requestAnimationFrame:function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):setTimeout(e,0)},cancelAnimationFrame:function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):clearTimeout(e)}};t.exports=a},{"./canvasRenderer":5,"./svgRenderer":14}],16:[function(e,t,o){function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}n.prototype=window.CustomEvent.prototype,window.CustomEvent=n},{}],17:[function(e,t,o){var n=!1;CanvasRenderingContext2D.prototype.setLineDash||(CanvasRenderingContext2D.prototype.setLineDash=function(){n||(console.warn("context2D.setLineDash is a no-op in this browser."),n=!0)}),t.exports=null},{}],18:[function(e,t,o){var d,n,i,s,a,r,l,c,u,h,m,f,p,g,y;e("./ie_customevent"),e("./ie_setLineDash"),d=e("./core/LiterallyCanvas"),s=e("./core/defaultOptions"),n=e("./core/canvasRenderer"),p=e("./core/svgRenderer"),f=e("./core/shapes"),y=e("./core/util"),h=e("./core/renderSnapshotToImage"),m=e("./core/renderSnapshotToSVG"),c=e("./core/localization").localize,i={snapshotToShapes:function(e){for(var t,o=e.shapes,n=[],i=0,a=o.length;i<a;i++)t=o[i],n.push(f.JSONToShape(t));return n},snapshotJSONToShapes:function(e){return i.snapshotToShapes(JSON.parse(e))}},u=e("./tools/base"),g={Pencil:e("./tools/Pencil"),Eraser:e("./tools/Eraser"),Line:e("./tools/Line"),Rectangle:e("./tools/Rectangle"),Ellipse:e("./tools/Ellipse"),Text:e("./tools/Text"),Polygon:e("./tools/Polygon"),Pan:e("./tools/Pan"),Eyedropper:e("./tools/Eyedropper"),SelectShape:e("./tools/SelectShape"),Tool:u.Tool,ToolWithStroke:u.ToolWithStroke},a=s.tools,s.imageURLPrefix,e=function(e){return s.imageURLPrefix=e},r=function(e,t){var o,n,i,a,r;for(a in null==t&&(t={}),s)a in t||(t[a]=s[a]);for(n=0,i=(r=e.children).length;n<i;n++)o=r[n],e.removeChild(o);return l(e,t)},l=function(n,e){var t,i,a=n.className;-1===[" "," "].join(n.className).indexOf(" literally ")&&(n.className=n.className+" literally"),n.className=n.className+" toolbar-hidden",(t=document.createElement("div")).className="lc-drawing",n.appendChild(t);var o=document.createElement("div");o.className="custom-canvas-background",o.id="customCanvasView",t.appendChild(o);var r=document.createElement("div");r.className="draw-permission",n.appendChild(r);var s=document.createElement("div");s.className="temporary-draw-permission",n.appendChild(s);var l=document.createElement("span");l.className="laser-mark",n.appendChild(l);l=document.createElement("div");return l.className="literally-data-loading-wrap",l.style.zIndex=100,l.style.display="none",n.appendChild(l),(i=new d(t,e)).customCanvasBackgroundElement=o,i.loadingElement=l,i.watermarkImageToLcBackground=void 0===e.watermarkImageToLcBackground||e.watermarkImageToLcBackground,t.setAttribute("watermarkImageToLcBackground",i.watermarkImageToLcBackground),i.isDrawAble?(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" yes"):(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" no"),i.isTmpDrawAble?(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" yes"):(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" no"),i.teardown=function(){var e,t,o;try{for(i._teardown(),t=(o=n.children).length-1;0<=t;t--)(e=o[t])&&n.removeChild(e);return n.className=a}catch(e){return void console.error("tk_lc error:",e)}},"onInit"in e&&e.onInit(i),i},u=function(e){return e.fn.literallycanvas=function(o){return null==o&&(o={}),this.each(function(e,t){return t.literallycanvas=r(t,o)}),this}},"undefined"!=typeof window&&(window.LC={init:r},window.$&&u(window.$)),t.exports={init:r,registerJQueryPlugin:u,util:y,tools:g,setDefaultImageURLPrefix:e,defaultTools:a,defineShape:f.defineShape,createShape:f.createShape,JSONToShape:f.JSONToShape,shapeToJSON:f.shapeToJSON,defineCanvasRenderer:n.defineCanvasRenderer,renderShapeToContext:n.renderShapeToContext,renderShapeToCanvas:n.renderShapeToCanvas,renderShapesToCanvas:y.renderShapes,defineSVGRenderer:p.defineSVGRenderer,renderShapeToSVG:p.renderShapeToSVG,renderShapesToSVG:y.renderShapesToSVG,snapshotToShapes:i.snapshotToShapes,snapshotJSONToShapes:i.snapshotJSONToShapes,renderSnapshotToImage:h,renderSnapshotToSVG:m,localize:c}},{"./core/LiterallyCanvas":1,"./core/canvasRenderer":5,"./core/defaultOptions":6,"./core/localization":9,"./core/renderSnapshotToImage":11,"./core/renderSnapshotToSVG":12,"./core/shapes":13,"./core/svgRenderer":14,"./core/util":15,"./ie_customevent":16,"./ie_setLineDash":17,"./tools/Ellipse":19,"./tools/Eraser":20,"./tools/Eyedropper":21,"./tools/Line":22,"./tools/Pan":23,"./tools/Pencil":24,"./tools/Polygon":25,"./tools/Rectangle":26,"./tools/SelectShape":27,"./tools/Text":28,"./tools/base":29}],19:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Ellipse",r.prototype.iconName="ellipse",r.prototype.begin=function(e,t,o){return this.currentShape=i("Ellipse",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},r.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},r)},{"../core/shapes":13,"./base":29}],20:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./Pencil"),i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Eraser",r.prototype.iconName="eraser",r.prototype.makePoint=function(e,t,o){return i("Point",{x:e,y:t,size:this.strokeWidth,color:"#000"})},r.prototype.makeShape=function(){return i("ErasedLinePath")},r)},{"../core/shapes":13,"./Pencil":24}],21:[function(e,t,o){var a,i={}.hasOwnProperty;function n(e){n.__super__.constructor.call(this,e),this.strokeOrFill="stroke"}e=e("./base").Tool,a=function(e,t){var o=t.x,t=t.y,t=e.getImageData(o,t,1,1).data;return t[3]?"rgb("+t[0]+", "+t[1]+", "+t[2]+")":null},t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(n,e),n.prototype.name="Eyedropper",n.prototype.iconName="eyedropper",n.prototype.optionsStyle="stroke-or-fill",n.prototype.readColor=function(e,t,o){var n=o.getDefaultImageRect(),i=o.getImage(),n=a(i.getContext("2d"),{x:e-n.x,y:t-n.y});n||o.getColor("background");return"stroke"===this.strokeOrFill?o.setColor("primary",n):o.setColor("secondary",n)},n.prototype.begin=function(e,t,o){return this.readColor(e,t,o)},n.prototype.continue=function(e,t,o){return this.readColor(e,t,o)},n)},{"./base":29}],22:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Line",r.prototype.iconName="line",r.prototype.optionsStyle="line-options-and-stroke-width",r.prototype.begin=function(e,t,o){return this.currentShape=i("Line",{x1:e,y1:t,x2:e,y2:t,strokeWidth:this.strokeWidth,dash:function(){return!1!=!this.isDashed?null:[2*this.strokeWidth,4*this.strokeWidth]}.call(this),endCapShapes:this.hasEndArrow?[null,"arrow"]:null,color:o.getColor("primary")})},r.prototype.continue=function(e,t,o){return this.currentShape.x2=e,this.currentShape.y2=t,o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},r)},{"../core/shapes":13,"./base":29}],23:[function(e,t,o){var n,i={}.hasOwnProperty;function a(){return a.__super__.constructor.apply(this,arguments)}n=e("./base").Tool,e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,n),a.prototype.name="Pan",a.prototype.iconName="pan",a.prototype.usesSimpleAPI=!1,a.prototype.didBecomeActive=function(o){var n,i,a=[];return this.unsubscribe=function(){for(var e,t=[],o=0,n=a.length;o<n;o++)e=a[o],t.push(e());return t},a.push(o.on("lc-pointerdown",(n=this,function(e){var t=e.rawX,e=e.rawY;return n.oldPosition=o.position,n.pointerStart={x:t,y:e}}))),a.push(o.on("lc-pointerdrag",(i=this,function(e){var t=e.rawX,e=e.rawY,e={x:(t-i.pointerStart.x)*o.backingScale,y:(e-i.pointerStart.y)*o.backingScale};return o.setPan(i.oldPosition.x+e.x,i.oldPosition.y+e.y)})))},a.prototype.willBecomeInactive=function(e){return this.unsubscribe()},a)},{"../core/shapes":13,"./base":29}],24:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Pencil",r.prototype.iconName="pencil",r.prototype.eventTimeThreshold=10,r.prototype.begin=function(e,t,o){return this.color=o.getColor("primary"),this.currentShape=this.makeShape(),this.currentShape.addPoint(this.makePoint(e,t,o)),this.lastEventTime=Date.now()},r.prototype.continue=function(e,t,o){var n=Date.now()-this.lastEventTime;if(n>this.eventTimeThreshold)return this.lastEventTime+=n,this.currentShape.addPoint(this.makePoint(e,t,o)),o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape),this.currentShape=void 0},r.prototype.makePoint=function(e,t,o){return i("Point",{x:e,y:t,size:this.strokeWidth,color:this.color})},r.prototype.makeShape=function(){return i("LinePath")},r)},{"../core/shapes":13,"./base":29}],25:[function(e,t,o){var n,i,a={}.hasOwnProperty;function p(){return p.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(p,n),p.prototype.name="Polygon",p.prototype.iconName="polygon",p.prototype.usesSimpleAPI=!1,p.prototype.didBecomeActive=function(o){var e,t,n,i,a,r,s,l,d,c,u,h,m,f;return p.__super__.didBecomeActive.call(this,o),s=[],this.polygonUnsubscribe=function(){for(var e,t=[],o=0,n=s.length;o<n;o++)e=s[o],t.push(e());return t},this.points=null,this.maybePoint=null,n=function(){return l._getWillFinish()?l._close(o):(o.trigger("lc-polygon-started"),l.points?l.points.push(l.maybePoint):l.points=[l.maybePoint],l.maybePoint={x:l.maybePoint.x,y:l.maybePoint.y},o.setShapesInProgress(l._getShapes(o)),o.repaintLayer("main"))},t=function(e){var t=e.x,e=e.y;if(d.maybePoint)return d.maybePoint.x=t,d.maybePoint.y=e,o.setShapesInProgress(d._getShapes(o)),o.repaintLayer("main")},e=function(e){var t=e.x,e=e.y;return c.maybePoint={x:t,y:e},o.setShapesInProgress(c._getShapes(o)),o.repaintLayer("main")},r=function(){return u.maybePoint={x:1/0,y:1/0},u._close(o)},a=function(){return h.maybePoint=h.points[0],h._close(o)},m=h=u=c=d=l=this,i=function(){return m._cancel(o)},s.push(o.on("drawingChange",(f=this,function(){return f._cancel(o)}))),s.push(o.on("lc-pointerdown",e)),s.push(o.on("lc-pointerdrag",t)),s.push(o.on("lc-pointermove",t)),s.push(o.on("lc-pointerup",n)),s.push(o.on("lc-polygon-finishopen",r)),s.push(o.on("lc-polygon-finishclosed",a)),s.push(o.on("lc-polygon-cancel",i))},p.prototype.willBecomeInactive=function(e){return p.__super__.willBecomeInactive.call(this,e),(this.points||this.maybePoint)&&this._cancel(e),this.polygonUnsubscribe()},p.prototype._getArePointsClose=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)<10},p.prototype._getWillClose=function(){return!!(this.points&&1<this.points.length)&&(!!this.maybePoint&&this._getArePointsClose(this.points[0],this.maybePoint))},p.prototype._getWillFinish=function(){return!!(this.points&&1<this.points.length)&&(!!this.maybePoint&&(this._getArePointsClose(this.points[0],this.maybePoint)||this._getArePointsClose(this.points[this.points.length-1],this.maybePoint)))},p.prototype._cancel=function(e){return e.trigger("lc-polygon-stopped"),this.maybePoint=null,this.points=null,e.setShapesInProgress([]),e.repaintLayer("main")},p.prototype._close=function(e){return e.trigger("lc-polygon-stopped"),e.setShapesInProgress([]),2<this.points.length&&e.saveShape(this._getShape(e,!1)),this.maybePoint=null,this.points=null},p.prototype._getShapes=function(e,t){return null==t&&(t=!0),(t=this._getShape(e,t))?[t]:[]},p.prototype._getShape=function(e,t){var o;return null==t&&(t=!0),o=[],this.points&&(o=o.concat(this.points)),!t&&o.length<3?null:(t&&this.maybePoint&&o.push(this.maybePoint),1<o.length?i("Polygon",{isClosed:this._getWillClose(),strokeColor:e.getColor("primary"),fillColor:e.getColor("secondary"),strokeWidth:this.strokeWidth,points:o.map(function(e){return i("Point",e)})}):null)},p.prototype.optionsStyle="polygon-and-stroke-width",p)},{"../core/shapes":13,"./base":29}],26:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Rectangle",r.prototype.iconName="rectangle",r.prototype.begin=function(e,t,o){return this.currentShape=i("Rectangle",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},r.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},r)},{"../core/shapes":13,"./base":29}],27:[function(e,t,o){var n,l,i={}.hasOwnProperty;function a(e){this.selectCanvas=document.createElement("canvas"),this.selectCanvas.style["background-color"]="transparent",this.selectCtx=this.selectCanvas.getContext("2d")}n=e("./base").Tool,l=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,n),a.prototype.name="SelectShape",a.prototype.usesSimpleAPI=!1,a.prototype.didBecomeActive=function(n){var e,t,o,i,a,r,s=[];return this._selectShapeUnsubscribe=function(){for(var e,t=[],o=0,n=s.length;o<n;o++)e=s[o],t.push(e());return t},e=function(e){var t=e.x,o=e.y;if(i.didDrag=!1,e=i._getPixel(t,o,n,i.selectCtx),i.selectedShape=n.shapes[e],null!=i.selectedShape)return n.trigger("shapeSelected",{selectedShape:i.selectedShape}),n.setShapesInProgress([i.selectedShape,l("SelectionBox",{shape:i.selectedShape,handleSize:0})]),n.repaintLayer("main"),e=i.selectedShape.getBoundingRect(),i.dragOffset={x:t-e.x,y:o-e.y}},t=function(e){var t=e.x,e=e.y;if(null!=a.selectedShape)return a.didDrag=!0,a.selectedShape.setUpperLeft({x:t-a.dragOffset.x,y:e-a.dragOffset.y}),n.setShapesInProgress([a.selectedShape,l("SelectionBox",{shape:a.selectedShape,handleSize:0})]),n.repaintLayer("main")},r=a=i=this,o=function(e){e.x,e.y;if(r.didDrag)return r.didDrag=!1,n.trigger("shapeMoved",{shape:r.selectedShape}),n.trigger("drawingChange",{}),n.repaintLayer("main"),r._drawSelectCanvas(n)},s.push(n.on("lc-pointerdown",e)),s.push(n.on("lc-pointerdrag",t)),s.push(n.on("lc-pointerup",o)),this._drawSelectCanvas(n)},a.prototype.willBecomeInactive=function(e){return this._selectShapeUnsubscribe(),e.setShapesInProgress([])},a.prototype._drawSelectCanvas=function(e){var t,o;return this.selectCanvas.width=e.canvas.width,this.selectCanvas.height=e.canvas.height,this.selectCtx.clearRect(0,0,this.selectCanvas.width,this.selectCanvas.height),t=e.shapes.map((o=this,function(e,t){return l("SelectionBox",{shape:e,handleSize:0,backgroundColor:"#"+o._intToHex(t)})})),e.draw(t,this.selectCtx)},a.prototype._intToHex=function(e){return("000000"+e.toString(16)).slice(-6)},a.prototype._getPixel=function(e,t,o,n){var t=o.drawingCoordsToClientCoords(e,t),t=n.getImageData(t.x,t.y,1,1).data;return t[3]?parseInt(this._rgbToHex(t[0],t[1],t[2]),16):null},a.prototype._componentToHex=function(e){return("0"+e.toString(16)).slice(-2)},a.prototype._rgbToHex=function(e,t,o){return""+this._componentToHex(e)+this._componentToHex(t)+this._componentToHex(o)},a)},{"../core/shapes":13,"./base":29}],28:[function(e,t,o){var n,r,s,i={}.hasOwnProperty;function a(){this.text="",this.font="bold 18px sans-serif",this.currentShape=null,this.currentShapeState=null,this.initialShapeBoundingRect=null,this.dragAction=null,this.didDrag=!1}n=e("./base").Tool,r=e("../core/shapes").createShape,s=function(e,t){return!(e.x<t.x)&&(!(e.y<t.y)&&(!(e.x>t.x+t.width)&&!(e.y>t.y+t.height)))},t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,n),a.prototype.name="Text",a.prototype.iconName="text",a.prototype.didBecomeActive=function(t){var e,o,n,i,a,r=[];return this.unsubscribe=function(){for(var e,t=[],o=0,n=r.length;o<n;o++)e=r[o],t.push(e());return t},o=this,e=function(){return o._updateInputEl(t)},r.push(t.on("zoom",e)),r.push(t.on("imageSizeChange",e)),r.push(t.on("snapshotLoad",(n=this,function(){return n._clearCurrentShape(t),t.repaintLayer("main")}))),r.push(t.on("primaryColorChange",(i=this,function(e){if(i.currentShape)return i.currentShape.color=e,i._updateInputEl(t),t.repaintLayer("main")}))),r.push(t.on("setFont",(a=this,function(e){if(a.currentShape)return a.font=e,a.currentShape.setFont(e),a._setShapesInProgress(t),a._updateInputEl(t),t.repaintLayer("main")})))},a.prototype.willBecomeInactive=function(e){return this.currentShape&&(this._ensureNotEditing(e),this.commit(e)),this.unsubscribe()},a.prototype.setText=function(e){return this.text=e},a.prototype._ensureNotEditing=function(e){if("editing"===this.currentShapeState)return this._exitEditingState(e)},a.prototype._clearCurrentShape=function(e){return this.currentShape=null,this.initialShapeBoundingRect=null,this.currentShapeState=null,e.setShapesInProgress([])},a.prototype.commit=function(e){return this.currentShape.text&&e.saveShape(this.currentShape),this._clearCurrentShape(e),e.repaintLayer("main")},a.prototype._getSelectionShape=function(e,t){return null==t&&(t=null),r("SelectionBox",{shape:this.currentShape,ctx:e,backgroundColor:t})},a.prototype._setShapesInProgress=function(e){switch(this.currentShapeState){case"selected":return e.setShapesInProgress([this._getSelectionShape(e.ctx),this.currentShape]);case"editing":return e.setShapesInProgress([this._getSelectionShape(e.ctx,"#fff")]);default:return e.setShapesInProgress([this.currentShape])}},a.prototype.begin=function(e,t,o){var n,i,a;if(this.dragAction="none",this.didDrag=!1,"selected"===this.currentShapeState||"editing"===this.currentShapeState?(n=this.currentShape.getBoundingRect(o.ctx),(a=this._getSelectionShape(o.ctx)).getBoundingRect(),s(i={x:e,y:t},n)&&(this.dragAction="move"),s(i,a.getBottomRightHandleRect())&&(this.dragAction="resizeBottomRight"),s(i,a.getTopLeftHandleRect())&&(this.dragAction="resizeTopLeft"),s(i,a.getBottomLeftHandleRect())&&(this.dragAction="resizeBottomLeft"),s(i,a.getTopRightHandleRect())&&(this.dragAction="resizeTopRight"),"none"===this.dragAction&&"editing"===this.currentShapeState&&(this.dragAction="stop-editing",this._exitEditingState(o))):(this.color=o.getColor("primary"),this.currentShape=r("Text",{x:e,y:t,text:this.text,color:this.color,font:this.font,v:1}),this.dragAction="place",this.currentShapeState="selected"),"none"!==this.dragAction)return this.initialShapeBoundingRect=this.currentShape.getBoundingRect(o.ctx),this.dragOffset={x:e-this.initialShapeBoundingRect.x,y:t-this.initialShapeBoundingRect.y},this._setShapesInProgress(o),o.repaintLayer("main");this.commit(o)},a.prototype.continue=function(e,t,o){var n,i,a;if("none"!==this.dragAction){switch(a=(n=this.initialShapeBoundingRect).x+n.width,i=n.y+n.height,this.dragAction){case"place":this.currentShape.x=e,this.currentShape.y=t,this.didDrag=!0;break;case"move":this.currentShape.x=e-this.dragOffset.x,this.currentShape.y=t-this.dragOffset.y,this.didDrag=!0;break;case"resizeBottomRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-n.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-n.y);break;case"resizeTopLeft":this.currentShape.setSize(a-e+this.dragOffset.x,i-t+this.dragOffset.y),this.currentShape.setPosition(e-this.dragOffset.x,t-this.dragOffset.y);break;case"resizeBottomLeft":this.currentShape.setSize(a-e+this.dragOffset.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-n.y),this.currentShape.setPosition(e-this.dragOffset.x,this.currentShape.y);break;case"resizeTopRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-n.x,i-t+this.dragOffset.y),this.currentShape.setPosition(this.currentShape.x,t-this.dragOffset.y)}return this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)}},a.prototype.end=function(e,t,o){if(this.currentShape)return this.currentShape.setSize(this.currentShape.forcedWidth,0),"selected"===this.currentShapeState&&("place"!==this.dragAction&&("move"!==this.dragAction||this.didDrag)||this._enterEditingState(o)),this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)},a.prototype._enterEditingState=function(t){var e,o,n;if(this.currentShapeState="editing",this.inputEl)throw"State error";return this.inputEl=document.createElement("textarea"),this.inputEl.className="text-tool-input",this.inputEl.style.position="absolute",this.inputEl.style.transformOrigin="0px 0px",this.inputEl.style.backgroundColor="transparent",this.inputEl.style.border="none",this.inputEl.style.outline="none",this.inputEl.style.margin="0",this.inputEl.style.padding="4px",this.inputEl.style.zIndex="1000",this.inputEl.style.overflow="hidden",this.inputEl.style.resize="none",this.inputEl.value=this.currentShape.text,this.inputEl.addEventListener("mousedown",function(e){return e.stopPropagation()}),this.inputEl.addEventListener("touchstart",function(e){return e.stopPropagation()}),e=function(e){return o.currentShape.setText(e.target.value),o.currentShape.enforceMaxBoundingRect(t),o._setShapesInProgress(t),t.repaintLayer("main"),o._updateInputEl(t),e.stopPropagation()},(o=this).inputEl.addEventListener("keydown",(n=this,function(){return n._updateInputEl(t,!0)})),this.inputEl.addEventListener("keyup",e),this.inputEl.addEventListener("change",e),this._updateInputEl(t),t.containerEl.appendChild(this.inputEl),this.inputEl.focus(),this._setShapesInProgress(t)},a.prototype._exitEditingState=function(e){return this.currentShapeState="selected",e.containerEl.removeChild(this.inputEl),this.inputEl=null,this._setShapesInProgress(e),e.repaintLayer("main")},a.prototype._updateInputEl=function(e,t){var o;if(null==t&&(t=!1),this.inputEl)return o=this.currentShape.getBoundingRect(e.ctx,!0),this.inputEl.style.font=this.currentShape.font,this.inputEl.style.color=this.currentShape.color,this.inputEl.style.left=e.position.x/e.backingScale+o.x*e.scale-4+"px",this.inputEl.style.top=e.position.y/e.backingScale+o.y*e.scale-4+"px",t&&!this.currentShape.forcedWidth?this.inputEl.style.width=o.width+10+this.currentShape.renderer.emDashWidth+"px":this.inputEl.style.width=o.width+12+"px",this.inputEl.style.height=t?o.height+10+this.currentShape.renderer.metrics.leading+"px":o.height+10+"px",e="scale("+e.scale+")",this.inputEl.style.transform=e,this.inputEl.style.webkitTransform=e,this.inputEl.style.MozTransform=e,this.inputEl.style.msTransform=e,this.inputEl.style.OTransform=e},a.prototype.optionsStyle="font",a)},{"../core/shapes":13,"./base":29}],29:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){}function s(e){this.strokeWidth=e.opts.defaultStrokeWidth}(i={}).Tool=(r.prototype.name=null,r.prototype.iconName=null,r.prototype.usesSimpleAPI=!0,r.prototype.begin=function(e,t,o){},r.prototype.continue=function(e,t,o){},r.prototype.end=function(e,t,o){},r.prototype.optionsStyle=null,r.prototype.didBecomeActive=function(e){},r.prototype.willBecomeInactive=function(e){},n=r),i.ToolWithStroke=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(s,n),s.prototype.optionsStyle="stroke-width",s.prototype.didBecomeActive=function(t){var o,i=[];return this.unsubscribe=function(){for(var e,t=[],o=0,n=i.length;o<n;o++)e=i[o],t.push(e());return t},i.push(t.on("setStrokeWidth",(o=this,function(e){return o.strokeWidth=e,t.trigger("toolDidUpdateOptions")})))},s.prototype.willBecomeInactive=function(e){return this.unsubscribe()},s),t.exports=i},{}]},{},[18])(18)}),window.TalkSlider=function(u){var e={},h="",m="",f="",t="",o="",n="",c=!1,p=100,i=100,a=document.getElementById(u.sliderContainer.id);a.classList.add("custom-tk-volume-slider-container"),u.sliderContainer&&"vertikal"===u.sliderContainer.direction&&a.classList.add("vertikal"),(m=document.createElement("div")).classList.add("custom-tk-rc-slider","custom-tk-slider","custom-tk-detection-device"),"vertikal"===u.sliderContainer.direction&&m.classList.add("vertikal"),(n=document.createElement("div")).classList.add("custom-tk-rc-slider-rail"),"vertikal"===u.sliderContainer.direction&&n.classList.add("vertikal"),(f=document.createElement("div")).classList.add("custom-tk-rc-slider-track"),"vertikal"===u.sliderContainer.direction&&f.classList.add("vertikal"),(t=document.createElement("div")).classList.add("custom-tk-rc-slider-step"),"vertikal"===u.sliderContainer.direction&&t.classList.add("vertikal"),(h=document.createElement("div")).classList.add("custom-tk-rc-slider-handle"),"vertikal"===u.sliderContainer.direction&&h.classList.add("vertikal"),(o=document.createElement("div")).classList.add("custom-tk-rc-slider-mark"),"vertikal"===u.sliderContainer.direction&&o.classList.add("vertikal"),m.appendChild(n),m.appendChild(f),m.appendChild(t),m.appendChild(h),m.appendChild(o),a.appendChild(m);var g=document,y=window,v=Math;return m.onmousedown=function(e){var t,o;c=!0,"vertikal"===u.sliderContainer.direction?(u.onBeforeChange&&u.onBeforeChange(i),t=(e||y.event).clientY,o=m.offsetHeight,100<(i=v.round((m.getBoundingClientRect().bottom-t)/o*100))?i=100:i<0&&(i=0),h.style.bottom=i+"%",f.style.height=i+"%",m.onmouseup=function(e){return c&&u.onAfterChange&&u.onAfterChange(i),e&&(e.preventDefault(),e.stopPropagation()),!1}):(u.onBeforeChange&&u.onBeforeChange(i),t=(e||y.event).clientX,o=m.offsetWidth,100<(i=v.round((t-m.getBoundingClientRect().left)/o*100))?i=100:i<0&&(i=0),h.style.left=i+"%",f.style.width=i+"%",m.onmouseup=function(){c&&u.onAfterChange&&u.onAfterChange(i)}),e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},h.onclick=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},h.onmousedown=function(e){var t,o,n,i,a,r,s,l,d,c=!1;"vertikal"===u.sliderContainer.direction?(u.onBeforeChange&&u.onBeforeChange(p),t=(e||y.event).clientY,a=h.offsetTop,o=m.offsetHeight,n=h.offsetHeight,d=o-(l=o-n),document.onmousemove=function(e){e=(e||y.event).clientY,e=v.min(l,v.max(-n,a+(e-t)));100<(p=100-v.round((e+d)/o*100))?p=100:p<0&&(p=0),h.style.bottom="calc(("+p+"%) - 3px)",f.style.height=p+"%",u.onChange&&u.onChange(p),y.getSelection?y.getSelection().removeAllRanges():g.selection.empty(),c=!0},document.onmouseup=function(){document.onmousemove=null,u.onAfterChange&&u.onAfterChange(p),document.onmouseup=null}):(u.onBeforeChange&&c&&u.onBeforeChange(p),i=(e||y.event).clientX,a=h.offsetLeft,r=m.offsetWidth,s=h.offsetWidth,l=m.offsetWidth-this.offsetWidth,d=r-l,document.onmousemove=function(e){e=(e||y.event).clientX,e=v.min(l,v.max(-s,a+(e-i)));100<(p=v.round((e+d)/r*100))?p=100:p<0&&(p=0),h.style.left=p+"%",f.style.width=p+"%",u.onChange&&u.onChange(p),y.getSelection?y.getSelection().removeAllRanges():g.selection.empty(),c=!0},document.onmouseup=function(){document.onmousemove=null,c&&u.onAfterChange&&u.onAfterChange(p),document.onmouseup=null}),e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},h.ontouchstart=function(e){var t,o,n,i,a,r,s,l,d;c=!1,"vertikal"===u.sliderContainer.direction?(u.onBeforeChange&&u.onBeforeChange(p),t=(e||y.event).touches[0].clientY,a=h.offsetTop,o=m.offsetHeight,n=h.offsetHeight,d=o-(l=o-n),document.ontouchmove=function(e){e=(e||y.event).touches[0].clientY,e=v.min(l,v.max(-n,a+(e-t)));100<(p=100-v.round((e+d)/o*100))?p=100:p<0&&(p=0),h.style.bottom="calc(("+p+"%) - 3px)",f.style.height=p+"%",u.onChange&&u.onChange(p),y.getSelection?y.getSelection().removeAllRanges():g.selection.empty()}):(u.onBeforeChange&&u.onBeforeChange(p),i=(e||y.event).touches[0].clientX,a=h.offsetLeft,r=m.offsetWidth,s=h.offsetWidth,l=m.offsetWidth-this.offsetWidth,d=r-l,h.ontouchmove=function(e){e=(e||y.event).touches[0].clientX,e=v.min(l,v.max(-s,a+(e-i)));100<(p=v.round((e+d)/r*100))?p=100:p<0&&(p=0),h.style.left=p+"%",f.style.width=p+"%",u.onChange&&u.onChange(p),y.getSelection?y.getSelection().removeAllRanges():g.selection.empty()}),document.ontouchend=function(){document.ontouchmove=null,u.onAfterChange&&u.onAfterChange(p),document.ontouchend=null},e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},e.setProgress=function(e){void 0!==e&&("vertikal"===u.sliderContainer.direction?(h.style.bottom=e+"%",f.style.height=e+"%"):(h.style.left=e+"%",f.style.width=e+"%"))},e},window.TalkDrag=function(e,i){var a=this;if((i=i||{}).containerData=i.containerData||{},a.flag=!1,a.element=e,a.leftPercent=void 0!==i.containerData.left?i.containerData.left/100:0,a.topPercent=void 0!==i.containerData.top?i.containerData.top/100:0,a.disabled=void 0!==i.disabled&&i.disabled,"string"==typeof e&&(a.element=document.getElementById(e)),a.element)return void 0!==i.containerData.parentNodeID?(a.containerElement=i.containerData.parentNodeID,"string"==typeof i.containerData.parentNodeID&&(a.containerElement=document.getElementById(i.containerData.parentNodeID))):a.containerElement=a.element.parentNode,a.containerElement&&(a.containerElement.className=a.containerElement.className.replace("talk-cloud-drag-parent-container","")+" talk-cloud-drag-parent-container "),a.cur={x:0,y:0},a.updateDisabled=function(e){a.disabled=e},a.destroy=function(){window.removeEventListener("resize",a.resizeCallback,!1),a.element.removeEventListener("mousedown",a.mousedownOrTouchstartCallback,!1),a.element.removeEventListener("touchstart",a.mousedownOrTouchstartCallback,!1),a.element.removeEventListener("touchmove",a.mousemoveOrTouchmoveEventCallback,!1),a.element.removeEventListener("touchend",a.mouseupOrTouchendEventCallback,!1),document.documentElement.removeEventListener("mousemove",a.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",a.mouseupOrTouchendEventCallback,!1)},a.resize=function(){a.element.style.left=(a.containerElement.offsetWidth-a.element.offsetWidth)*a.leftPercent+"px",a.element.style.top=(a.containerElement.offsetHeight-a.element.offsetHeight)*a.topPercent+"px"},a.setPosition=function(e,t){a.leftPercent=e/100,a.topPercent=t/100,a.element.style.left=(a.containerElement.offsetWidth-a.element.offsetWidth)*a.leftPercent+"px",a.element.style.top=(a.containerElement.offsetHeight-a.element.offsetHeight)*a.topPercent+"px"},a.down=function(e){var t;"mousedown"===e.type&&(document.documentElement.addEventListener("mousemove",a.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.addEventListener("mouseup",a.mouseupOrTouchendEventCallback,!1)),a.element.setAttribute("talkDragState","onBeforeDrag"),a.containerElement&&a.containerElement.setAttribute("talkDragParentState","onBeforeDrag"),a.flag=!0,t=e.touches?e.touches[0]:e,a.cur.x=t.clientX,a.cur.y=t.clientY,a.dx=a.element.offsetLeft,a.dy=a.element.offsetTop,"mousedown"===e.type?i.onBeforeDrag&&i.onBeforeDrag(100*a.leftPercent,100*a.topPercent):"touchstart"===e.type&&(a.flag=!1,clearTimeout(a.downTimer),a.downTimer=setTimeout(function(){a.flag=!0,a.element.style.pointerEvents="none",a.element.style.boxShadow="0 0 0.2rem 0.05rem #222",a.element.style.transform="scale(1.05)",i.onBeforeDrag&&i.onBeforeDrag(100*a.leftPercent,100*a.topPercent)},500))},a.move=function(e){var t,o,n;"touchmove"===e.type&&(t=Math.abs(e.touches[0].clientX-a.cur.x),o=Math.abs(e.touches[0].clientY-a.cur.y),40<=Math.hypot(t,o)&&(clearTimeout(a.downTimer),a.downTimer=void 0)),a.flag&&(a.element.setAttribute("talkDragState","onDrag"),a.containerElement&&a.containerElement.setAttribute("talkDragParentState","onDrag"),n=e.touches?e.touches[0]:e,i.onDrag&&i.onDrag(100*a.leftPercent,100*a.topPercent),t=a.containerElement.offsetWidth-a.element.offsetWidth,o=a.containerElement.offsetHeight-a.element.offsetHeight,a.nx=n.clientX-a.cur.x,a.ny=n.clientY-a.cur.y,e=a.dx+a.nx,n=a.dy+a.ny,e=Math.min(Math.max(0,e),t),n=Math.min(Math.max(0,n),o),a.element.style.left=e+"px",a.element.style.top=n+"px",a.leftPercent=e/(a.containerElement.offsetWidth-a.element.offsetWidth),a.topPercent=n/(a.containerElement.offsetHeight-a.element.offsetHeight))},a.end=function(e){var t,o=!1;"mouseup"===e.type&&(document.documentElement.removeEventListener("mousemove",a.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",a.mouseupOrTouchendEventCallback,!1),o=!0),"touchend"===e.type&&(clearTimeout(a.downTimer),a.downTimer=void 0,a.flag=!1,t=setTimeout(function(){a.element.style.pointerEvents="auto",a.element.style.boxShadow="0 0 0 0 #222",a.element.style.transform="scale(1)",clearTimeout(t)},500)),!a.flag&&o||(a.element.setAttribute("talkDragState","onAfterDrag"),a.containerElement&&a.containerElement.setAttribute("talkDragParentState","onAfterDrag"),a.flag=!1,i.onAfterDrag&&i.onAfterDrag(100*a.leftPercent,100*a.topPercent)),o||(document.documentElement.removeEventListener("mousemove",a.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",a.mouseupOrTouchendEventCallback,!1))},a.resizeCallback=function(e){a.resize()},a.mousedownOrTouchstartCallback=function(e){if(a.flag||!a.disabled){try{a.down(e)}catch(e){console.error(e)}return!1}},a.mousemoveOrTouchmoveEventCallback=function(e){if(a.flag||!a.disabled){try{a.move(e)}catch(e){console.error(e)}return!1}},a.mouseupOrTouchendEventCallback=function(e){if(a.flag||!a.disabled){try{a.end(e)}catch(e){console.error(e)}return!1}},window.addEventListener("resize",a.resizeCallback,!1),a.element.addEventListener("mousedown",a.mousedownOrTouchstartCallback,!1),a.element.addEventListener("touchstart",a.mousedownOrTouchstartCallback,!1),a.element.addEventListener("touchmove",a.mousemoveOrTouchmoveEventCallback,!1),a.element.addEventListener("touchend",a.mouseupOrTouchendEventCallback,!1),a.element.setAttribute("talkDrag","true"),a.resize(),a;console.error("parameter elementId cannot find a node!")},function n(i,a,r){function s(t,e){if(!a[t]){if(!i[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(l)return l(t,!0);throw(o=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",o}o=a[t]={exports:{}},i[t][0].call(o.exports,function(e){return s(i[t][1][e]||e)},o,o.exports,n,i,a,r)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)s(r[e]);return s}({1:[function(o,e,t){(function(e){(function(){if(o("core-js/shim"),o("regenerator-runtime/runtime"),o("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,o){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:o})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":2,"core-js/shim":330,"regenerator-runtime/runtime":331}],2:[function(e,t,o){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":24,"../../modules/core.regexp.escape":132}],3:[function(e,t,o){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],4:[function(e,t,o){var n=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},{"./_cof":19}],5:[function(e,t,o){var n=e("./_wks")("unscopables"),i=Array.prototype;null==i[n]&&e("./_hide")(i,n,{}),t.exports=function(e){i[n][e]=!0}},{"./_hide":44,"./_wks":130}],6:[function(e,t,o){var n=e("./_string-at")(!0);t.exports=function(e,t,o){return t+(o?n(e,t).length:1)}},{"./_string-at":107}],7:[function(e,t,o){t.exports=function(e,t,o,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(o+": incorrect invocation!");return e}},{}],8:[function(e,t,o){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":53}],9:[function(e,t,o){var l=e("./_to-object"),d=e("./_to-absolute-index"),c=e("./_to-length");t.exports=[].copyWithin||function(e,t){var o=l(this),n=c(o.length),i=d(e,n),a=d(t,n),t=2<arguments.length?arguments[2]:void 0,r=Math.min((void 0===t?n:d(t,n))-a,n-i),s=1;for(a<i&&i<a+r&&(s=-1,a+=r-1,i+=r-1);0<r--;)a in o?o[i]=o[a]:delete o[i],i+=s,a+=s;return o}},{"./_to-absolute-index":115,"./_to-length":119,"./_to-object":120}],10:[function(e,t,o){var r=e("./_to-object"),s=e("./_to-absolute-index"),l=e("./_to-length");t.exports=function(e){for(var t=r(this),o=l(t.length),n=arguments.length,i=s(1<n?arguments[1]:void 0,o),n=2<n?arguments[2]:void 0,a=void 0===n?o:s(n,o);i<a;)t[i++]=e;return t}},{"./_to-absolute-index":115,"./_to-length":119,"./_to-object":120}],11:[function(e,t,o){var n=e("./_for-of");t.exports=function(e,t){var o=[];return n(e,!1,o.push,o,t),o}},{"./_for-of":40}],12:[function(e,t,o){var l=e("./_to-iobject"),d=e("./_to-length"),c=e("./_to-absolute-index");t.exports=function(s){return function(e,t,o){var n,i=l(e),a=d(i.length),r=c(o,a);if(s&&t!=t){for(;r<a;)if((n=i[r++])!=n)return!0}else for(;r<a;r++)if((s||r in i)&&i[r]===t)return s||r||0;return!s&&-1}}},{"./_to-absolute-index":115,"./_to-iobject":118,"./_to-length":119}],13:[function(e,t,o){var b=e("./_ctx"),_=e("./_iobject"),w=e("./_to-object"),k=e("./_to-length"),n=e("./_array-species-create");t.exports=function(u,e){var h=1==u,m=2==u,f=3==u,p=4==u,g=6==u,y=5==u||g,v=e||n;return function(e,t,o){for(var n,i,a=w(e),r=_(a),s=b(t,o,3),l=k(r.length),d=0,c=h?v(e,l):m?v(e,0):void 0;d<l;d++)if((y||d in r)&&(i=s(n=r[d],d,a),u))if(h)c[d]=i;else if(i)switch(u){case 3:return!0;case 5:return n;case 6:return d;case 2:c.push(n)}else if(p)return!1;return g?-1:f||p?p:c}}},{"./_array-species-create":16,"./_ctx":26,"./_iobject":49,"./_to-length":119,"./_to-object":120}],14:[function(e,t,o){var c=e("./_a-function"),u=e("./_to-object"),h=e("./_iobject"),m=e("./_to-length");t.exports=function(e,t,o,n,i){c(t);var a=u(e),r=h(a),s=m(a.length),l=i?s-1:0,d=i?-1:1;if(o<2)for(;;){if(l in r){n=r[l],l+=d;break}if(l+=d,i?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=l:l<s;l+=d)l in r&&(n=t(n,r[l],l,a));return n}},{"./_a-function":3,"./_iobject":49,"./_to-length":119,"./_to-object":120}],15:[function(e,t,o){var n=e("./_is-object"),i=e("./_is-array"),a=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":51,"./_is-object":53,"./_wks":130}],16:[function(e,t,o){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":15}],17:[function(e,t,o){var a=e("./_a-function"),r=e("./_is-object"),s=e("./_invoke"),l=[].slice,d={};t.exports=Function.bind||function(t){var o=a(this),n=l.call(arguments,1),i=function(){var e=n.concat(l.call(arguments));return this instanceof i?function(e,t,o){if(!(t in d)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";d[t]=Function("F,a","return new F("+n.join(",")+")")}return d[t](e,o)}(o,e.length,e):s(o,e,t)};return r(o.prototype)&&(i.prototype=o.prototype),i}},{"./_a-function":3,"./_invoke":48,"./_is-object":53}],18:[function(e,t,o){var n=e("./_cof"),i=e("./_wks")("toStringTag"),a="Arguments"==n(function(){return arguments}());t.exports=function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?e:a?n(t):"Object"==(e=n(t))&&"function"==typeof t.callee?"Arguments":e}},{"./_cof":19,"./_wks":130}],19:[function(e,t,o){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],20:[function(e,t,o){function r(e,t){var o,n=f(t);if("F"!==n)return e._i[n];for(o=e._f;o;o=o.n)if(o.k==t)return o}var s=e("./_object-dp").f,l=e("./_object-create"),d=e("./_redefine-all"),c=e("./_ctx"),u=e("./_an-instance"),h=e("./_for-of"),n=e("./_iter-define"),i=e("./_iter-step"),a=e("./_set-species"),m=e("./_descriptors"),f=e("./_meta").fastKey,p=e("./_validate-collection"),g=m?"_s":"size";t.exports={getConstructor:function(e,i,o,n){var a=e(function(e,t){u(e,a,i,"_i"),e._t=i,e._i=l(null),e._f=void 0,e._l=void 0,e[g]=0,null!=t&&h(t,o,e[n],e)});return d(a.prototype,{clear:function(){for(var e=p(this,i),t=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete t[o.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var t,o=p(this,i),n=r(o,e);return n&&(t=n.n,e=n.p,delete o._i[n.i],n.r=!0,e&&(e.n=t),t&&(t.p=e),o._f==n&&(o._f=t),o._l==n&&(o._l=e),o[g]--),!!n},forEach:function(e){p(this,i);for(var t,o=c(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(o(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!r(p(this,i),e)}}),m&&s(a.prototype,"size",{get:function(){return p(this,i)[g]}}),a},def:function(e,t,o){var n,i=r(e,t);return i?i.v=o:(e._l=i={i:n=f(t,!0),k:t,v:o,p:o=e._l,n:void 0,r:!1},e._f||(e._f=i),o&&(o.n=i),e[g]++,"F"!==n&&(e._i[n]=i)),e},getEntry:r,setStrong:function(e,o,t){n(e,o,function(e,t){this._t=p(e,o),this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,o=e._l;o&&o.r;)o=o.p;return e._t&&(e._l=o=o?o.n:e._t._f)?i(0,"keys"==t?o.k:"values"==t?o.v:[o.k,o.v]):(e._t=void 0,i(1))},t?"entries":"values",!t,!0),a(o)}}},{"./_an-instance":7,"./_ctx":26,"./_descriptors":30,"./_for-of":40,"./_iter-define":57,"./_iter-step":59,"./_meta":67,"./_object-create":72,"./_object-dp":73,"./_redefine-all":92,"./_set-species":101,"./_validate-collection":127}],21:[function(e,t,o){var n=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":11,"./_classof":18}],22:[function(e,t,o){function r(e){return e._l||(e._l=new y)}function n(e,t){return f(e.a,function(e){return e[0]===t})}var s=e("./_redefine-all"),l=e("./_meta").getWeak,i=e("./_an-object"),d=e("./_is-object"),c=e("./_an-instance"),u=e("./_for-of"),a=e("./_array-methods"),h=e("./_has"),m=e("./_validate-collection"),f=a(5),p=a(6),g=0,y=function(){this.a=[]};y.prototype={get:function(e){e=n(this,e);if(e)return e[1]},has:function(e){return!!n(this,e)},set:function(e,t){var o=n(this,e);o?o[1]=t:this.a.push([e,t])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(e,o,n,i){var a=e(function(e,t){c(e,a,o,"_i"),e._t=o,e._i=g++,e._l=void 0,null!=t&&u(t,n,e[i],e)});return s(a.prototype,{delete:function(e){if(!d(e))return!1;var t=l(e);return!0===t?r(m(this,o)).delete(e):t&&h(t,this._i)&&delete t[this._i]},has:function(e){if(!d(e))return!1;var t=l(e);return!0===t?r(m(this,o)).has(e):t&&h(t,this._i)}}),a},def:function(e,t,o){var n=l(i(t),!0);return!0===n?r(e).set(t,o):n[e._i]=o,e},ufstore:r}},{"./_an-instance":7,"./_an-object":8,"./_array-methods":13,"./_for-of":40,"./_has":43,"./_is-object":53,"./_meta":67,"./_redefine-all":92,"./_validate-collection":127}],23:[function(e,t,o){var y=e("./_global"),v=e("./_export"),b=e("./_redefine"),_=e("./_redefine-all"),w=e("./_meta"),k=e("./_for-of"),S=e("./_an-instance"),P=e("./_is-object"),I=e("./_fails"),x=e("./_iter-detect"),C=e("./_set-to-string-tag"),T=e("./_inherit-if-required");t.exports=function(o,e,t,n,i,a){function r(e){var o=p[e];b(p,e,"delete"==e?function(e){return!(a&&!P(e))&&o.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!P(e))&&o.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!P(e)?void 0:o.call(this,0===e?0:e)}:"add"==e?function(e){return o.call(this,0===e?0:e),this}:function(e,t){return o.call(this,0===e?0:e,t),this})}var s,l,d,c,u,h=y[o],m=h,f=i?"set":"add",p=m&&m.prototype,g={};return"function"==typeof m&&(a||p.forEach&&!I(function(){(new m).entries().next()}))?(l=(s=new m)[f](a?{}:-0,1)!=s,d=I(function(){s.has(1)}),c=x(function(e){new m(e)}),u=!a&&I(function(){for(var e=new m,t=5;t--;)e[f](t,t);return!e.has(-0)}),c||(((m=e(function(e,t){S(e,m,o);e=T(new h,e,m);return null!=t&&k(t,i,e[f],e),e})).prototype=p).constructor=m),(d||u)&&(r("delete"),r("has"),i&&r("get")),(u||l)&&r(f),a&&p.clear&&delete p.clear):(m=n.getConstructor(e,o,i,f),_(m.prototype,t),w.NEED=!0),C(m,o),g[o]=m,v(v.G+v.W+v.F*(m!=h),g),a||n.setStrong(m,o,i),m}},{"./_an-instance":7,"./_export":34,"./_fails":36,"./_for-of":40,"./_global":42,"./_inherit-if-required":47,"./_is-object":53,"./_iter-detect":58,"./_meta":67,"./_redefine":93,"./_redefine-all":92,"./_set-to-string-tag":102}],24:[function(e,t,o){t=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},{}],25:[function(e,t,o){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,o){t in e?n.f(e,t,i(0,o)):e[t]=o}},{"./_object-dp":73,"./_property-desc":91}],26:[function(e,t,o){var a=e("./_a-function");t.exports=function(n,i,e){if(a(n),void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,o){return n.call(i,e,t,o)}}return function(){return n.apply(i,arguments)}}},{"./_a-function":3}],27:[function(e,t,o){function i(e){return 9<e?e:"0"+e}var e=e("./_fails"),a=Date.prototype.getTime,n=Date.prototype.toISOString;t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=n.call(new Date(-5e13-1))})||!e(function(){n.call(new Date(NaN))})?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),o=e.getUTCMilliseconds(),n=t<0?"-":9999<t?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+(99<o?o:"0"+i(o))+"Z"}:n},{"./_fails":36}],28:[function(e,t,o){var n=e("./_an-object"),i=e("./_to-primitive");t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!=e)}},{"./_an-object":8,"./_to-primitive":121}],29:[function(e,t,o){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],30:[function(e,t,o){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":36}],31:[function(e,t,o){var n=e("./_is-object"),i=e("./_global").document,a=n(i)&&n(i.createElement);t.exports=function(e){return a?i.createElement(e):{}}},{"./_global":42,"./_is-object":53}],32:[function(e,t,o){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],33:[function(e,t,o){var s=e("./_object-keys"),l=e("./_object-gops"),d=e("./_object-pie");t.exports=function(e){var t=s(e),o=l.f;if(o)for(var n,i=o(e),a=d.f,r=0;i.length>r;)a.call(e,n=i[r++])&&t.push(n);return t}},{"./_object-gops":79,"./_object-keys":82,"./_object-pie":83}],34:[function(e,t,o){var f=e("./_global"),p=e("./_core"),g=e("./_hide"),y=e("./_redefine"),v=e("./_ctx"),b="prototype",_=function(e,t,o){var n,i,a,r=e&_.F,s=e&_.G,l=e&_.S,d=e&_.P,c=e&_.B,u=s?f:l?f[t]||(f[t]={}):(f[t]||{})[b],h=s?p:p[t]||(p[t]={}),m=h[b]||(h[b]={});for(n in s&&(o=t),o)i=((a=!r&&u&&void 0!==u[n])?u:o)[n],a=c&&a?v(i,f):d&&"function"==typeof i?v(Function.call,i):i,u&&y(u,n,i,e&_.U),h[n]!=i&&g(h,n,a),d&&m[n]!=i&&(m[n]=i)};f.core=p,_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128,t.exports=_},{"./_core":24,"./_ctx":26,"./_global":42,"./_hide":44,"./_redefine":93}],35:[function(e,t,o){var n=e("./_wks")("match");t.exports=function(t){var o=/./;try{"/./"[t](o)}catch(e){try{return o[n]=!1,!"/./"[t](o)}catch(e){}}return!0}},{"./_wks":130}],36:[function(e,t,o){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],37:[function(e,t,o){e("./es6.regexp.exec");var l=e("./_redefine"),d=e("./_hide"),c=e("./_fails"),u=e("./_defined"),h=e("./_wks"),m=e("./_regexp-exec"),f=h("species"),p=!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),g=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};e="ab".split(e);return 2===e.length&&"a"===e[0]&&"b"===e[1]}();t.exports=function(o,e,t){var a,n,i=h(o),r=!c(function(){var e={};return e[i]=function(){return 7},7!=""[o](e)}),s=r?!c(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===o&&(t.constructor={},t.constructor[f]=function(){return t}),t[i](""),!e}):void 0;r&&s&&("replace"!==o||p)&&("split"!==o||g)||(a=/./[i],t=(s=t(u,i,""[o],function(e,t,o,n,i){return t.exec===m?r&&!i?{done:!0,value:a.call(t,o,n)}:{done:!0,value:e.call(o,t,n)}:{done:!1}}))[0],n=s[1],l(String.prototype,o,t),d(RegExp.prototype,i,2==e?function(e,t){return n.call(e,this,t)}:function(e){return n.call(e,this)}))}},{"./_defined":29,"./_fails":36,"./_hide":44,"./_redefine":93,"./_regexp-exec":95,"./_wks":130,"./es6.regexp.exec":227}],38:[function(e,t,o){var n=e("./_an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":8}],39:[function(e,t,o){var f=e("./_is-array"),p=e("./_is-object"),g=e("./_to-length"),y=e("./_ctx"),v=e("./_wks")("isConcatSpreadable");t.exports=function e(t,o,n,i,a,r,s,l){for(var d,c,u=a,h=0,m=!!s&&y(s,l,3);h<i;){if(h in n){if(d=m?m(n[h],h,o):n[h],c=!1,p(d)&&(c=void 0!==(c=d[v])?!!c:f(d)),c&&0<r)u=e(t,o,d,g(d.length),u,r-1)-1;else{if(9007199254740991<=u)throw TypeError();t[u]=d}u++}h++}return u}},{"./_ctx":26,"./_is-array":51,"./_is-object":53,"./_to-length":119,"./_wks":130}],40:[function(e,t,o){var u=e("./_ctx"),h=e("./_iter-call"),m=e("./_is-array-iter"),f=e("./_an-object"),p=e("./_to-length"),g=e("./core.get-iterator-method"),y={},v={};(o=t.exports=function(e,t,o,n,i){var a,r,s,l,i=i?function(){return e}:g(e),d=u(o,n,t?2:1),c=0;if("function"!=typeof i)throw TypeError(e+" is not iterable!");if(m(i)){for(a=p(e.length);c<a;c++)if((l=t?d(f(r=e[c])[0],r[1]):d(e[c]))===y||l===v)return l}else for(s=i.call(e);!(r=s.next()).done;)if((l=h(s,d,r.value,t))===y||l===v)return l}).BREAK=y,o.RETURN=v},{"./_an-object":8,"./_ctx":26,"./_is-array-iter":50,"./_iter-call":55,"./_to-length":119,"./core.get-iterator-method":131}],41:[function(e,t,o){t.exports=e("./_shared")("native-function-to-string",Function.toString)},{"./_shared":104}],42:[function(e,t,o){t=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},{}],43:[function(e,t,o){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],44:[function(e,t,o){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,o){return n.f(e,t,i(1,o))}:function(e,t,o){return e[t]=o,e}},{"./_descriptors":30,"./_object-dp":73,"./_property-desc":91}],45:[function(e,t,o){e=e("./_global").document;t.exports=e&&e.documentElement},{"./_global":42}],46:[function(e,t,o){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":30,"./_dom-create":31,"./_fails":36}],47:[function(e,t,o){var i=e("./_is-object"),a=e("./_set-proto").set;t.exports=function(e,t,o){var n,t=t.constructor;return t!==o&&"function"==typeof t&&(n=t.prototype)!==o.prototype&&i(n)&&a&&a(e,n),e}},{"./_is-object":53,"./_set-proto":100}],48:[function(e,t,o){t.exports=function(e,t,o){var n=void 0===o;switch(t.length){case 0:return n?e():e.call(o);case 1:return n?e(t[0]):e.call(o,t[0]);case 2:return n?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3])}return e.apply(o,t)}},{}],49:[function(e,t,o){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":19}],50:[function(e,t,o){var n=e("./_iterators"),i=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},{"./_iterators":60,"./_wks":130}],51:[function(e,t,o){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":19}],52:[function(e,t,o){var n=e("./_is-object"),i=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":53}],53:[function(e,t,o){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],54:[function(e,t,o){var n=e("./_is-object"),i=e("./_cof"),a=e("./_wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},{"./_cof":19,"./_is-object":53,"./_wks":130}],55:[function(e,t,o){var a=e("./_an-object");t.exports=function(t,e,o,n){try{return n?e(a(o)[0],o[1]):e(o)}catch(e){var i=t.return;throw void 0!==i&&a(i.call(t)),e}}},{"./_an-object":8}],56:[function(e,t,o){var n=e("./_object-create"),i=e("./_property-desc"),a=e("./_set-to-string-tag"),r={};e("./_hide")(r,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,o){e.prototype=n(r,{next:i(1,o)}),a(e,t+" Iterator")}},{"./_hide":44,"./_object-create":72,"./_property-desc":91,"./_set-to-string-tag":102,"./_wks":130}],57:[function(e,t,o){function v(){return this}var b=e("./_library"),_=e("./_export"),w=e("./_redefine"),k=e("./_hide"),S=e("./_iterators"),P=e("./_iter-create"),I=e("./_set-to-string-tag"),x=e("./_object-gpo"),C=e("./_wks")("iterator"),T=!([].keys&&"next"in[].keys()),D="values";t.exports=function(e,t,o,n,i,a,r){P(o,t,n);function s(e){if(!T&&e in f)return f[e];switch(e){case"keys":case D:return function(){return new o(this,e)}}return function(){return new o(this,e)}}var l,d,c,u=t+" Iterator",h=i==D,m=!1,f=e.prototype,p=f[C]||f["@@iterator"]||i&&f[i],g=p||s(i),y=i?h?s("entries"):g:void 0,n="Array"==t&&f.entries||p;if(n&&(c=x(n.call(new e)))!==Object.prototype&&c.next&&(I(c,u,!0),b||"function"==typeof c[C]||k(c,C,v)),h&&p&&p.name!==D&&(m=!0,g=function(){return p.call(this)}),b&&!r||!T&&!m&&f[C]||k(f,C,g),S[t]=g,S[u]=v,i)if(l={values:h?g:s(D),keys:a?g:s("keys"),entries:y},r)for(d in l)d in f||w(f,d,l[d]);else _(_.P+_.F*(T||m),t,l);return l}},{"./_export":34,"./_hide":44,"./_iter-create":56,"./_iterators":60,"./_library":61,"./_object-gpo":80,"./_redefine":93,"./_set-to-string-tag":102,"./_wks":130}],58:[function(e,t,o){var a=e("./_wks")("iterator"),r=!1;try{var n=[7][a]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!r)return!1;var o=!1;try{var n=[7],i=n[a]();i.next=function(){return{done:o=!0}},n[a]=function(){return i},e(n)}catch(e){}return o}},{"./_wks":130}],59:[function(e,t,o){t.exports=function(e,t){return{value:t,done:!!e}}},{}],60:[function(e,t,o){t.exports={}},{}],61:[function(e,t,o){t.exports=!1},{}],62:[function(e,t,o){var n=Math.expm1;t.exports=!n||22025.465794806718<n(10)||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},{}],63:[function(e,t,o){var n=e("./_math-sign"),e=Math.pow,i=e(2,-52),a=e(2,-23),r=e(2,127)*(2-a),s=e(2,-126);t.exports=Math.fround||function(e){var t=Math.abs(e),o=n(e);return t<s?o*(t/s/a+1/i-1/i)*s*a:r<(t=(e=(1+a/i)*t)-(e-t))||t!=t?o*(1/0):o*t}},{"./_math-sign":66}],64:[function(e,t,o){t.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],65:[function(e,t,o){t.exports=Math.scale||function(e,t,o,n,i){return 0===arguments.length||e!=e||t!=t||o!=o||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(o-t)+n}},{}],66:[function(e,t,o){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],67:[function(e,t,o){function n(e){s(e,i,{value:{i:"O"+ ++l,w:{}}})}var i=e("./_uid")("meta"),a=e("./_is-object"),r=e("./_has"),s=e("./_object-dp").f,l=0,d=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return d(Object.preventExtensions({}))}),u=t.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,i)){if(!d(e))return"F";if(!t)return"E";n(e)}return e[i].i},getWeak:function(e,t){if(!r(e,i)){if(!d(e))return!0;if(!t)return!1;n(e)}return e[i].w},onFreeze:function(e){return c&&u.NEED&&d(e)&&!r(e,i)&&n(e),e}}},{"./_fails":36,"./_has":43,"./_is-object":53,"./_object-dp":73,"./_uid":125}],68:[function(e,t,o){function i(e,t,o){var n=s.get(e);if(!n){if(!o)return;s.set(e,n=new a)}if(!(e=n.get(t))){if(!o)return;n.set(t,e=new a)}return e}var a=e("./es6.map"),n=e("./_export"),r=e("./_shared")("metadata"),s=r.store||(r.store=new(e("./es6.weak-map")));t.exports={store:s,map:i,has:function(e,t,o){o=i(t,o,!1);return void 0!==o&&o.has(e)},get:function(e,t,o){o=i(t,o,!1);return void 0===o?void 0:o.get(e)},set:function(e,t,o,n){i(o,n,!0).set(e,t)},keys:function(e,t){var t=i(e,t,!1),o=[];return t&&t.forEach(function(e,t){o.push(t)}),o},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){n(n.S,"Reflect",e)}}},{"./_export":34,"./_shared":104,"./es6.map":162,"./es6.weak-map":269}],69:[function(e,t,o){var s=e("./_global"),l=e("./_task").set,d=s.MutationObserver||s.WebKitMutationObserver,c=s.process,u=s.Promise,h="process"==e("./_cof")(c);t.exports=function(){function e(){var e,t;for(h&&(e=c.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?i():n=void 0,e}}n=void 0,e&&e.enter()}var o,n,t,i,a,r;return i=h?function(){c.nextTick(e)}:!d||s.navigator&&s.navigator.standalone?u&&u.resolve?(t=u.resolve(void 0),function(){t.then(e)}):function(){l.call(s,e)}:(a=!0,r=document.createTextNode(""),new d(e).observe(r,{characterData:!0}),function(){r.data=a=!a}),function(e){e={fn:e,next:void 0};n&&(n.next=e),o||(o=e,i()),n=e}}},{"./_cof":19,"./_global":42,"./_task":114}],70:[function(e,t,o){var i=e("./_a-function");function n(e){var o,n;this.promise=new e(function(e,t){if(void 0!==o||void 0!==n)throw TypeError("Bad Promise constructor");o=e,n=t}),this.resolve=i(o),this.reject=i(n)}t.exports.f=function(e){return new n(e)}},{"./_a-function":3}],71:[function(e,t,o){var h=e("./_descriptors"),m=e("./_object-keys"),f=e("./_object-gops"),p=e("./_object-pie"),g=e("./_to-object"),y=e("./_iobject"),i=Object.assign;t.exports=!i||e("./_fails")(function(){var e={},t={},o=Symbol(),n="abcdefghijklmnopqrst";return e[o]=7,n.split("").forEach(function(e){t[e]=e}),7!=i({},e)[o]||Object.keys(i({},t)).join("")!=n})?function(e,t){for(var o=g(e),n=arguments.length,i=1,a=f.f,r=p.f;i<n;)for(var s,l=y(arguments[i++]),d=a?m(l).concat(a(l)):m(l),c=d.length,u=0;u<c;)s=d[u++],h&&!r.call(l,s)||(o[s]=l[s]);return o}:i},{"./_descriptors":30,"./_fails":36,"./_iobject":49,"./_object-gops":79,"./_object-keys":82,"./_object-pie":83,"./_to-object":120}],72:[function(o,e,t){function n(){}var i=o("./_an-object"),a=o("./_object-dps"),r=o("./_enum-bug-keys"),s=o("./_shared-key")("IE_PROTO"),l="prototype",d=function(){var e=o("./_dom-create")("iframe"),t=r.length;for(e.style.display="none",o("./_html").appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;t--;)delete d[l][r[t]];return d()};e.exports=Object.create||function(e,t){var o;return null!==e?(n[l]=i(e),o=new n,n[l]=null,o[s]=e):o=d(),void 0===t?o:a(o,t)}},{"./_an-object":8,"./_dom-create":31,"./_enum-bug-keys":32,"./_html":45,"./_object-dps":74,"./_shared-key":103}],73:[function(e,t,o){var n=e("./_an-object"),i=e("./_ie8-dom-define"),a=e("./_to-primitive"),r=Object.defineProperty;o.f=e("./_descriptors")?Object.defineProperty:function(e,t,o){if(n(e),t=a(t,!0),n(o),i)try{return r(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e}},{"./_an-object":8,"./_descriptors":30,"./_ie8-dom-define":46,"./_to-primitive":121}],74:[function(e,t,o){var r=e("./_object-dp"),s=e("./_an-object"),l=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){s(e);for(var o,n=l(t),i=n.length,a=0;a<i;)r.f(e,o=n[a++],t[o]);return e}},{"./_an-object":8,"./_descriptors":30,"./_object-dp":73,"./_object-keys":82}],75:[function(t,e,o){e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":36,"./_global":42,"./_library":61}],76:[function(e,t,o){var n=e("./_object-pie"),i=e("./_property-desc"),a=e("./_to-iobject"),r=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),d=Object.getOwnPropertyDescriptor;o.f=e("./_descriptors")?d:function(e,t){if(e=a(e),t=r(t,!0),l)try{return d(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},{"./_descriptors":30,"./_has":43,"./_ie8-dom-define":46,"./_object-pie":83,"./_property-desc":91,"./_to-iobject":118,"./_to-primitive":121}],77:[function(e,t,o){var n=e("./_to-iobject"),i=e("./_object-gopn").f,a={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return r&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return r.slice()}}(e):i(n(e))}},{"./_object-gopn":78,"./_to-iobject":118}],78:[function(e,t,o){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"./_enum-bug-keys":32,"./_object-keys-internal":81}],79:[function(e,t,o){o.f=Object.getOwnPropertySymbols},{}],80:[function(e,t,o){var n=e("./_has"),i=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},{"./_has":43,"./_shared-key":103,"./_to-object":120}],81:[function(e,t,o){var r=e("./_has"),s=e("./_to-iobject"),l=e("./_array-includes")(!1),d=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var o,n=s(e),i=0,a=[];for(o in n)o!=d&&r(n,o)&&a.push(o);for(;t.length>i;)r(n,o=t[i++])&&(~l(a,o)||a.push(o));return a}},{"./_array-includes":12,"./_has":43,"./_shared-key":103,"./_to-iobject":118}],82:[function(e,t,o){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":32,"./_object-keys-internal":81}],83:[function(e,t,o){o.f={}.propertyIsEnumerable},{}],84:[function(e,t,o){var i=e("./_export"),a=e("./_core"),r=e("./_fails");t.exports=function(e,t){var o=(a.Object||{})[e]||Object[e],n={};n[e]=t(o),i(i.S+i.F*r(function(){o(1)}),"Object",n)}},{"./_core":24,"./_export":34,"./_fails":36}],85:[function(e,t,o){var l=e("./_descriptors"),d=e("./_object-keys"),c=e("./_to-iobject"),u=e("./_object-pie").f;t.exports=function(s){return function(e){for(var t,o=c(e),n=d(o),i=n.length,a=0,r=[];a<i;)t=n[a++],l&&!u.call(o,t)||r.push(s?[t,o[t]]:o[t]);return r}}},{"./_descriptors":30,"./_object-keys":82,"./_object-pie":83,"./_to-iobject":118}],86:[function(e,t,o){var n=e("./_object-gopn"),i=e("./_object-gops"),a=e("./_an-object"),e=e("./_global").Reflect;t.exports=e&&e.ownKeys||function(e){var t=n.f(a(e)),o=i.f;return o?t.concat(o(e)):t}},{"./_an-object":8,"./_global":42,"./_object-gopn":78,"./_object-gops":79}],87:[function(e,t,o){var n=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function(e){var t=i(String(e),3),e=n(t);return 0===e&&"-"==t.charAt(0)?-0:e}:n},{"./_global":42,"./_string-trim":112,"./_string-ws":113}],88:[function(e,t,o){var n=e("./_global").parseInt,i=e("./_string-trim").trim,e=e("./_string-ws"),a=/^[-+]?0[xX]/;t.exports=8!==n(e+"08")||22!==n(e+"0x16")?function(e,t){e=i(String(e),3);return n(e,t>>>0||(a.test(e)?16:10))}:n},{"./_global":42,"./_string-trim":112,"./_string-ws":113}],89:[function(e,t,o){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],90:[function(e,t,o){var n=e("./_an-object"),i=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;e=a.f(e);return(0,e.resolve)(t),e.promise}},{"./_an-object":8,"./_is-object":53,"./_new-promise-capability":70}],91:[function(e,t,o){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],92:[function(e,t,o){var i=e("./_redefine");t.exports=function(e,t,o){for(var n in t)i(e,n,t[n],o);return e}},{"./_redefine":93}],93:[function(e,t,o){var a=e("./_global"),r=e("./_hide"),s=e("./_has"),l=e("./_uid")("src"),n=e("./_function-to-string"),i="toString",d=(""+n).split(i);e("./_core").inspectSource=function(e){return n.call(e)},(t.exports=function(e,t,o,n){var i="function"==typeof o;i&&(s(o,"name")||r(o,"name",t)),e[t]!==o&&(i&&(s(o,l)||r(o,l,e[t]?""+e[t]:d.join(String(t)))),e===a?e[t]=o:n?e[t]?e[t]=o:r(e,t,o):(delete e[t],r(e,t,o)))})(Function.prototype,i,function(){return"function"==typeof this&&this[l]||n.call(this)})},{"./_core":24,"./_function-to-string":41,"./_global":42,"./_has":43,"./_hide":44,"./_uid":125}],94:[function(e,t,o){var n=e("./_classof"),i=RegExp.prototype.exec;t.exports=function(e,t){var o=e.exec;if("function"==typeof o){o=o.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},{"./_classof":18}],95:[function(e,t,o){var n,r=e("./_flags"),s=RegExp.prototype.exec,l=String.prototype.replace,i=s,d="lastIndex",c=(n=/a/,e=/b*/g,s.call(n,"a"),s.call(e,"a"),0!==n[d]||0!==e[d]),u=void 0!==/()??/.exec("")[1];(c||u)&&(i=function(e){var t,o,n,i,a=this;return u&&(o=new RegExp("^"+a.source+"$(?!\\s)",r.call(a))),c&&(t=a[d]),n=s.call(a,e),c&&n&&(a[d]=a.global?n.index+n[0].length:t),u&&n&&1<n.length&&l.call(n[0],o,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n}),t.exports=i},{"./_flags":38}],96:[function(e,t,o){t.exports=function(t,o){var n=o===Object(o)?function(e){return o[e]}:o;return function(e){return String(e).replace(t,n)}}},{}],97:[function(e,t,o){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],98:[function(e,t,o){var n=e("./_export"),r=e("./_a-function"),s=e("./_ctx"),l=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,o,n,i,a=arguments[1];return r(this),(t=void 0!==a)&&r(a),null==e?new this:(o=[],t?(n=0,i=s(a,arguments[2],2),l(e,!1,function(e){o.push(i(e,n++))})):l(e,!1,o.push,o),new this(o))}})}},{"./_a-function":3,"./_ctx":26,"./_export":34,"./_for-of":40}],99:[function(e,t,o){var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":34}],100:[function(t,e,o){function i(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var n=t("./_is-object"),a=t("./_an-object");e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,o,n){try{(n=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),o=!(e instanceof Array)}catch(e){o=!0}return function(e,t){return i(e,t),o?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:i}},{"./_an-object":8,"./_ctx":26,"./_is-object":53,"./_object-gopd":76}],101:[function(e,t,o){var n=e("./_global"),i=e("./_object-dp"),a=e("./_descriptors"),r=e("./_wks")("species");t.exports=function(e){e=n[e];a&&e&&!e[r]&&i.f(e,r,{configurable:!0,get:function(){return this}})}},{"./_descriptors":30,"./_global":42,"./_object-dp":73,"./_wks":130}],102:[function(e,t,o){var n=e("./_object-dp").f,i=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!i(e=o?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},{"./_has":43,"./_object-dp":73,"./_wks":130}],103:[function(e,t,o){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":104,"./_uid":125}],104:[function(e,t,o){var n=e("./_core"),i=e("./_global"),a="__core-js_shared__",r=i[a]||(i[a]={});(t.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"./_core":24,"./_global":42,"./_library":61}],105:[function(e,t,o){var n=e("./_an-object"),i=e("./_a-function"),a=e("./_wks")("species");t.exports=function(e,t){var o,e=n(e).constructor;return void 0===e||null==(o=n(e)[a])?t:i(o)}},{"./_a-function":3,"./_an-object":8,"./_wks":130}],106:[function(e,t,o){var n=e("./_fails");t.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":36}],107:[function(e,t,o){var r=e("./_to-integer"),s=e("./_defined");t.exports=function(a){return function(e,t){var o,n=String(s(e)),i=r(t),e=n.length;return i<0||e<=i?a?"":void 0:(t=n.charCodeAt(i))<55296||56319<t||i+1===e||(o=n.charCodeAt(i+1))<56320||57343<o?a?n.charAt(i):t:a?n.slice(i,i+2):o-56320+(t-55296<<10)+65536}}},{"./_defined":29,"./_to-integer":117}],108:[function(e,t,o){var n=e("./_is-regexp"),i=e("./_defined");t.exports=function(e,t,o){if(n(t))throw TypeError("String#"+o+" doesn't accept regex!");return String(i(e))}},{"./_defined":29,"./_is-regexp":54}],109:[function(e,t,o){function n(e,t,o,n){var i=String(r(e)),e="<"+t;return""!==o&&(e+=" "+o+'="'+String(n).replace(s,"&quot;")+'"'),e+">"+i+"</"+t+">"}var i=e("./_export"),a=e("./_fails"),r=e("./_defined"),s=/"/g;t.exports=function(t,e){var o={};o[t]=e(n),i(i.P+i.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",o)}},{"./_defined":29,"./_export":34,"./_fails":36}],110:[function(e,t,o){var a=e("./_to-length"),r=e("./_string-repeat"),s=e("./_defined");t.exports=function(e,t,o,n){var i=String(s(e)),e=i.length,o=void 0===o?" ":String(o),t=a(t);if(t<=e||""==o)return i;e=t-e,o=r.call(o,Math.ceil(e/o.length));return o.length>e&&(o=o.slice(0,e)),n?o+i:i+o}},{"./_defined":29,"./_string-repeat":111,"./_to-length":119}],111:[function(e,t,o){var i=e("./_to-integer"),a=e("./_defined");t.exports=function(e){var t=String(a(this)),o="",n=i(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;0<n;(n>>>=1)&&(t+=t))1&n&&(o+=t);return o}},{"./_defined":29,"./_to-integer":117}],112:[function(e,t,o){var a=e("./_export"),n=e("./_defined"),r=e("./_fails"),s=e("./_string-ws"),e="["+s+"]",i=RegExp("^"+e+e+"*"),l=RegExp(e+e+"*$"),e=function(e,t,o){var n={},i=r(function(){return!!s[e]()||"​"!="​"[e]()}),t=n[e]=i?t(d):s[e];o&&(n[o]=t),a(a.P+a.F*i,"String",n)},d=e.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(i,"")),2&t&&(e=e.replace(l,"")),e};t.exports=e},{"./_defined":29,"./_export":34,"./_fails":36,"./_string-ws":113}],113:[function(e,t,o){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],114:[function(e,t,o){function n(){var e,t=+this;y.hasOwnProperty(t)&&(e=y[t],delete y[t],e())}function i(e){n.call(e.data)}var a,r=e("./_ctx"),s=e("./_invoke"),l=e("./_html"),d=e("./_dom-create"),c=e("./_global"),u=c.process,h=c.setImmediate,m=c.clearImmediate,f=c.MessageChannel,p=c.Dispatch,g=0,y={},v="onreadystatechange";h&&m||(h=function(e){for(var t=[],o=1;o<arguments.length;)t.push(arguments[o++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},a(g),g},m=function(e){delete y[e]},"process"==e("./_cof")(u)?a=function(e){u.nextTick(r(n,e,1))}:p&&p.now?a=function(e){p.now(r(n,e,1))}:f?(f=(e=new f).port2,e.port1.onmessage=i,a=r(f.postMessage,f,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(a=function(e){c.postMessage(e+"","*")},c.addEventListener("message",i,!1)):a=v in d("script")?function(e){l.appendChild(d("script"))[v]=function(){l.removeChild(this),n.call(e)}}:function(e){setTimeout(r(n,e,1),0)}),t.exports={set:h,clear:m}},{"./_cof":19,"./_ctx":26,"./_dom-create":31,"./_global":42,"./_html":45,"./_invoke":48}],115:[function(e,t,o){var n=e("./_to-integer"),i=Math.max,a=Math.min;t.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},{"./_to-integer":117}],116:[function(e,t,o){var n=e("./_to-integer"),i=e("./_to-length");t.exports=function(e){if(void 0===e)return 0;var t=n(e),e=i(t);if(t!==e)throw RangeError("Wrong length!");return e}},{"./_to-integer":117,"./_to-length":119}],117:[function(e,t,o){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},{}],118:[function(e,t,o){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":29,"./_iobject":49}],119:[function(e,t,o){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return 0<e?i(n(e),9007199254740991):0}},{"./_to-integer":117}],120:[function(e,t,o){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":29}],121:[function(e,t,o){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var o,n;if(t&&"function"==typeof(o=e.toString)&&!i(n=o.call(e)))return n;if("function"==typeof(o=e.valueOf)&&!i(n=o.call(e)))return n;if(!t&&"function"==typeof(o=e.toString)&&!i(n=o.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":53}],122:[function(e,t,o){var m,f,p,g,y,n,u,v,i,b,a,r,_,w,s,l,d,k,S,h,P,I,x,C,T,c,D,E,L,A,M,W,R,j,N,O,V,F,B,z,U,H,J,K,q,G,Y,X,Z,$,Q,ee,te,oe,ne,ie,ae,re,se,le,de,ce,ue,he,me,fe,pe,ge,ye,ve,be,_e,we,ke,Se,Pe,Ie,xe,Ce,Te,De,Ee,Le,Ae,Me,We,Re,je,Ne,Oe,Ve,Fe,Be;e("./_descriptors")?(m=e("./_library"),f=e("./_global"),p=e("./_fails"),g=e("./_export"),y=e("./_typed"),n=e("./_typed-buffer"),u=e("./_ctx"),v=e("./_an-instance"),i=e("./_property-desc"),b=e("./_hide"),a=e("./_redefine-all"),r=e("./_to-integer"),_=e("./_to-length"),w=e("./_to-index"),s=e("./_to-absolute-index"),l=e("./_to-primitive"),d=e("./_has"),k=e("./_classof"),S=e("./_is-object"),h=e("./_to-object"),P=e("./_is-array-iter"),I=e("./_object-create"),x=e("./_object-gpo"),C=e("./_object-gopn").f,T=e("./core.get-iterator-method"),Ve=e("./_uid"),De=e("./_wks"),Fe=e("./_array-methods"),c=e("./_array-includes"),D=e("./_species-constructor"),E=e("./es6.array.iterator"),L=e("./_iterators"),A=e("./_iter-detect"),M=e("./_set-species"),W=e("./_array-fill"),R=e("./_array-copy-within"),j=e("./_object-dp"),N=e("./_object-gopd"),O=j.f,V=N.f,F=f.RangeError,B=f.TypeError,z=f.Uint8Array,H="Shared"+(U="ArrayBuffer"),J="BYTES_PER_ELEMENT",K="prototype",e=Array[K],q=n.ArrayBuffer,G=n.DataView,Y=Fe(0),X=Fe(2),Z=Fe(3),$=Fe(4),Q=Fe(5),ee=Fe(6),te=c(!0),oe=c(!1),ne=E.values,ie=E.keys,ae=E.entries,re=e.lastIndexOf,se=e.reduce,le=e.reduceRight,de=e.join,ce=e.sort,ue=e.slice,he=e.toString,me=e.toLocaleString,fe=De("iterator"),pe=De("toStringTag"),ge=Ve("typed_constructor"),ye=Ve("def_constructor"),e=y.CONSTR,ve=y.TYPED,be=y.VIEW,_e="Wrong length!",we=Fe(1,function(e,t){return xe(D(e,e[ye]),t)}),ke=p(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),Se=!!z&&!!z[K].set&&p(function(){new z(1).set({})}),Pe=function(e,t){e=r(e);if(e<0||e%t)throw F("Wrong offset!");return e},Ie=function(e){if(S(e)&&ve in e)return e;throw B(e+" is not a typed array!")},xe=function(e,t){if(!(S(e)&&ge in e))throw B("It is not a typed array constructor!");return new e(t)},Ce=function(e,t){return Te(D(e,e[ye]),t)},Te=function(e,t){for(var o=0,n=t.length,i=xe(e,n);o<n;)i[o]=t[o++];return i},De=function(e,t,o){O(e,t,{get:function(){return this._d[o]}})},Ee=function(e){var t,o,n,i,a,r,s=h(e),l=arguments.length,d=1<l?arguments[1]:void 0,c=void 0!==d,e=T(s);if(null!=e&&!P(e)){for(r=e.call(s),n=[],t=0;!(a=r.next()).done;t++)n.push(a.value);s=n}for(c&&2<l&&(d=u(d,arguments[2],2)),t=0,o=_(s.length),i=xe(this,o);t<o;t++)i[t]=c?d(s[t],t):s[t];return i},Le=function(){for(var e=0,t=arguments.length,o=xe(this,t);e<t;)o[e]=arguments[e++];return o},Ae=!!z&&p(function(){me.call(new z(1))}),Me=function(){return me.apply(Ae?ue.call(Ie(this)):Ie(this),arguments)},We={copyWithin:function(e,t){return R.call(Ie(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return $(Ie(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return W.apply(Ie(this),arguments)},filter:function(e){return Ce(this,X(Ie(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return Q(Ie(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ee(Ie(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){Y(Ie(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return oe(Ie(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return te(Ie(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return de.apply(Ie(this),arguments)},lastIndexOf:function(e){return re.apply(Ie(this),arguments)},map:function(e){return we(Ie(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return se.apply(Ie(this),arguments)},reduceRight:function(e){return le.apply(Ie(this),arguments)},reverse:function(){for(var e,t=this,o=Ie(t).length,n=Math.floor(o/2),i=0;i<n;)e=t[i],t[i++]=t[--o],t[o]=e;return t},some:function(e){return Z(Ie(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return ce.call(Ie(this),e)},subarray:function(e,t){var o=Ie(this),n=o.length,e=s(e,n);return new(D(o,o[ye]))(o.buffer,o.byteOffset+e*o.BYTES_PER_ELEMENT,_((void 0===t?n:s(t,n))-e))}},Re=function(e,t){return Ce(this,ue.call(Ie(this),e,t))},je=function(e){Ie(this);var t=Pe(arguments[1],1),o=this.length,n=h(e),i=_(n.length),a=0;if(o<i+t)throw F(_e);for(;a<i;)this[t+a]=n[a++]},Ne={entries:function(){return ae.call(Ie(this))},keys:function(){return ie.call(Ie(this))},values:function(){return ne.call(Ie(this))}},Oe=function(e,t){return S(e)&&e[ve]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ve=function(e,t){return Oe(e,t=l(t,!0))?i(2,e[t]):V(e,t)},Fe=function(e,t,o){return!(Oe(e,t=l(t,!0))&&S(o)&&d(o,"value"))||d(o,"get")||d(o,"set")||o.configurable||d(o,"writable")&&!o.writable||d(o,"enumerable")&&!o.enumerable?O(e,t,o):(e[t]=o.value,e)},e||(N.f=Ve,j.f=Fe),g(g.S+g.F*!e,"Object",{getOwnPropertyDescriptor:Ve,defineProperty:Fe}),p(function(){he.call({})})&&(he=me=function(){return de.call(this)}),Be=a({},We),a(Be,Ne),b(Be,fe,Ne.values),a(Be,{slice:Re,set:je,constructor:function(){},toString:he,toLocaleString:Me}),De(Be,"buffer","b"),De(Be,"byteOffset","o"),De(Be,"byteLength","l"),De(Be,"length","e"),O(Be,pe,{get:function(){return this[ve]}}),t.exports=function(e,d,t,n){function c(e,t){O(e,t,{get:function(){return function(e,t){e=e._d;return e.v[o](t*d+e.o,ke)}(this,t)},set:function(e){return function(e,t,o){e=e._d;n&&(o=(o=Math.round(o))<0?0:255<o?255:255&o),e.v[i](t*d+e.o,o,ke)}(this,t,e)},enumerable:!0})}var u=e+((n=!!n)?"Clamped":"")+"Array",o="get"+e,i="set"+e,h=f[u],a=h||{},r=h&&x(h),s=!h||!y.ABV,e={},l=h&&h[K];s?(h=t(function(e,t,o,n){v(e,h,u,"_d");var i,a,r,s=0,l=0;if(S(t)){if(!(t instanceof q||(r=k(t))==U||r==H))return ve in t?Te(h,t):Ee.call(h,t);r=t,l=Pe(o,d);o=t.byteLength;if(void 0===n){if(o%d)throw F(_e);if((i=o-l)<0)throw F(_e)}else if(o<(i=_(n)*d)+l)throw F(_e);a=i/d}else a=w(t),r=new q(i=a*d);for(b(e,"_d",{b:r,o:l,l:i,e:a,v:new G(r)});s<a;)c(e,s++)}),l=h[K]=I(Be),b(l,"constructor",h)):p(function(){h(1)})&&p(function(){new h(-1)})&&A(function(e){new h,new h(null),new h(1.5),new h(e)},!0)||(h=t(function(e,t,o,n){var i;return v(e,h,u),S(t)?t instanceof q||(i=k(t))==U||i==H?void 0!==n?new a(t,Pe(o,d),n):void 0!==o?new a(t,Pe(o,d)):new a(t):ve in t?Te(h,t):Ee.call(h,t):new a(w(t))}),Y(r!==Function.prototype?C(a).concat(C(r)):C(a),function(e){e in h||b(h,e,a[e])}),h[K]=l,m||(l.constructor=h));s=l[fe],t=!!s&&("values"==s.name||null==s.name),r=Ne.values;b(h,ge,!0),b(l,ve,u),b(l,be,!0),b(l,ye,h),(n?new h(1)[pe]==u:pe in l)||O(l,pe,{get:function(){return u}}),e[u]=h,g(g.G+g.W+g.F*(h!=a),e),g(g.S,u,{BYTES_PER_ELEMENT:d}),g(g.S+g.F*p(function(){a.of.call(h,1)}),u,{from:Ee,of:Le}),J in l||b(l,J,d),g(g.P,u,We),M(u),g(g.P+g.F*Se,u,{set:je}),g(g.P+g.F*!t,u,Ne),m||l.toString==he||(l.toString=he),g(g.P+g.F*p(function(){new h(1).slice()}),u,{slice:Re}),g(g.P+g.F*(p(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!p(function(){l.toLocaleString.call([1,2])})),u,{toLocaleString:Me}),L[u]=t?s:r,m||t||b(l,fe,r)}):t.exports=function(){}},{"./_an-instance":7,"./_array-copy-within":9,"./_array-fill":10,"./_array-includes":12,"./_array-methods":13,"./_classof":18,"./_ctx":26,"./_descriptors":30,"./_export":34,"./_fails":36,"./_global":42,"./_has":43,"./_hide":44,"./_is-array-iter":50,"./_is-object":53,"./_iter-detect":58,"./_iterators":60,"./_library":61,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_object-gpo":80,"./_property-desc":91,"./_redefine-all":92,"./_set-species":101,"./_species-constructor":105,"./_to-absolute-index":115,"./_to-index":116,"./_to-integer":117,"./_to-length":119,"./_to-object":120,"./_to-primitive":121,"./_typed":124,"./_typed-buffer":123,"./_uid":125,"./_wks":130,"./core.get-iterator-method":131,"./es6.array.iterator":143}],123:[function(e,t,o){var n=e("./_global"),i=e("./_descriptors"),a=e("./_library"),r=e("./_typed"),s=e("./_hide"),l=e("./_redefine-all"),d=e("./_fails"),c=e("./_an-instance"),u=e("./_to-integer"),h=e("./_to-length"),m=e("./_to-index"),f=e("./_object-gopn").f,p=e("./_object-dp").f,g=e("./_array-fill"),y=e("./_set-to-string-tag"),v="ArrayBuffer",b="DataView",_="prototype",w="Wrong index!",k=n[v],S=n[b],e=n.Math,P=n.RangeError,I=n.Infinity,x=k,C=e.abs,T=e.pow,D=e.floor,E=e.log,L=e.LN2,n="byteLength",e="byteOffset",A=i?"_b":"buffer",M=i?"_l":n,W=i?"_o":e;function R(e,t,o){var n,i,a=new Array(o),r=8*o-t-1,s=(1<<r)-1,l=s>>1,d=23===t?T(2,-24)-T(2,-77):0,c=0,u=e<0||0===e&&1/e<0?1:0;for((e=C(e))!=e||e===I?(i=e!=e?1:0,n=s):(n=D(E(e)/L),e*(o=T(2,-n))<1&&(n--,o*=2),2<=(e+=1<=n+l?d/o:d*T(2,1-l))*o&&(n++,o/=2),s<=n+l?(i=0,n=s):1<=n+l?(i=(e*o-1)*T(2,t),n+=l):(i=e*T(2,l-1)*T(2,t),n=0));8<=t;a[c++]=255&i,i/=256,t-=8);for(n=n<<t|i,r+=t;0<r;a[c++]=255&n,n/=256,r-=8);return a[--c]|=128*u,a}function j(e,t,o){var n,i=8*o-t-1,a=(1<<i)-1,r=a>>1,s=i-7,l=o-1,o=e[l--],d=127&o;for(o>>=7;0<s;d=256*d+e[l],l--,s-=8);for(n=d&(1<<-s)-1,d>>=-s,s+=t;0<s;n=256*n+e[l],l--,s-=8);if(0===d)d=1-r;else{if(d===a)return n?NaN:o?-I:I;n+=T(2,t),d-=r}return(o?-1:1)*n*T(2,d-t)}function N(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function O(e){return[255&e]}function V(e){return[255&e,e>>8&255]}function F(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function B(e){return R(e,52,8)}function z(e){return R(e,23,4)}function U(e,t,o){p(e[_],t,{get:function(){return this[o]}})}function H(e,t,o,n){var i=m(+o);if(i+t>e[M])throw P(w);o=e[A]._b,e=i+e[W],t=o.slice(e,e+t);return n?t:t.reverse()}function J(e,t,o,n,i,a){o=m(+o);if(o+t>e[M])throw P(w);for(var r=e[A]._b,s=o+e[W],l=n(+i),d=0;d<t;d++)r[s+d]=l[a?d:t-d-1]}if(r.ABV){if(!d(function(){k(1)})||!d(function(){new k(-1)})||d(function(){return new k,new k(1.5),new k(NaN),k.name!=v})){for(var K,q=(k=function(e){return c(this,k),new x(m(e))})[_]=x[_],G=f(x),Y=0;G.length>Y;)(K=G[Y++])in k||s(k,K,x[K]);a||(q.constructor=k)}var q=new S(new k(2)),X=S[_].setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||l(S[_],{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},!0)}else k=function(e){c(this,k,v);e=m(e);this._b=g.call(new Array(e),0),this[M]=e},S=function(e,t,o){c(this,S,b),c(e,k,b);var n=e[M],t=u(t);if(t<0||n<t)throw P("Wrong offset!");if(n<t+(o=void 0===o?n-t:h(o)))throw P("Wrong length!");this[A]=e,this[W]=t,this[M]=o},i&&(U(k,n,"_l"),U(S,"buffer","_b"),U(S,n,"_l"),U(S,e,"_o")),l(S[_],{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){e=H(this,2,e,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(e){e=H(this,2,e,arguments[1]);return e[1]<<8|e[0]},getInt32:function(e){return N(H(this,4,e,arguments[1]))},getUint32:function(e){return N(H(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return j(H(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return j(H(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){J(this,1,e,O,t)},setUint8:function(e,t){J(this,1,e,O,t)},setInt16:function(e,t){J(this,2,e,V,t,arguments[2])},setUint16:function(e,t){J(this,2,e,V,t,arguments[2])},setInt32:function(e,t){J(this,4,e,F,t,arguments[2])},setUint32:function(e,t){J(this,4,e,F,t,arguments[2])},setFloat32:function(e,t){J(this,4,e,z,t,arguments[2])},setFloat64:function(e,t){J(this,8,e,B,t,arguments[2])}});y(k,v),y(S,b),s(S[_],r.VIEW,!0),o[v]=k,o[b]=S},{"./_an-instance":7,"./_array-fill":10,"./_descriptors":30,"./_fails":36,"./_global":42,"./_hide":44,"./_library":61,"./_object-dp":73,"./_object-gopn":78,"./_redefine-all":92,"./_set-to-string-tag":102,"./_to-index":116,"./_to-integer":117,"./_to-length":119,"./_typed":124}],124:[function(e,t,o){for(var n,i=e("./_global"),a=e("./_hide"),e=e("./_uid"),r=e("typed_array"),s=e("view"),e=!(!i.ArrayBuffer||!i.DataView),l=e,d=0,c="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(n=i[c[d++]])?(a(n.prototype,r,!0),a(n.prototype,s,!0)):l=!1;t.exports={ABV:e,CONSTR:l,TYPED:r,VIEW:s}},{"./_global":42,"./_hide":44,"./_uid":125}],125:[function(e,t,o){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],126:[function(e,t,o){e=e("./_global").navigator;t.exports=e&&e.userAgent||""},{"./_global":42}],127:[function(e,t,o){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":53}],128:[function(e,t,o){var n=e("./_global"),i=e("./_core"),a=e("./_library"),r=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=!a&&n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},{"./_core":24,"./_global":42,"./_library":61,"./_object-dp":73,"./_wks-ext":129}],129:[function(e,t,o){o.f=e("./_wks")},{"./_wks":130}],130:[function(e,t,o){var n=e("./_shared")("wks"),i=e("./_uid"),a=e("./_global").Symbol,r="function"==typeof a;(t.exports=function(e){return n[e]||(n[e]=r&&a[e]||(r?a:i)("Symbol."+e))}).store=n},{"./_global":42,"./_shared":104,"./_uid":125}],131:[function(e,t,o){var n=e("./_classof"),i=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[n(e)]}},{"./_classof":18,"./_core":24,"./_iterators":60,"./_wks":130}],132:[function(e,t,o){var n=e("./_export"),i=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},{"./_export":34,"./_replacer":96}],133:[function(e,t,o){var n=e("./_export");n(n.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":5,"./_array-copy-within":9,"./_export":34}],134:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(4);n(n.P+n.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":106}],135:[function(e,t,o){var n=e("./_export");n(n.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":5,"./_array-fill":10,"./_export":34}],136:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(2);n(n.P+n.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":106}],137:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(6),a="findIndex",r=!0;a in[]&&Array(1)[a](function(){r=!1}),n(n.P+n.F*r,"Array",{findIndex:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")(a)},{"./_add-to-unscopables":5,"./_array-methods":13,"./_export":34}],138:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("find")},{"./_add-to-unscopables":5,"./_array-methods":13,"./_export":34}],139:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(0),e=e("./_strict-method")([].forEach,!0);n(n.P+n.F*!e,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":106}],140:[function(e,t,o){var u=e("./_ctx"),n=e("./_export"),h=e("./_to-object"),m=e("./_iter-call"),f=e("./_is-array-iter"),p=e("./_to-length"),g=e("./_create-property"),y=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,n,i,a=h(e),r="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,d=void 0!==l,c=0,e=y(a);if(d&&(l=u(l,2<s?arguments[2]:void 0,2)),null==e||r==Array&&f(e))for(o=new r(t=p(a.length));c<t;c++)g(o,c,d?l(a[c],c):a[c]);else for(i=e.call(a),o=new r;!(n=i.next()).done;c++)g(o,c,d?m(i,l,[n.value,c],!0):n.value);return o.length=c,o}})},{"./_create-property":25,"./_ctx":26,"./_export":34,"./_is-array-iter":50,"./_iter-call":55,"./_iter-detect":58,"./_to-length":119,"./_to-object":120,"./core.get-iterator-method":131}],141:[function(e,t,o){var n=e("./_export"),i=e("./_array-includes")(!1),a=[].indexOf,r=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(r||!e("./_strict-method")(a)),"Array",{indexOf:function(e){return r?a.apply(this,arguments)||0:i(this,e,arguments[1])}})},{"./_array-includes":12,"./_export":34,"./_strict-method":106}],142:[function(e,t,o){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":34,"./_is-array":51}],143:[function(e,t,o){var n=e("./_add-to-unscopables"),i=e("./_iter-step"),a=e("./_iterators"),r=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?o:"values"==t?e[o]:[o,e[o]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":5,"./_iter-define":57,"./_iter-step":59,"./_iterators":60,"./_to-iobject":118}],144:[function(e,t,o){var n=e("./_export"),i=e("./_to-iobject"),a=[].join;n(n.P+n.F*(e("./_iobject")!=Object||!e("./_strict-method")(a)),"Array",{join:function(e){return a.call(i(this),void 0===e?",":e)}})},{"./_export":34,"./_iobject":49,"./_strict-method":106,"./_to-iobject":118}],145:[function(e,t,o){var n=e("./_export"),i=e("./_to-iobject"),a=e("./_to-integer"),r=e("./_to-length"),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(l||!e("./_strict-method")(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),o=r(t.length),n=o-1;for(1<arguments.length&&(n=Math.min(n,a(arguments[1]))),n<0&&(n=o+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1}})},{"./_export":34,"./_strict-method":106,"./_to-integer":117,"./_to-iobject":118,"./_to-length":119}],146:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(1);n(n.P+n.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":106}],147:[function(e,t,o){var n=e("./_export"),i=e("./_create-property");n(n.S+n.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,o=new("function"==typeof this?this:Array)(t);e<t;)i(o,e,arguments[e++]);return o.length=t,o}})},{"./_create-property":25,"./_export":34,"./_fails":36}],148:[function(e,t,o){var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},{"./_array-reduce":14,"./_export":34,"./_strict-method":106}],149:[function(e,t,o){var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},{"./_array-reduce":14,"./_export":34,"./_strict-method":106}],150:[function(e,t,o){var n=e("./_export"),i=e("./_html"),l=e("./_cof"),d=e("./_to-absolute-index"),c=e("./_to-length"),u=[].slice;n(n.P+n.F*e("./_fails")(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var o=c(this.length),n=l(this);if(t=void 0===t?o:t,"Array"==n)return u.call(this,e,t);for(var i=d(e,o),o=d(t,o),a=c(o-i),r=new Array(a),s=0;s<a;s++)r[s]="String"==n?this.charAt(i+s):this[i+s];return r}})},{"./_cof":19,"./_export":34,"./_fails":36,"./_html":45,"./_to-absolute-index":115,"./_to-length":119}],151:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(3);n(n.P+n.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":106}],152:[function(e,t,o){var n=e("./_export"),i=e("./_a-function"),a=e("./_to-object"),r=e("./_fails"),s=[].sort,l=[1,2,3];n(n.P+n.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!e("./_strict-method")(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),i(e))}})},{"./_a-function":3,"./_export":34,"./_fails":36,"./_strict-method":106,"./_to-object":120}],153:[function(e,t,o){e("./_set-species")("Array")},{"./_set-species":101}],154:[function(e,t,o){e=e("./_export");e(e.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":34}],155:[function(e,t,o){var n=e("./_export"),e=e("./_date-to-iso-string");n(n.P+n.F*(Date.prototype.toISOString!==e),"Date",{toISOString:e})},{"./_date-to-iso-string":27,"./_export":34}],156:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive");n(n.P+n.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),o=a(t);return"number"!=typeof o||isFinite(o)?t.toISOString():null}})},{"./_export":34,"./_fails":36,"./_to-object":120,"./_to-primitive":121}],157:[function(e,t,o){var n=e("./_wks")("toPrimitive"),i=Date.prototype;n in i||e("./_hide")(i,n,e("./_date-to-primitive"))},{"./_date-to-primitive":28,"./_hide":44,"./_wks":130}],158:[function(e,t,o){var n=Date.prototype,i="Invalid Date",a=n.toString,r=n.getTime;new Date(NaN)+""!=i&&e("./_redefine")(n,"toString",function(){var e=r.call(this);return e==e?a.call(this):i})},{"./_redefine":93}],159:[function(e,t,o){var n=e("./_export");n(n.P,"Function",{bind:e("./_bind")})},{"./_bind":17,"./_export":34}],160:[function(e,t,o){var n=e("./_is-object"),i=e("./_object-gpo"),a=e("./_wks")("hasInstance"),r=Function.prototype;a in r||e("./_object-dp").f(r,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":53,"./_object-dp":73,"./_object-gpo":80,"./_wks":130}],161:[function(e,t,o){var n=e("./_object-dp").f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||e("./_descriptors")&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},{"./_descriptors":30,"./_object-dp":73}],162:[function(e,t,o){var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){e=n.getEntry(i(this,"Map"),e);return e&&e.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":23,"./_collection-strong":20,"./_validate-collection":127}],163:[function(e,t,o){var n=e("./_export"),i=e("./_math-log1p"),a=Math.sqrt,e=Math.acosh;n(n.S+n.F*!(e&&710==Math.floor(e(Number.MAX_VALUE))&&e(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},{"./_export":34,"./_math-log1p":64}],164:[function(e,t,o){var n=e("./_export"),e=Math.asinh;n(n.S+n.F*!(e&&0<1/e(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{"./_export":34}],165:[function(e,t,o){var n=e("./_export"),e=Math.atanh;n(n.S+n.F*!(e&&1/e(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":34}],166:[function(e,t,o){var n=e("./_export"),i=e("./_math-sign");n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":34,"./_math-sign":66}],167:[function(e,t,o){e=e("./_export");e(e.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":34}],168:[function(e,t,o){var e=e("./_export"),n=Math.exp;e(e.S,"Math",{cosh:function(e){return(n(e=+e)+n(-e))/2}})},{"./_export":34}],169:[function(e,t,o){var n=e("./_export"),e=e("./_math-expm1");n(n.S+n.F*(e!=Math.expm1),"Math",{expm1:e})},{"./_export":34,"./_math-expm1":62}],170:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{fround:e("./_math-fround")})},{"./_export":34,"./_math-fround":63}],171:[function(e,t,o){var e=e("./_export"),l=Math.abs;e(e.S,"Math",{hypot:function(e,t){for(var o,n,i=0,a=0,r=arguments.length,s=0;a<r;)s<(o=l(arguments[a++]))?(i=i*(n=s/o)*n+1,s=o):i+=0<o?(n=o/s)*n:o;return s===1/0?1/0:s*Math.sqrt(i)}})},{"./_export":34}],172:[function(e,t,o){var n=e("./_export"),i=Math.imul;n(n.S+n.F*e("./_fails")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var o=+e,n=+t,e=65535&o,t=65535&n;return 0|e*t+((65535&o>>>16)*t+e*(65535&n>>>16)<<16>>>0)}})},{"./_export":34,"./_fails":36}],173:[function(e,t,o){e=e("./_export");e(e.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":34}],174:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":34,"./_math-log1p":64}],175:[function(e,t,o){e=e("./_export");e(e.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":34}],176:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{sign:e("./_math-sign")})},{"./_export":34,"./_math-sign":66}],177:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1"),a=Math.exp;n(n.S+n.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},{"./_export":34,"./_fails":36,"./_math-expm1":62}],178:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1"),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),o=i(-e);return t==1/0?1:o==1/0?-1:(t-o)/(a(e)+a(-e))}})},{"./_export":34,"./_math-expm1":62}],179:[function(e,t,o){e=e("./_export");e(e.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},{"./_export":34}],180:[function(e,t,o){function n(e){var t=d(e,!1);if("string"==typeof t&&2<t.length){var o,n,i=(t=b?t.trim():m(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(e=t.charCodeAt(2))||120===e)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+t}for(var a,r=t.slice(2),s=0,l=r.length;s<l;s++)if((a=r.charCodeAt(s))<48||n<a)return NaN;return parseInt(r,o)}}return+t}var i=e("./_global"),a=e("./_has"),r=e("./_cof"),s=e("./_inherit-if-required"),d=e("./_to-primitive"),l=e("./_fails"),c=e("./_object-gopn").f,u=e("./_object-gopd").f,h=e("./_object-dp").f,m=e("./_string-trim").trim,f="Number",p=i[f],g=p,y=p.prototype,v=r(e("./_object-create")(y))==f,b="trim"in String.prototype;if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var e=arguments.length<1?0:e,t=this;return t instanceof p&&(v?l(function(){y.valueOf.call(t)}):r(t)!=f)?s(new g(n(e)),t,p):n(e)};for(var _,w=e("./_descriptors")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)a(g,_=w[k])&&!a(p,_)&&h(p,_,u(g,_));(p.prototype=y).constructor=p,e("./_redefine")(i,f,p)}},{"./_cof":19,"./_descriptors":30,"./_fails":36,"./_global":42,"./_has":43,"./_inherit-if-required":47,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_redefine":93,"./_string-trim":112,"./_to-primitive":121}],181:[function(e,t,o){e=e("./_export");e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":34}],182:[function(e,t,o){var n=e("./_export"),i=e("./_global").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},{"./_export":34,"./_global":42}],183:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":34,"./_is-integer":52}],184:[function(e,t,o){e=e("./_export");e(e.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":34}],185:[function(e,t,o){var n=e("./_export"),i=e("./_is-integer"),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},{"./_export":34,"./_is-integer":52}],186:[function(e,t,o){e=e("./_export");e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":34}],187:[function(e,t,o){e=e("./_export");e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":34}],188:[function(e,t,o){var n=e("./_export"),e=e("./_parse-float");n(n.S+n.F*(Number.parseFloat!=e),"Number",{parseFloat:e})},{"./_export":34,"./_parse-float":87}],189:[function(e,t,o){var n=e("./_export"),e=e("./_parse-int");n(n.S+n.F*(Number.parseInt!=e),"Number",{parseInt:e})},{"./_export":34,"./_parse-int":88}],190:[function(e,t,o){function r(e,t){for(var o=-1,n=t;++o<6;)n+=e*h[o],h[o]=n%1e7,n=a(n/1e7)}function s(e){for(var t=6,o=0;0<=--t;)o+=h[t],h[t]=a(o/e),o=o%e*1e7}function l(){for(var e,t=6,o="";0<=--t;)""===o&&0!==t&&0===h[t]||(e=String(h[t]),o=""===o?e:o+u.call("0",7-e.length)+e);return o}var n=e("./_export"),d=e("./_to-integer"),c=e("./_a-number-value"),u=e("./_string-repeat"),i=1..toFixed,a=Math.floor,h=[0,0,0,0,0,0],m="Number.toFixed: incorrect invocation!",f=function(e,t,o){return 0===t?o:t%2==1?f(e,t-1,o*e):f(e*e,t/2,o)};n(n.P+n.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!e("./_fails")(function(){i.call({})})),"Number",{toFixed:function(e){var t,o,n=c(this,m),i=d(e),a="",e="0";if(i<0||20<i)throw RangeError(m);if(n!=n)return"NaN";if(n<=-1e21||1e21<=n)return String(n);if(n<0&&(a="-",n=-n),1e-21<n)if(n=(o=function(e){for(var t=0,o=e;4096<=o;)t+=12,o/=4096;for(;2<=o;)t+=1,o/=2;return t}(n*f(2,69,1))-69)<0?n*f(2,-o,1):n/f(2,o,1),n*=4503599627370496,0<(o=52-o)){for(r(0,n),t=i;7<=t;)r(1e7,0),t-=7;for(r(f(10,t,1),0),t=o-1;23<=t;)s(1<<23),t-=23;s(1<<t),r(1,1),s(2),e=l()}else r(0,n),r(1<<-o,0),e=l()+u.call("0",i);return e=0<i?a+((o=e.length)<=i?"0."+u.call("0",i-o)+e:e.slice(0,o-i)+"."+e.slice(o-i)):a+e}})},{"./_a-number-value":4,"./_export":34,"./_fails":36,"./_string-repeat":111,"./_to-integer":117}],191:[function(e,t,o){var n=e("./_export"),i=e("./_fails"),a=e("./_a-number-value"),r=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==r.call(1,void 0)})||!i(function(){r.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?r.call(t):r.call(t,e)}})},{"./_a-number-value":4,"./_export":34,"./_fails":36}],192:[function(e,t,o){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":34,"./_object-assign":71}],193:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":34,"./_object-create":72}],194:[function(e,t,o){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":30,"./_export":34,"./_object-dps":74}],195:[function(e,t,o){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":30,"./_export":34,"./_object-dp":73}],196:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],197:[function(e,t,o){var n=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},{"./_object-gopd":76,"./_object-sap":84,"./_to-iobject":118}],198:[function(e,t,o){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":77,"./_object-sap":84}],199:[function(e,t,o){var n=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(n(e))}})},{"./_object-gpo":80,"./_object-sap":84,"./_to-object":120}],200:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},{"./_is-object":53,"./_object-sap":84}],201:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":53,"./_object-sap":84}],202:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":53,"./_object-sap":84}],203:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{is:e("./_same-value")})},{"./_export":34,"./_same-value":97}],204:[function(e,t,o){var n=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(n(e))}})},{"./_object-keys":82,"./_object-sap":84,"./_to-object":120}],205:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],206:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("seal",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],207:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":34,"./_set-proto":100}],208:[function(e,t,o){var n=e("./_classof"),i={};i[e("./_wks")("toStringTag")]="z",i+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":18,"./_redefine":93,"./_wks":130}],209:[function(e,t,o){var n=e("./_export"),e=e("./_parse-float");n(n.G+n.F*(parseFloat!=e),{parseFloat:e})},{"./_export":34,"./_parse-float":87}],210:[function(e,t,o){var n=e("./_export"),e=e("./_parse-int");n(n.G+n.F*(parseInt!=e),{parseInt:e})},{"./_export":34,"./_parse-int":88}],211:[function(o,e,t){function n(){}function u(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t}function i(c,t){var o;c._n||(c._n=!0,o=c._c,k(function(){for(var l=c._v,d=1==c._s,e=0;o.length>e;)!function(e){var t,o,n,i=d?e.ok:e.fail,a=e.resolve,r=e.reject,s=e.domain;try{i?(d||(2==c._h&&N(c),c._h=1),!0===i?t=l:(s&&s.enter(),t=i(l),s&&(s.exit(),n=!0)),t===e.promise?r(T("Promise-chain cycle")):(o=u(t))?o.call(t,a,r):a(t)):r(l)}catch(e){s&&!n&&s.exit(),r(e)}}(o[e++]);c._c=[],c._n=!1,t&&!c._h&&R(c)}))}function a(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),i(t,!0))}var r,s,l,d,c=o("./_library"),h=o("./_global"),m=o("./_ctx"),f=o("./_classof"),p=o("./_export"),g=o("./_is-object"),y=o("./_a-function"),v=o("./_an-instance"),b=o("./_for-of"),_=o("./_species-constructor"),w=o("./_task").set,k=o("./_microtask")(),S=o("./_new-promise-capability"),P=o("./_perform"),I=o("./_user-agent"),x=o("./_promise-resolve"),C="Promise",T=h.TypeError,D=h.process,E=D&&D.versions,L=E&&E.v8||"",A=h[C],M="process"==f(D),W=s=S.f,f=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[o("./_wks")("species")]=function(e){e(n,n)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(n)instanceof t&&0!==L.indexOf("6.6")&&-1===I.indexOf("Chrome/66")}catch(e){}}(),R=function(i){w.call(h,function(){var e,t,o=i._v,n=j(i);if(n&&(e=P(function(){M?D.emit("unhandledRejection",o,i):(t=h.onunhandledrejection)?t({promise:i,reason:o}):(t=h.console)&&t.error&&t.error("Unhandled promise rejection",o)}),i._h=M||j(i)?2:1),i._a=void 0,n&&e.e)throw e.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(t){w.call(h,function(){var e;M?D.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(e){var o,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw T("Promise can't be resolved itself");(o=u(e))?k(function(){var t={_w:n,_d:!1};try{o.call(e,m(O,t,1),m(a,t,1))}catch(e){a.call(t,e)}}):(n._v=e,n._s=1,i(n,!1))}catch(e){a.call({_w:n,_d:!1},e)}}};f||(A=function(e){v(this,A,C,"_h"),y(e),r.call(this);try{e(m(O,this,1),m(a,this,1))}catch(e){a.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=o("./_redefine-all")(A.prototype,{then:function(e,t){var o=W(_(this,A));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=M?D.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&i(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),l=function(){var e=new r;this.promise=e,this.resolve=m(O,e,1),this.reject=m(a,e,1)},S.f=W=function(e){return e===A||e===d?new l:s(e)}),p(p.G+p.W+p.F*!f,{Promise:A}),o("./_set-to-string-tag")(A,C),o("./_set-species")(C),d=o("./_core")[C],p(p.S+p.F*!f,C,{reject:function(e){var t=W(this);return(0,t.reject)(e),t.promise}}),p(p.S+p.F*(c||!f),C,{resolve:function(e){return x(c&&this===d?A:this,e)}}),p(p.S+p.F*!(f&&o("./_iter-detect")(function(e){A.all(e).catch(n)})),C,{all:function(e){var r=this,t=W(r),s=t.resolve,l=t.reject,o=P(function(){var n=[],i=0,a=1;b(e,!1,function(e){var t=i++,o=!1;n.push(void 0),a++,r.resolve(e).then(function(e){o||(o=!0,n[t]=e,--a||s(n))},l)}),--a||s(n)});return o.e&&l(o.v),t.promise},race:function(e){var t=this,o=W(t),n=o.reject,i=P(function(){b(e,!1,function(e){t.resolve(e).then(o.resolve,n)})});return i.e&&n(i.v),o.promise}})},{"./_a-function":3,"./_an-instance":7,"./_classof":18,"./_core":24,"./_ctx":26,"./_export":34,"./_for-of":40,"./_global":42,"./_is-object":53,"./_iter-detect":58,"./_library":61,"./_microtask":69,"./_new-promise-capability":70,"./_perform":89,"./_promise-resolve":90,"./_redefine-all":92,"./_set-species":101,"./_set-to-string-tag":102,"./_species-constructor":105,"./_task":114,"./_user-agent":126,"./_wks":130}],212:[function(e,t,o){var n=e("./_export"),i=e("./_a-function"),a=e("./_an-object"),r=(e("./_global").Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!e("./_fails")(function(){r(function(){})}),"Reflect",{apply:function(e,t,o){e=i(e),o=a(o);return r?r(e,t,o):s.call(e,t,o)}})},{"./_a-function":3,"./_an-object":8,"./_export":34,"./_fails":36,"./_global":42}],213:[function(e,t,o){var n=e("./_export"),i=e("./_object-create"),a=e("./_a-function"),r=e("./_an-object"),s=e("./_is-object"),l=e("./_fails"),d=e("./_bind"),c=(e("./_global").Reflect||{}).construct,u=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!l(function(){c(function(){})});n(n.S+n.F*(u||h),"Reflect",{construct:function(e,t){a(e),r(t);var o=arguments.length<3?e:a(arguments[2]);if(h&&!u)return c(e,t,o);if(e==o){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(d.apply(e,n))}n=o.prototype,o=i(s(n)?n:Object.prototype),n=Function.apply.call(e,o,t);return s(n)?n:o}})},{"./_a-function":3,"./_an-object":8,"./_bind":17,"./_export":34,"./_fails":36,"./_global":42,"./_is-object":53,"./_object-create":72}],214:[function(e,t,o){var n=e("./_object-dp"),i=e("./_export"),a=e("./_an-object"),r=e("./_to-primitive");i(i.S+i.F*e("./_fails")(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,o){a(e),t=r(t,!0),a(o);try{return n.f(e,t,o),!0}catch(e){return!1}}})},{"./_an-object":8,"./_export":34,"./_fails":36,"./_object-dp":73,"./_to-primitive":121}],215:[function(e,t,o){var n=e("./_export"),i=e("./_object-gopd").f,a=e("./_an-object");n(n.S,"Reflect",{deleteProperty:function(e,t){var o=i(a(e),t);return!(o&&!o.configurable)&&delete e[t]}})},{"./_an-object":8,"./_export":34,"./_object-gopd":76}],216:[function(e,t,o){function n(e){this._t=a(e),this._i=0;var t,o=this._k=[];for(t in e)o.push(t)}var i=e("./_export"),a=e("./_an-object");e("./_iter-create")(n,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new n(e)}})},{"./_an-object":8,"./_export":34,"./_iter-create":56}],217:[function(e,t,o){var n=e("./_object-gopd"),i=e("./_export"),a=e("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},{"./_an-object":8,"./_export":34,"./_object-gopd":76}],218:[function(e,t,o){var n=e("./_export"),i=e("./_object-gpo"),a=e("./_an-object");n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},{"./_an-object":8,"./_export":34,"./_object-gpo":80}],219:[function(e,t,o){var a=e("./_object-gopd"),r=e("./_object-gpo"),s=e("./_has"),n=e("./_export"),l=e("./_is-object"),d=e("./_an-object");n(n.S,"Reflect",{get:function e(t,o){var n,i=arguments.length<3?t:arguments[2];return d(t)===i?t[o]:(n=a.f(t,o))?s(n,"value")?n.value:void 0!==n.get?n.get.call(i):void 0:l(t=r(t))?e(t,o,i):void 0}})},{"./_an-object":8,"./_export":34,"./_has":43,"./_is-object":53,"./_object-gopd":76,"./_object-gpo":80}],220:[function(e,t,o){e=e("./_export");e(e.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":34}],221:[function(e,t,o){var n=e("./_export"),i=e("./_an-object"),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},{"./_an-object":8,"./_export":34}],222:[function(e,t,o){var n=e("./_export");n(n.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":34,"./_own-keys":86}],223:[function(e,t,o){var n=e("./_export"),i=e("./_an-object"),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},{"./_an-object":8,"./_export":34}],224:[function(e,t,o){var n=e("./_export"),i=e("./_set-proto");i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},{"./_export":34,"./_set-proto":100}],225:[function(e,t,o){var s=e("./_object-dp"),l=e("./_object-gopd"),d=e("./_object-gpo"),c=e("./_has"),n=e("./_export"),u=e("./_property-desc"),h=e("./_an-object"),m=e("./_is-object");n(n.S,"Reflect",{set:function e(t,o,n){var i,a=arguments.length<4?t:arguments[3],r=l.f(h(t),o);if(!r){if(m(i=d(t)))return e(i,o,n,a);r=u(0)}if(c(r,"value")){if(!1===r.writable||!m(a))return!1;if(i=l.f(a,o)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,s.f(a,o,i)}else s.f(a,o,u(0,n));return!0}return void 0!==r.set&&(r.set.call(a,n),!0)}})},{"./_an-object":8,"./_export":34,"./_has":43,"./_is-object":53,"./_object-dp":73,"./_object-gopd":76,"./_object-gpo":80,"./_property-desc":91}],226:[function(e,t,o){var n=e("./_global"),a=e("./_inherit-if-required"),i=e("./_object-dp").f,r=e("./_object-gopn").f,s=e("./_is-regexp"),l=e("./_flags"),d=n.RegExp,c=d,u=d.prototype,h=/a/g,m=/a/g,f=new d(h)!==h;if(e("./_descriptors")&&(!f||e("./_fails")(function(){return m[e("./_wks")("match")]=!1,d(h)!=h||d(m)==m||"/a/i"!=d(h,"i")}))){d=function(e,t){var o=this instanceof d,n=s(e),i=void 0===t;return!o&&n&&e.constructor===d&&i?e:a(f?new c(n&&!i?e.source:e,t):c((n=e instanceof d)?e.source:e,n&&i?l.call(e):t),o?this:u,d)};for(var p=r(c),g=0;p.length>g;)!function(t){t in d||i(d,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})}(p[g++]);(u.constructor=d).prototype=u,e("./_redefine")(n,"RegExp",d)}e("./_set-species")("RegExp")},{"./_descriptors":30,"./_fails":36,"./_flags":38,"./_global":42,"./_inherit-if-required":47,"./_is-regexp":54,"./_object-dp":73,"./_object-gopn":78,"./_redefine":93,"./_set-species":101,"./_wks":130}],227:[function(e,t,o){var n=e("./_regexp-exec");e("./_export")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},{"./_export":34,"./_regexp-exec":95}],228:[function(e,t,o){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":30,"./_flags":38,"./_object-dp":73}],229:[function(e,t,o){var c=e("./_an-object"),u=e("./_to-length"),h=e("./_advance-string-index"),m=e("./_regexp-exec-abstract");e("./_fix-re-wks")("match",1,function(n,i,l,d){return[function(e){var t=n(this),o=null==e?void 0:e[i];return void 0!==o?o.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=d(l,e,this);if(t.done)return t.value;var o=c(e),n=String(this);if(!o.global)return m(o,n);for(var i=o.unicode,a=[],r=o.lastIndex=0;null!==(s=m(o,n));){var s=String(s[0]);""===(a[r]=s)&&(o.lastIndex=h(n,u(o.lastIndex),i)),r++}return 0===r?null:a}]})},{"./_advance-string-index":6,"./_an-object":8,"./_fix-re-wks":37,"./_regexp-exec-abstract":94,"./_to-length":119}],230:[function(e,t,o){var k=e("./_an-object"),S=e("./_to-object"),P=e("./_to-length"),I=e("./_to-integer"),x=e("./_advance-string-index"),C=e("./_regexp-exec-abstract"),T=Math.max,D=Math.min,E=Math.floor,L=/\$([$&`']|\d\d?|<[^>]*>)/g,A=/\$([$&`']|\d\d?)/g;e("./_fix-re-wks")("replace",2,function(i,a,_,w){return[function(e,t){var o=i(this),n=null==e?void 0:e[a];return void 0!==n?n.call(e,o,t):_.call(String(o),e,t)},function(e,t){var o=w(_,e,this,t);if(o.done)return o.value;var n=k(e),i=String(this),a="function"==typeof t;a||(t=String(t));var r,s=n.global;s&&(r=n.unicode,n.lastIndex=0);for(var l=[];;){var d=C(n,i);if(null===d)break;if(l.push(d),!s)break;""===String(d[0])&&(n.lastIndex=x(i,P(n.lastIndex),r))}for(var c,u="",h=0,m=0;m<l.length;m++){d=l[m];for(var f=String(d[0]),p=T(D(I(d.index),i.length),0),g=[],y=1;y<d.length;y++)g.push(void 0===(c=d[y])?c:String(c));var v,b=d.groups,b=a?(v=[f].concat(g,p,i),void 0!==b&&v.push(b),String(t.apply(void 0,v))):function(a,r,s,l,d,e){var c=s+a.length,u=l.length,t=A;void 0!==d&&(d=S(d),t=L);return _.call(e,t,function(e,t){var o;switch(t.charAt(0)){case"$":return"$";case"&":return a;case"`":return r.slice(0,s);case"'":return r.slice(c);case"<":o=d[t.slice(1,-1)];break;default:var n=+t;if(0==n)return e;if(u<n){var i=E(n/10);return 0===i?e:i<=u?void 0===l[i-1]?t.charAt(1):l[i-1]+t.charAt(1):e}o=l[n-1]}return void 0===o?"":o})}(f,i,p,g,b,t);h<=p&&(u+=i.slice(h,p)+b,h=p+f.length)}return u+i.slice(h)}]})},{"./_advance-string-index":6,"./_an-object":8,"./_fix-re-wks":37,"./_regexp-exec-abstract":94,"./_to-integer":117,"./_to-length":119,"./_to-object":120}],231:[function(e,t,o){var s=e("./_an-object"),l=e("./_same-value"),d=e("./_regexp-exec-abstract");e("./_fix-re-wks")("search",1,function(n,i,a,r){return[function(e){var t=n(this),o=null==e?void 0:e[i];return void 0!==o?o.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=r(a,e,this);if(t.done)return t.value;var o=s(e),t=String(this),e=o.lastIndex;l(e,0)||(o.lastIndex=0);t=d(o,t);return l(o.lastIndex,e)||(o.lastIndex=e),null===t?-1:t.index}]})},{"./_an-object":8,"./_fix-re-wks":37,"./_regexp-exec-abstract":94,"./_same-value":97}],232:[function(e,t,o){var u=e("./_is-regexp"),y=e("./_an-object"),v=e("./_species-constructor"),b=e("./_advance-string-index"),_=e("./_to-length"),w=e("./_regexp-exec-abstract"),h=e("./_regexp-exec"),n=e("./_fails"),k=Math.min,m=[].push,r="split",S="length",P="lastIndex",I=4294967295,x=!n(function(){RegExp(I,"y")});e("./_fix-re-wks")("split",2,function(i,a,f,p){var g="c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[S]||2!="ab"[r](/(?:ab)*/)[S]||4!="."[r](/(.?)(.?)/)[S]||1<"."[r](/()()/)[S]||""[r](/.?/)[S]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!u(e))return f.call(o,e,t);for(var n,i,a,r=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=void 0===t?I:t>>>0,c=new RegExp(e.source,s+"g");(n=h.call(c,o))&&!(l<(i=c[P])&&(r.push(o.slice(l,n.index)),1<n[S]&&n.index<o[S]&&m.apply(r,n.slice(1)),a=n[0][S],l=i,r[S]>=d));)c[P]===n.index&&c[P]++;return l===o[S]?!a&&c.test("")||r.push(""):r.push(o.slice(l)),r[S]>d?r.slice(0,d):r}:"0"[r](void 0,0)[S]?function(e,t){return void 0===e&&0===t?[]:f.call(this,e,t)}:f;return[function(e,t){var o=i(this),n=null==e?void 0:e[a];return void 0!==n?n.call(e,o,t):g.call(String(o),e,t)},function(e,t){var o=p(g,e,this,t,g!==f);if(o.done)return o.value;var n=y(e),i=String(this),o=v(n,RegExp),a=n.unicode,e=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(x?"y":"g"),r=new o(x?n:"^(?:"+n.source+")",e),s=void 0===t?I:t>>>0;if(0==s)return[];if(0===i.length)return null===w(r,i)?[i]:[];for(var l=0,d=0,c=[];d<i.length;){r.lastIndex=x?d:0;var u,h=w(r,x?i:i.slice(d));if(null===h||(u=k(_(r.lastIndex+(x?0:d)),i.length))===l)d=b(i,d,a);else{if(c.push(i.slice(l,d)),c.length===s)return c;for(var m=1;m<=h.length-1;m++)if(c.push(h[m]),c.length===s)return c;d=l=u}}return c.push(i.slice(l)),c}]})},{"./_advance-string-index":6,"./_an-object":8,"./_fails":36,"./_fix-re-wks":37,"./_is-regexp":54,"./_regexp-exec":95,"./_regexp-exec-abstract":94,"./_species-constructor":105,"./_to-length":119}],233:[function(t,e,o){t("./es6.regexp.flags");function n(e){t("./_redefine")(RegExp.prototype,s,e,!0)}var i=t("./_an-object"),a=t("./_flags"),r=t("./_descriptors"),s="toString",l=/./[s];t("./_fails")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?n(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?a.call(e):void 0)}):l.name!=s&&n(function(){return l.call(this)})},{"./_an-object":8,"./_descriptors":30,"./_fails":36,"./_flags":38,"./_redefine":93,"./es6.regexp.flags":228}],234:[function(e,t,o){var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":23,"./_collection-strong":20,"./_validate-collection":127}],235:[function(e,t,o){e("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":109}],236:[function(e,t,o){e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":109}],237:[function(e,t,o){e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":109}],238:[function(e,t,o){e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":109}],239:[function(e,t,o){var n=e("./_export"),i=e("./_string-at")(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},{"./_export":34,"./_string-at":107}],240:[function(e,t,o){var n=e("./_export"),i=e("./_to-length"),a=e("./_string-context"),r="endsWith",s=""[r];n(n.P+n.F*e("./_fails-is-regexp")(r),"String",{endsWith:function(e){var t=a(this,e,r),o=1<arguments.length?arguments[1]:void 0,n=i(t.length),n=void 0===o?n:Math.min(i(o),n),e=String(e);return s?s.call(t,e,n):t.slice(n-e.length,n)===e}})},{"./_export":34,"./_fails-is-regexp":35,"./_string-context":108,"./_to-length":119}],241:[function(e,t,o){e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":109}],242:[function(e,t,o){e("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":109}],243:[function(e,t,o){e("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":109}],244:[function(e,t,o){var n=e("./_export"),a=e("./_to-absolute-index"),r=String.fromCharCode,e=String.fromCodePoint;n(n.S+n.F*(!!e&&1!=e.length),"String",{fromCodePoint:function(e){for(var t,o=[],n=arguments.length,i=0;i<n;){if(t=+arguments[i++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");o.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return o.join("")}})},{"./_export":34,"./_to-absolute-index":115}],245:[function(e,t,o){var n=e("./_export"),i=e("./_string-context");n(n.P+n.F*e("./_fails-is-regexp")("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},{"./_export":34,"./_fails-is-regexp":35,"./_string-context":108}],246:[function(e,t,o){e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":109}],247:[function(e,t,o){var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i;return t>=e.length?{value:void 0,done:!0}:(t=n(e,t),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":57,"./_string-at":107}],248:[function(e,t,o){e("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":109}],249:[function(e,t,o){var n=e("./_export"),r=e("./_to-iobject"),s=e("./_to-length");n(n.S,"String",{raw:function(e){for(var t=r(e.raw),o=s(t.length),n=arguments.length,i=[],a=0;a<o;)i.push(String(t[a++])),a<n&&i.push(String(arguments[a]));return i.join("")}})},{"./_export":34,"./_to-iobject":118,"./_to-length":119}],250:[function(e,t,o){var n=e("./_export");n(n.P,"String",{repeat:e("./_string-repeat")})},{"./_export":34,"./_string-repeat":111}],251:[function(e,t,o){e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":109}],252:[function(e,t,o){var n=e("./_export"),i=e("./_to-length"),a=e("./_string-context"),r="startsWith",s=""[r];n(n.P+n.F*e("./_fails-is-regexp")(r),"String",{startsWith:function(e){var t=a(this,e,r),o=i(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),e=String(e);return s?s.call(t,e,o):t.slice(o,o+e.length)===e}})},{"./_export":34,"./_fails-is-regexp":35,"./_string-context":108,"./_to-length":119}],253:[function(e,t,o){e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":109}],254:[function(e,t,o){e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":109}],255:[function(e,t,o){e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":109}],256:[function(e,t,o){e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":112}],257:[function(e,t,o){function n(e){var t=J[e]=T(N[F]);return t._k=e,t}function i(e,t){k(e);for(var o,n=_(t=I(t)),i=0,a=n.length;i<a;)Q(e,o=n[i++],t[o]);return e}function a(e){var t=U.call(this,e=x(e,!0));return!(this===q&&l(J,e)&&!l(K,e))&&(!(t||!l(this,e)||!l(J,e)||l(this,B)&&this[B][e])||t)}function r(e,t){if(e=I(e),t=x(t,!0),e!==q||!l(J,t)||l(K,t)){var o=W(e,t);return!o||!l(J,t)||l(e,B)&&e[B][t]||(o.enumerable=!0),o}}var s=e("./_global"),l=e("./_has"),d=e("./_descriptors"),c=e("./_export"),u=e("./_redefine"),h=e("./_meta").KEY,m=e("./_fails"),f=e("./_shared"),p=e("./_set-to-string-tag"),g=e("./_uid"),y=e("./_wks"),v=e("./_wks-ext"),b=e("./_wks-define"),_=e("./_enum-keys"),w=e("./_is-array"),k=e("./_an-object"),S=e("./_is-object"),P=e("./_to-object"),I=e("./_to-iobject"),x=e("./_to-primitive"),C=e("./_property-desc"),T=e("./_object-create"),D=e("./_object-gopn-ext"),E=e("./_object-gopd"),L=e("./_object-gops"),A=e("./_object-dp"),M=e("./_object-keys"),W=E.f,R=A.f,j=D.f,N=s.Symbol,O=s.JSON,V=O&&O.stringify,F="prototype",B=y("_hidden"),z=y("toPrimitive"),U={}.propertyIsEnumerable,H=f("symbol-registry"),J=f("symbols"),K=f("op-symbols"),q=Object[F],G="function"==typeof N&&!!L.f,Y=s.QObject,X=!Y||!Y[F]||!Y[F].findChild,Z=d&&m(function(){return 7!=T(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,o){var n=W(q,t);n&&delete q[t],R(e,t,o),n&&e!==q&&R(q,t,n)}:R,$=G&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},Q=function(e,t,o){return e===q&&Q(K,t,o),k(e),t=x(t,!0),k(o),l(J,t)?(o.enumerable?(l(e,B)&&e[B][t]&&(e[B][t]=!1),o=T(o,{enumerable:C(0,!1)})):(l(e,B)||R(e,B,C(1,{})),e[B][t]=!0),Z(e,t,o)):R(e,t,o)},f=function(e){for(var t,o=j(I(e)),n=[],i=0;o.length>i;)l(J,t=o[i++])||t==B||t==h||n.push(t);return n},Y=function(e){for(var t,o=e===q,n=j(o?K:I(e)),i=[],a=0;n.length>a;)!l(J,t=n[a++])||o&&!l(q,t)||i.push(J[t]);return i};G||(u((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=g(0<arguments.length?arguments[0]:void 0),o=function(e){this===q&&o.call(K,e),l(this,B)&&l(this[B],t)&&(this[B][t]=!1),Z(this,t,C(1,e))};return d&&X&&Z(q,t,{configurable:!0,set:o}),n(t)})[F],"toString",function(){return this._k}),E.f=r,A.f=Q,e("./_object-gopn").f=D.f=f,e("./_object-pie").f=a,L.f=Y,d&&!e("./_library")&&u(q,"propertyIsEnumerable",a,!0),v.f=function(e){return n(y(e))}),c(c.G+c.W+c.F*!G,{Symbol:N});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)y(ee[te++]);for(var oe=M(y.store),ne=0;oe.length>ne;)b(oe[ne++]);c(c.S+c.F*!G,"Symbol",{for:function(e){return l(H,e+="")?H[e]:H[e]=N(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in H)if(H[t]===e)return t},useSetter:function(){X=!0},useSimple:function(){X=!1}}),c(c.S+c.F*!G,"Object",{create:function(e,t){return void 0===t?T(e):i(T(e),t)},defineProperty:Q,defineProperties:i,getOwnPropertyDescriptor:r,getOwnPropertyNames:f,getOwnPropertySymbols:Y});Y=m(function(){L.f(1)});c(c.S+c.F*Y,"Object",{getOwnPropertySymbols:function(e){return L.f(P(e))}}),O&&c(c.S+c.F*(!G||m(function(){var e=N();return"[null]"!=V([e])||"{}"!=V({a:e})||"{}"!=V(Object(e))})),"JSON",{stringify:function(e){for(var t,o,n=[e],i=1;i<arguments.length;)n.push(arguments[i++]);if(o=t=n[1],(S(t)||void 0!==e)&&!$(e))return w(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!$(t))return t}),n[1]=t,V.apply(O,n)}}),N[F][z]||e("./_hide")(N[F],z,N[F].valueOf),p(N,"Symbol"),p(Math,"Math",!0),p(s.JSON,"JSON",!0)},{"./_an-object":8,"./_descriptors":30,"./_enum-keys":33,"./_export":34,"./_fails":36,"./_global":42,"./_has":43,"./_hide":44,"./_is-array":51,"./_is-object":53,"./_library":61,"./_meta":67,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_object-gopn-ext":77,"./_object-gops":79,"./_object-keys":82,"./_object-pie":83,"./_property-desc":91,"./_redefine":93,"./_set-to-string-tag":102,"./_shared":104,"./_to-iobject":118,"./_to-object":120,"./_to-primitive":121,"./_uid":125,"./_wks":130,"./_wks-define":128,"./_wks-ext":129}],258:[function(e,t,o){var n=e("./_export"),i=e("./_typed"),a=e("./_typed-buffer"),l=e("./_an-object"),d=e("./_to-absolute-index"),c=e("./_to-length"),r=e("./_is-object"),s=e("./_global").ArrayBuffer,u=e("./_species-constructor"),h=a.ArrayBuffer,m=a.DataView,f=i.ABV&&s.isView,p=h.prototype.slice,g=i.VIEW,a="ArrayBuffer";n(n.G+n.W+n.F*(s!==h),{ArrayBuffer:h}),n(n.S+n.F*!i.CONSTR,a,{isView:function(e){return f&&f(e)||r(e)&&g in e}}),n(n.P+n.U+n.F*e("./_fails")(function(){return!new h(2).slice(1,void 0).byteLength}),a,{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(l(this),e);for(var o=l(this).byteLength,n=d(e,o),i=d(void 0===t?o:t,o),o=new(u(this,h))(c(i-n)),a=new m(this),r=new m(o),s=0;n<i;)r.setUint8(s++,a.getUint8(n++));return o}}),e("./_set-species")(a)},{"./_an-object":8,"./_export":34,"./_fails":36,"./_global":42,"./_is-object":53,"./_set-species":101,"./_species-constructor":105,"./_to-absolute-index":115,"./_to-length":119,"./_typed":124,"./_typed-buffer":123}],259:[function(e,t,o){var n=e("./_export");n(n.G+n.W+n.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":34,"./_typed":124,"./_typed-buffer":123}],260:[function(e,t,o){e("./_typed-array")("Float32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],261:[function(e,t,o){e("./_typed-array")("Float64",8,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],262:[function(e,t,o){e("./_typed-array")("Int16",2,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],263:[function(e,t,o){e("./_typed-array")("Int32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],264:[function(e,t,o){e("./_typed-array")("Int8",1,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],265:[function(e,t,o){e("./_typed-array")("Uint16",2,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],266:[function(e,t,o){e("./_typed-array")("Uint32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],267:[function(e,t,o){e("./_typed-array")("Uint8",1,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],268:[function(e,t,o){e("./_typed-array")("Uint8",1,function(n){return function(e,t,o){return n(this,e,t,o)}},!0)},{"./_typed-array":122}],269:[function(e,t,o){function n(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}var i,a=e("./_global"),r=e("./_array-methods")(0),s=e("./_redefine"),l=e("./_meta"),d=e("./_object-assign"),c=e("./_collection-weak"),u=e("./_is-object"),h=e("./_validate-collection"),m=e("./_validate-collection"),f=!a.ActiveXObject&&"ActiveXObject"in a,p="WeakMap",g=l.getWeak,y=Object.isExtensible,v=c.ufstore,a={get:function(e){if(u(e)){var t=g(e);return!0===t?v(h(this,p)).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(h(this,p),e,t)}},b=t.exports=e("./_collection")(p,n,a,c,!0,!0);m&&f&&(d((i=c.getConstructor(n,p)).prototype,a),l.NEED=!0,r(["delete","has","get","set"],function(o){var e=b.prototype,n=e[o];s(e,o,function(e,t){if(!u(e)||y(e))return n.call(this,e,t);this._f||(this._f=new i);t=this._f[o](e,t);return"set"==o?this:t})}))},{"./_array-methods":13,"./_collection":23,"./_collection-weak":22,"./_global":42,"./_is-object":53,"./_meta":67,"./_object-assign":71,"./_redefine":93,"./_validate-collection":127}],270:[function(e,t,o){var n=e("./_collection-weak"),i=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},{"./_collection":23,"./_collection-weak":22,"./_validate-collection":127}],271:[function(e,t,o){var n=e("./_export"),i=e("./_flatten-into-array"),a=e("./_to-object"),r=e("./_to-length"),s=e("./_a-function"),l=e("./_array-species-create");n(n.P,"Array",{flatMap:function(e){var t,o,n=a(this);return s(e),t=r(n.length),o=l(n,0),i(o,n,n,t,0,1,e,arguments[1]),o}}),e("./_add-to-unscopables")("flatMap")},{"./_a-function":3,"./_add-to-unscopables":5,"./_array-species-create":16,"./_export":34,"./_flatten-into-array":39,"./_to-length":119,"./_to-object":120}],272:[function(e,t,o){var n=e("./_export"),i=e("./_flatten-into-array"),a=e("./_to-object"),r=e("./_to-length"),s=e("./_to-integer"),l=e("./_array-species-create");n(n.P,"Array",{flatten:function(){var e=arguments[0],t=a(this),o=r(t.length),n=l(t,0);return i(n,t,t,o,0,void 0===e?1:s(e)),n}}),e("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":5,"./_array-species-create":16,"./_export":34,"./_flatten-into-array":39,"./_to-integer":117,"./_to-length":119,"./_to-object":120}],273:[function(e,t,o){var n=e("./_export"),i=e("./_array-includes")(!0);n(n.P,"Array",{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":5,"./_array-includes":12,"./_export":34}],274:[function(e,t,o){var n=e("./_export"),i=e("./_microtask")(),a=e("./_global").process,r="process"==e("./_cof")(a);n(n.G,{asap:function(e){var t=r&&a.domain;i(t?t.bind(e):e)}})},{"./_cof":19,"./_export":34,"./_global":42,"./_microtask":69}],275:[function(e,t,o){var n=e("./_export"),i=e("./_cof");n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},{"./_cof":19,"./_export":34}],276:[function(e,t,o){var n=e("./_export");n(n.G,{global:e("./_global")})},{"./_export":34,"./_global":42}],277:[function(e,t,o){e("./_set-collection-from")("Map")},{"./_set-collection-from":98}],278:[function(e,t,o){e("./_set-collection-of")("Map")},{"./_set-collection-of":99}],279:[function(e,t,o){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":21,"./_export":34}],280:[function(e,t,o){e=e("./_export");e(e.S,"Math",{clamp:function(e,t,o){return Math.min(o,Math.max(t,e))}})},{"./_export":34}],281:[function(e,t,o){e=e("./_export");e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":34}],282:[function(e,t,o){var e=e("./_export"),n=180/Math.PI;e(e.S,"Math",{degrees:function(e){return e*n}})},{"./_export":34}],283:[function(e,t,o){var n=e("./_export"),a=e("./_math-scale"),r=e("./_math-fround");n(n.S,"Math",{fscale:function(e,t,o,n,i){return r(a(e,t,o,n,i))}})},{"./_export":34,"./_math-fround":63,"./_math-scale":65}],284:[function(e,t,o){e=e("./_export");e(e.S,"Math",{iaddh:function(e,t,o,n){e>>>=0,o>>>=0;return(t>>>0)+(n>>>0)+((e&o|(e|o)&~(e+o>>>0))>>>31)|0}})},{"./_export":34}],285:[function(e,t,o){e=e("./_export");e(e.S,"Math",{imulh:function(e,t){var o=+e,n=+t,e=65535&o,t=65535&n,o=o>>16,n=n>>16,t=(o*t>>>0)+(e*t>>>16);return o*n+(t>>16)+((e*n>>>0)+(65535&t)>>16)}})},{"./_export":34}],286:[function(e,t,o){e=e("./_export");e(e.S,"Math",{isubh:function(e,t,o,n){e>>>=0,o>>>=0;return(t>>>0)-(n>>>0)-((~e&o|~(e^o)&e-o>>>0)>>>31)|0}})},{"./_export":34}],287:[function(e,t,o){e=e("./_export");e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":34}],288:[function(e,t,o){var e=e("./_export"),n=Math.PI/180;e(e.S,"Math",{radians:function(e){return e*n}})},{"./_export":34}],289:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{scale:e("./_math-scale")})},{"./_export":34,"./_math-scale":65}],290:[function(e,t,o){e=e("./_export");e(e.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},{"./_export":34}],291:[function(e,t,o){e=e("./_export");e(e.S,"Math",{umulh:function(e,t){var o=+e,n=+t,e=65535&o,t=65535&n,o=o>>>16,n=n>>>16,t=(o*t>>>0)+(e*t>>>16);return o*n+(t>>>16)+((e*n>>>0)+(65535&t)>>>16)}})},{"./_export":34}],292:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){r.f(i(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":3,"./_descriptors":30,"./_export":34,"./_object-dp":73,"./_object-forced-pam":75,"./_to-object":120}],293:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){r.f(i(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":3,"./_descriptors":30,"./_export":34,"./_object-dp":73,"./_object-forced-pam":75,"./_to-object":120}],294:[function(e,t,o){var n=e("./_export"),i=e("./_object-to-array")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},{"./_export":34,"./_object-to-array":85}],295:[function(e,t,o){var n=e("./_export"),l=e("./_own-keys"),d=e("./_to-iobject"),c=e("./_object-gopd"),u=e("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,o,n=d(e),i=c.f,a=l(n),r={},s=0;a.length>s;)void 0!==(o=i(n,t=a[s++]))&&u(r,t,o);return r}})},{"./_create-property":25,"./_export":34,"./_object-gopd":76,"./_own-keys":86,"./_to-iobject":118}],296:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,o=i(this),n=a(e,!0);do{if(t=s(o,n))return t.get}while(o=r(o))}})},{"./_descriptors":30,"./_export":34,"./_object-forced-pam":75,"./_object-gopd":76,"./_object-gpo":80,"./_to-object":120,"./_to-primitive":121}],297:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,o=i(this),n=a(e,!0);do{if(t=s(o,n))return t.set}while(o=r(o))}})},{"./_descriptors":30,"./_export":34,"./_object-forced-pam":75,"./_object-gopd":76,"./_object-gpo":80,"./_to-object":120,"./_to-primitive":121}],298:[function(e,t,o){var n=e("./_export"),i=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},{"./_export":34,"./_object-to-array":85}],299:[function(e,t,o){function i(e){return null==e?void 0:m(e)}function a(e){var t=e._c;t&&(e._c=void 0,t())}function r(e){return void 0===e._o}function s(e){r(e)||(e._o=void 0,a(e))}function n(t,e){f(t),this._c=void 0,this._o=t,t=new _(this);try{var o=e(t),n=o;null!=o&&("function"==typeof o.unsubscribe?o=function(){n.unsubscribe()}:m(o),this._c=o)}catch(e){return void t.error(e)}r(this)&&a(this)}var l=e("./_export"),d=e("./_global"),c=e("./_core"),u=e("./_microtask")(),h=e("./_wks")("observable"),m=e("./_a-function"),f=e("./_an-object"),p=e("./_an-instance"),g=e("./_redefine-all"),y=e("./_hide"),v=e("./_for-of"),b=v.RETURN;n.prototype=g({},{unsubscribe:function(){s(this)}});var _=function(e){this._s=e};_.prototype=g({},{next:function(e){var t=this._s;if(!r(t)){var o=t._o;try{var n=i(o.next);if(n)return n.call(o,e)}catch(e){try{s(t)}finally{throw e}}}},error:function(e){var t=this._s;if(r(t))throw e;var o=t._o;t._o=void 0;try{var n=i(o.error);if(!n)throw e;e=n.call(o,e)}catch(e){try{a(t)}finally{throw e}}return a(t),e},complete:function(e){var t=this._s;if(!r(t)){var o=t._o;t._o=void 0;try{var n=i(o.complete);e=n?n.call(o,e):void 0}catch(e){try{a(t)}finally{throw e}}return a(t),e}}});var w=function(e){p(this,w,"Observable","_f")._f=m(e)};g(w.prototype,{subscribe:function(e){return new n(e,this._f)},forEach:function(n){var i=this;return new(c.Promise||d.Promise)(function(e,t){m(n);var o=i.subscribe({next:function(e){try{return n(e)}catch(e){t(e),o.unsubscribe()}},error:t,complete:e})})}}),g(w,{from:function(e){var t="function"==typeof this?this:w,o=i(f(e)[h]);if(o){var n=f(o.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var o=!1;return u(function(){if(!o){try{if(v(e,!1,function(e){if(t.next(e),o)return b})===b)return}catch(e){if(o)throw e;return void t.error(e)}t.complete()}}),function(){o=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)(function(t){var o=!1;return u(function(){if(!o){for(var e=0;e<n.length;++e)if(t.next(n[e]),o)return;t.complete()}}),function(){o=!0}})}}),y(w.prototype,h,function(){return this}),l(l.G,{Observable:w}),e("./_set-species")("Observable")},{"./_a-function":3,"./_an-instance":7,"./_an-object":8,"./_core":24,"./_export":34,"./_for-of":40,"./_global":42,"./_hide":44,"./_microtask":69,"./_redefine-all":92,"./_set-species":101,"./_wks":130}],300:[function(e,t,o){var n=e("./_export"),i=e("./_core"),a=e("./_global"),r=e("./_species-constructor"),s=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(t){var o=r(this,i.Promise||a.Promise),e="function"==typeof t;return this.then(e?function(e){return s(o,t()).then(function(){return e})}:t,e?function(e){return s(o,t()).then(function(){throw e})}:t)}})},{"./_core":24,"./_export":34,"./_global":42,"./_promise-resolve":90,"./_species-constructor":105}],301:[function(e,t,o){var n=e("./_export"),i=e("./_new-promise-capability"),a=e("./_perform");n(n.S,"Promise",{try:function(e){var t=i.f(this),e=a(e);return(e.e?t.reject:t.resolve)(e.v),t.promise}})},{"./_export":34,"./_new-promise-capability":70,"./_perform":89}],302:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.key,r=n.set;n.exp({defineMetadata:function(e,t,o,n){r(e,t,i(o),a(n))}})},{"./_an-object":8,"./_metadata":68}],303:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.key,r=n.map,s=n.store;n.exp({deleteMetadata:function(e,t){var o=arguments.length<3?void 0:a(arguments[2]),n=r(i(t),o,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;n=s.get(t);return n.delete(o),!!n.size||s.delete(t)}})},{"./_an-object":8,"./_metadata":68}],304:[function(e,t,o){var n=e("./es6.set"),i=e("./_array-from-iterable"),a=e("./_metadata"),r=e("./_an-object"),s=e("./_object-gpo"),l=a.keys,d=a.key,c=function(e,t){var o=l(e,t),e=s(e);if(null===e)return o;t=c(e,t);return t.length?o.length?i(new n(o.concat(t))):t:o};a.exp({getMetadataKeys:function(e){return c(r(e),arguments.length<2?void 0:d(arguments[1]))}})},{"./_an-object":8,"./_array-from-iterable":11,"./_metadata":68,"./_object-gpo":80,"./es6.set":234}],305:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_object-gpo"),r=n.has,s=n.get,l=n.key,d=function(e,t,o){if(r(e,t,o))return s(e,t,o);t=a(t);return null!==t?d(e,t,o):void 0};n.exp({getMetadata:function(e,t){return d(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},{"./_an-object":8,"./_metadata":68,"./_object-gpo":80}],306:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.keys,r=n.key;n.exp({getOwnMetadataKeys:function(e){return a(i(e),arguments.length<2?void 0:r(arguments[1]))}})},{"./_an-object":8,"./_metadata":68}],307:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.get,r=n.key;n.exp({getOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":8,"./_metadata":68}],308:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_object-gpo"),r=n.has,s=n.key,l=function(e,t,o){if(r(e,t,o))return!0;t=a(t);return null!==t&&l(e,t,o)};n.exp({hasMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":8,"./_metadata":68,"./_object-gpo":80}],309:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.has,r=n.key;n.exp({hasOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":8,"./_metadata":68}],310:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_a-function"),r=n.key,s=n.set;n.exp({metadata:function(o,n){return function(e,t){s(o,n,(void 0!==t?i:a)(e),r(t))}}})},{"./_a-function":3,"./_an-object":8,"./_metadata":68}],311:[function(e,t,o){e("./_set-collection-from")("Set")},{"./_set-collection-from":98}],312:[function(e,t,o){e("./_set-collection-of")("Set")},{"./_set-collection-of":99}],313:[function(e,t,o){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":21,"./_export":34}],314:[function(e,t,o){var n=e("./_export"),i=e("./_string-at")(!0),e=e("./_fails")(function(){return"𠮷"!=="𠮷".at(0)});n(n.P+n.F*e,"String",{at:function(e){return i(this,e)}})},{"./_export":34,"./_fails":36,"./_string-at":107}],315:[function(e,t,o){function n(e,t){this._r=e,this._s=t}var i=e("./_export"),a=e("./_defined"),r=e("./_to-length"),s=e("./_is-regexp"),l=e("./_flags"),d=RegExp.prototype;e("./_iter-create")(n,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(a(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),o="flags"in d?String(e.flags):l.call(e),o=new RegExp(e.source,~o.indexOf("g")?o:"g"+o);return o.lastIndex=r(e.lastIndex),new n(o,t)}})},{"./_defined":29,"./_export":34,"./_flags":38,"./_is-regexp":54,"./_iter-create":56,"./_to-length":119}],316:[function(e,t,o){var n=e("./_export"),i=e("./_string-pad"),e=e("./_user-agent"),e=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(e);n(n.P+n.F*e,"String",{padEnd:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},{"./_export":34,"./_string-pad":110,"./_user-agent":126}],317:[function(e,t,o){var n=e("./_export"),i=e("./_string-pad"),e=e("./_user-agent"),e=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(e);n(n.P+n.F*e,"String",{padStart:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},{"./_export":34,"./_string-pad":110,"./_user-agent":126}],318:[function(e,t,o){e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":112}],319:[function(e,t,o){e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":112}],320:[function(e,t,o){e("./_wks-define")("asyncIterator")},{"./_wks-define":128}],321:[function(e,t,o){e("./_wks-define")("observable")},{"./_wks-define":128}],322:[function(e,t,o){var n=e("./_export");n(n.S,"System",{global:e("./_global")})},{"./_export":34,"./_global":42}],323:[function(e,t,o){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":98}],324:[function(e,t,o){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":99}],325:[function(e,t,o){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":98}],326:[function(e,t,o){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":99}],327:[function(e,t,o){for(var n=e("./es6.array.iterator"),i=e("./_object-keys"),a=e("./_redefine"),r=e("./_global"),s=e("./_hide"),l=e("./_iterators"),e=e("./_wks"),d=e("iterator"),c=e("toStringTag"),u=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=i(h),f=0;f<m.length;f++){var p,g=m[f],y=h[g],v=r[g],b=v&&v.prototype;if(b&&(b[d]||s(b,d,u),b[c]||s(b,c,g),l[g]=u,y))for(p in n)b[p]||a(b,p,n[p],!0)}},{"./_global":42,"./_hide":44,"./_iterators":60,"./_object-keys":82,"./_redefine":93,"./_wks":130,"./es6.array.iterator":143}],328:[function(e,t,o){var n=e("./_export"),e=e("./_task");n(n.G+n.B,{setImmediate:e.set,clearImmediate:e.clear})},{"./_export":34,"./_task":114}],329:[function(e,t,o){var n=e("./_global"),i=e("./_export"),a=e("./_user-agent"),r=[].slice,e=/MSIE .\./.test(a),a=function(i){return function(e,t){var o=2<arguments.length,n=o&&r.call(arguments,2);return i(o?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,t)}};i(i.G+i.B+i.F*e,{setTimeout:a(n.setTimeout),setInterval:a(n.setInterval)})},{"./_export":34,"./_global":42,"./_user-agent":126}],330:[function(e,t,o){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.exec"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.array.flat-map"),e("./modules/es7.array.flatten"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.map.of"),e("./modules/es7.set.of"),e("./modules/es7.weak-map.of"),e("./modules/es7.weak-set.of"),e("./modules/es7.map.from"),e("./modules/es7.set.from"),e("./modules/es7.weak-map.from"),e("./modules/es7.weak-set.from"),e("./modules/es7.global"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.clamp"),e("./modules/es7.math.deg-per-rad"),e("./modules/es7.math.degrees"),e("./modules/es7.math.fscale"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.rad-per-deg"),e("./modules/es7.math.radians"),e("./modules/es7.math.scale"),e("./modules/es7.math.umulh"),e("./modules/es7.math.signbit"),e("./modules/es7.promise.finally"),e("./modules/es7.promise.try"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":24,"./modules/es6.array.copy-within":133,"./modules/es6.array.every":134,"./modules/es6.array.fill":135,"./modules/es6.array.filter":136,"./modules/es6.array.find":138,"./modules/es6.array.find-index":137,"./modules/es6.array.for-each":139,"./modules/es6.array.from":140,"./modules/es6.array.index-of":141,"./modules/es6.array.is-array":142,"./modules/es6.array.iterator":143,"./modules/es6.array.join":144,"./modules/es6.array.last-index-of":145,"./modules/es6.array.map":146,"./modules/es6.array.of":147,"./modules/es6.array.reduce":149,"./modules/es6.array.reduce-right":148,"./modules/es6.array.slice":150,"./modules/es6.array.some":151,"./modules/es6.array.sort":152,"./modules/es6.array.species":153,"./modules/es6.date.now":154,"./modules/es6.date.to-iso-string":155,"./modules/es6.date.to-json":156,"./modules/es6.date.to-primitive":157,"./modules/es6.date.to-string":158,"./modules/es6.function.bind":159,"./modules/es6.function.has-instance":160,"./modules/es6.function.name":161,"./modules/es6.map":162,"./modules/es6.math.acosh":163,"./modules/es6.math.asinh":164,"./modules/es6.math.atanh":165,"./modules/es6.math.cbrt":166,"./modules/es6.math.clz32":167,"./modules/es6.math.cosh":168,"./modules/es6.math.expm1":169,"./modules/es6.math.fround":170,"./modules/es6.math.hypot":171,"./modules/es6.math.imul":172,"./modules/es6.math.log10":173,"./modules/es6.math.log1p":174,"./modules/es6.math.log2":175,"./modules/es6.math.sign":176,"./modules/es6.math.sinh":177,"./modules/es6.math.tanh":178,"./modules/es6.math.trunc":179,"./modules/es6.number.constructor":180,"./modules/es6.number.epsilon":181,"./modules/es6.number.is-finite":182,"./modules/es6.number.is-integer":183,"./modules/es6.number.is-nan":184,"./modules/es6.number.is-safe-integer":185,"./modules/es6.number.max-safe-integer":186,"./modules/es6.number.min-safe-integer":187,"./modules/es6.number.parse-float":188,"./modules/es6.number.parse-int":189,"./modules/es6.number.to-fixed":190,"./modules/es6.number.to-precision":191,"./modules/es6.object.assign":192,"./modules/es6.object.create":193,"./modules/es6.object.define-properties":194,"./modules/es6.object.define-property":195,"./modules/es6.object.freeze":196,"./modules/es6.object.get-own-property-descriptor":197,"./modules/es6.object.get-own-property-names":198,"./modules/es6.object.get-prototype-of":199,"./modules/es6.object.is":203,"./modules/es6.object.is-extensible":200,"./modules/es6.object.is-frozen":201,"./modules/es6.object.is-sealed":202,"./modules/es6.object.keys":204,"./modules/es6.object.prevent-extensions":205,"./modules/es6.object.seal":206,"./modules/es6.object.set-prototype-of":207,"./modules/es6.object.to-string":208,"./modules/es6.parse-float":209,"./modules/es6.parse-int":210,"./modules/es6.promise":211,"./modules/es6.reflect.apply":212,"./modules/es6.reflect.construct":213,"./modules/es6.reflect.define-property":214,"./modules/es6.reflect.delete-property":215,"./modules/es6.reflect.enumerate":216,"./modules/es6.reflect.get":219,"./modules/es6.reflect.get-own-property-descriptor":217,"./modules/es6.reflect.get-prototype-of":218,"./modules/es6.reflect.has":220,"./modules/es6.reflect.is-extensible":221,"./modules/es6.reflect.own-keys":222,"./modules/es6.reflect.prevent-extensions":223,"./modules/es6.reflect.set":225,"./modules/es6.reflect.set-prototype-of":224,"./modules/es6.regexp.constructor":226,"./modules/es6.regexp.exec":227,"./modules/es6.regexp.flags":228,"./modules/es6.regexp.match":229,"./modules/es6.regexp.replace":230,"./modules/es6.regexp.search":231,"./modules/es6.regexp.split":232,"./modules/es6.regexp.to-string":233,"./modules/es6.set":234,"./modules/es6.string.anchor":235,"./modules/es6.string.big":236,"./modules/es6.string.blink":237,"./modules/es6.string.bold":238,"./modules/es6.string.code-point-at":239,"./modules/es6.string.ends-with":240,"./modules/es6.string.fixed":241,"./modules/es6.string.fontcolor":242,"./modules/es6.string.fontsize":243,"./modules/es6.string.from-code-point":244,"./modules/es6.string.includes":245,"./modules/es6.string.italics":246,"./modules/es6.string.iterator":247,"./modules/es6.string.link":248,"./modules/es6.string.raw":249,"./modules/es6.string.repeat":250,"./modules/es6.string.small":251,"./modules/es6.string.starts-with":252,"./modules/es6.string.strike":253,"./modules/es6.string.sub":254,"./modules/es6.string.sup":255,"./modules/es6.string.trim":256,"./modules/es6.symbol":257,"./modules/es6.typed.array-buffer":258,"./modules/es6.typed.data-view":259,"./modules/es6.typed.float32-array":260,"./modules/es6.typed.float64-array":261,"./modules/es6.typed.int16-array":262,"./modules/es6.typed.int32-array":263,"./modules/es6.typed.int8-array":264,"./modules/es6.typed.uint16-array":265,"./modules/es6.typed.uint32-array":266,"./modules/es6.typed.uint8-array":267,"./modules/es6.typed.uint8-clamped-array":268,"./modules/es6.weak-map":269,"./modules/es6.weak-set":270,"./modules/es7.array.flat-map":271,"./modules/es7.array.flatten":272,"./modules/es7.array.includes":273,"./modules/es7.asap":274,"./modules/es7.error.is-error":275,"./modules/es7.global":276,"./modules/es7.map.from":277,"./modules/es7.map.of":278,"./modules/es7.map.to-json":279,"./modules/es7.math.clamp":280,"./modules/es7.math.deg-per-rad":281,"./modules/es7.math.degrees":282,"./modules/es7.math.fscale":283,"./modules/es7.math.iaddh":284,"./modules/es7.math.imulh":285,"./modules/es7.math.isubh":286,"./modules/es7.math.rad-per-deg":287,"./modules/es7.math.radians":288,"./modules/es7.math.scale":289,"./modules/es7.math.signbit":290,"./modules/es7.math.umulh":291,"./modules/es7.object.define-getter":292,"./modules/es7.object.define-setter":293,"./modules/es7.object.entries":294,"./modules/es7.object.get-own-property-descriptors":295,"./modules/es7.object.lookup-getter":296,"./modules/es7.object.lookup-setter":297,"./modules/es7.object.values":298,"./modules/es7.observable":299,"./modules/es7.promise.finally":300,"./modules/es7.promise.try":301,"./modules/es7.reflect.define-metadata":302,"./modules/es7.reflect.delete-metadata":303,"./modules/es7.reflect.get-metadata":305,"./modules/es7.reflect.get-metadata-keys":304,"./modules/es7.reflect.get-own-metadata":307,"./modules/es7.reflect.get-own-metadata-keys":306,"./modules/es7.reflect.has-metadata":308,"./modules/es7.reflect.has-own-metadata":309,"./modules/es7.reflect.metadata":310,"./modules/es7.set.from":311,"./modules/es7.set.of":312,"./modules/es7.set.to-json":313,"./modules/es7.string.at":314,"./modules/es7.string.match-all":315,"./modules/es7.string.pad-end":316,"./modules/es7.string.pad-start":317,"./modules/es7.string.trim-left":318,"./modules/es7.string.trim-right":319,"./modules/es7.symbol.async-iterator":320,"./modules/es7.symbol.observable":321,"./modules/es7.system.global":322,"./modules/es7.weak-map.from":323,"./modules/es7.weak-map.of":324,"./modules/es7.weak-set.from":325,"./modules/es7.weak-set.of":326,"./modules/web.dom.iterable":327,"./modules/web.immediate":328,"./modules/web.timers":329}],331:[function(e,D,t){(function(T){(function(){function a(e,t,o,n){var i,a,r,s,t=t&&t.prototype instanceof d?t:d,t=Object.create(t.prototype),n=new c(n||[]);return t._invoke=(i=e,a=o,r=n,s=f,function(e,t){if(s===g)throw new Error("Generator is already running");if(s===y){if("throw"===e)throw t;return u()}for(r.method=e,r.arg=t;;){var o=r.delegate;if(o){var n=function e(t,o){var n=t.iterator[o.method];if(n===m){if(o.delegate=null,"throw"===o.method){if(t.iterator.return&&(o.method="return",o.arg=m,e(t,o),"throw"===o.method))return v;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}n=l(n,t.iterator,o.arg);if("throw"===n.type)return o.method="throw",o.arg=n.arg,o.delegate=null,v;var n=n.arg;if(!n)return o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,v;{if(!n.done)return n;o[t.resultName]=n.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=m)}o.delegate=null;return v}(o,r);if(n){if(n===v)continue;return n}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===f)throw s=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=g;n=l(i,a,r);if("normal"===n.type){if(s=r.done?y:p,n.arg!==v)return{value:n.arg,done:r.done}}else"throw"===n.type&&(s=y,r.method="throw",r.arg=n.arg)}}),t}function l(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}function d(){}function t(){}function o(){}function e(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function r(a){function r(e,t,o,n){e=l(a[e],a,t);if("throw"!==e.type){var i=e.arg,t=i.value;return t&&"object"==typeof t&&w.call(t,"__await")?Promise.resolve(t.__await).then(function(e){r("next",e,o,n)},function(e){r("throw",e,o,n)}):Promise.resolve(t).then(function(e){i.value=e,o(i)},n)}n(e.arg)}var t;"object"==typeof h.process&&h.process.domain&&(r=h.process.domain.bind(r)),this._invoke=function(o,n){function e(){return new Promise(function(e,t){r(o,n,e,t)})}return t=t?t.then(e,e):e()}}function n(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function s(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function c(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(n,this),this.reset(!0)}function i(t){if(t){var e=t[S];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,e=function e(){for(;++o<t.length;)if(w.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=m,e.done=!0,e};return e.next=e}}return{next:u}}function u(){return{value:m,done:!0}}var h,m,f,p,g,y,v,b,_,w,k,S,P,I,x,C;h="object"==typeof T?T:"object"==typeof window?window:"object"==typeof self?self:this,_=Object.prototype,w=_.hasOwnProperty,k="function"==typeof Symbol?Symbol:{},S=k.iterator||"@@iterator",P=k.asyncIterator||"@@asyncIterator",I=k.toStringTag||"@@toStringTag",x="object"==typeof D,(C=h.regeneratorRuntime)?x&&(D.exports=C):((C=h.regeneratorRuntime=x?D.exports:{}).wrap=a,f="suspendedStart",p="suspendedYield",g="executing",y="completed",v={},(k={})[S]=function(){return this},(x=(x=Object.getPrototypeOf)&&x(x(i([]))))&&x!==_&&w.call(x,S)&&(k=x),b=o.prototype=d.prototype=Object.create(k),(t.prototype=b.constructor=o).constructor=t,o[I]=t.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===t||"GeneratorFunction"===(e.displayName||e.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,I in e||(e[I]="GeneratorFunction")),e.prototype=Object.create(b),e},C.awrap=function(e){return{__await:e}},e(r.prototype),r.prototype[P]=function(){return this},C.AsyncIterator=r,C.async=function(e,t,o,n){var i=new r(a(e,t,o,n));return C.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},e(b),b[I]="Generator",b[S]=function(){return this},b.toString=function(){return"[object Generator]"},C.keys=function(o){var e,n=[];for(e in o)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in o)return e.value=t,e.done=!1,e}return e.done=!0,e}},C.values=i,c.prototype={constructor:c,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(s),!e)for(var t in this)"t"===t.charAt(0)&&w.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var n=this;function e(e,t){return a.type="throw",a.arg=o,n.next=e,t&&(n.method="next",n.arg=m),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var r=w.call(i,"catchLoc"),s=w.call(i,"finallyLoc");if(r&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(r){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;0<=o;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&w.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),s(o),v}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n,i=o.completion;return"throw"===i.type&&(n=i.arg,s(o)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:i(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=m),v}})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],332:[function(e,t,o){var n,i;n=this,i=function(){if("undefined"==typeof window||void 0===window.navigator||void 0===window.navigator.userAgent||void 0===window.navigator.mimeTypes)return!1;var e=window.navigator;let t=window.navigator.userAgent;function o(e){var t;try{t=new ActiveXObject(e)}catch(e){t=null}return t}function v(e,t){return t||console.log("[PDFObject] "+e),!1}function b(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function _(e,t,o,n,i,a){b(e),o=n+"?file="+encodeURIComponent(t)+o;let r=document.createElement("div"),s=document.createElement("iframe");return s.src=o,s.className="pdfobject",s.type="application/pdf",s.frameborder="0",i&&(s.id=i),a||(r.style.cssText="position: absolute; top: 0; right: 0; bottom: 0; left: 0;",s.style.cssText="border: none; width: 100%; height: 100%;",e.style.position="relative",e.style.overflow="auto"),r.appendChild(s),e.appendChild(r),e.classList.add("pdfobject-container"),e.getElementsByTagName("iframe")[0]}var n="ActiveXObject"in window,w=void 0!==window.Promise,i=void 0!==e.mimeTypes["application/pdf"],k=void 0!==e.platform&&"MacIntel"===e.platform&&void 0!==e.maxTouchPoints&&1<e.maxTouchPoints||/Mobi|Tablet|Android|iPad|iPhone/.test(t),S=!k&&void 0!==e.vendor&&/Apple/.test(e.vendor)&&/Safari/.test(t),e=!(k||!/irefox/.test(t))&&18<parseInt(t.split("rv:")[1].split(".")[0],10),P=!k&&(e||i||n&&!(!o("AcroPDF.PDF")&&!o("PDF.PdfCtrl")));return{embed:function(e,t,o){var n=o||{},i="string"==typeof n.id?n.id:"",a=n.page||!1;let r=n.pdfOpenParams||{};var s=n.fallbackLink||!0,l=n.width||"100%",d=n.height||"100%",c="boolean"!=typeof n.assumptionMode||n.assumptionMode,u="boolean"==typeof n.forcePDFJS&&n.forcePDFJS,h="boolean"==typeof n.supportRedirect&&n.supportRedirect,m="boolean"==typeof n.omitInlineStyles&&n.omitInlineStyles,f="boolean"==typeof n.suppressConsole&&n.suppressConsole,p="boolean"==typeof n.forceIframe&&n.forceIframe,o=n.PDFJS_URL||!1;let g=function(e){let t=document.body;return"string"==typeof e?t=document.querySelector(e):void 0!==window.jQuery&&e instanceof jQuery&&e.length?t=e.get(0):void 0!==e.nodeType&&1===e.nodeType&&(t=e),t}(t||!1),y="";return"string"!=typeof e?v("URL is not valid",f):g?(a&&(r.page=a),n=function(e){let t="",o;if(e){for(o in e)e.hasOwnProperty(o)&&(t+=encodeURIComponent(o)+"="+encodeURIComponent(e[o])+"&");t&&(t="#"+t,t=t.slice(0,t.length-1))}return t}(r),u&&o?_(g,e,n,o,i,m):P||c&&w&&!k?function(t,e,o,n,i,a,r,s,l){b(e);let d=document.createElement(t);if(d.src=n+i,d.className="pdfobject",d.type="application/pdf",s&&(d.id=s),!l){let e="embed"===t?"overflow: auto;":"border: none;";o&&o!==document.body?e+="width: "+a+"; height: "+r+";":e+="position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",d.style.cssText=e}return e.classList.add("pdfobject-container"),e.appendChild(d),e.getElementsByTagName(t)[0]}(p||h&&S?"iframe":"embed",g,t,e,n,l,d,i,m):o?_(g,e,n,o,i,m):(s&&(y="string"==typeof s?s:"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>",g.innerHTML=y.replace(/\[url\]/g,e)),v("This browser does not support embedded PDFs",f))):v("Target element cannot be determined",f)},pdfobjectversion:"2.2.3",supportsPDFs:P}},"function"==typeof define&&define.amd?define([],i):"object"==typeof t&&t.exports?t.exports=i():n.PDFObject=i()},{}],333:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TKWhiteBoardManager=void 0;var S=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var I=l(e("./utils/Global")),a=l(e("./utils/Constant")),x=l(e("./utils/Utils")),C=l(e("./utils/Configuration")),r=l(e("./intermediateLayer/WhiteboardIntermediateLayer")),s=l(e("./view/containers/WhiteboardView"));l(e("./view/containers/AudioPlayer")),l(e("./view/containers/VideoPlayer")),l(e("./view/containers/DocumentToolbar")),l(e("./view/containers/DocumentRemark"));function l(e){return e&&e.__esModule?e:{default:e}}function T(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var u=(n(d,[{key:"getVersion",value:function(){return a.default.WHITEBOARD_SDK_VERSION}},{key:"createMainWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,o=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))return void L.Logger.warning("The node id cannot be found by node id, and createMainWhiteboard method cannot be performed , element id is "+i+".")}var a="default";L.Logger.debug("[whiteboarrd-sdk]createMainWhiteboard  parentNode and configration and receiveActionCommand:",e,t,n),this._createWhiteboard(e,a,t,function(){var e,t;o.documentToolbarViewList[a]&&o.documentToolbarViewList[a].receiveActionCommand&&(e=o.documentToolbarViewList[a]).receiveActionCommand.apply(e,arguments),o.documentRemarkViewList[a]&&o.documentRemarkViewList[a].receiveActionCommand&&(e=o.documentRemarkViewList[a]).receiveActionCommand.apply(e,arguments),"function"==typeof n&&(!o.isInner&&"viewStateUpdate"!==(t=arguments.length<=0?void 0:arguments[0])&&"mediaPlayerNotice"!==t||n.apply(void 0,arguments))});var r,s,t=this.whiteboardViewMap.get(a);t&&t.getConfigration().isLoadDocumentToolBar&&(r=t.getConfigration().documentToolBarConfig.parentNode||t.getWhiteboardRootElement(),this.createDocumentToolBar(r,t.getConfigration().documentToolBarConfig,a)),t&&t.getConfigration().isLoadDocumentRemark&&(r=t.getConfigration().documentRemarkConfig.parentNode||t.getWhiteboardRootElement(),this.createDocumentRemark(r,t.getConfigration().documentRemarkConfig,a)),t&&t.getConfigration().isLoadAudioPlayer&&(s=t.getConfigration().audioPlayerConfig.parentNode||t.getWhiteboardRootElement(),this.createAudioPlayer(s,t.getConfigration().audioPlayerConfig)),t&&t.getConfigration().isLoadVideoPlayer&&(s=t.getConfigration().videoPlayerConfig.parentNode||t.getWhiteboardRootElement(),this.createVideoPlayer(s,t.getConfigration().videoPlayerConfig)),this._executeSaveMsglistData(a),this._executeSavePubmsgData(a)}},{key:"createExtendWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];if(L.Logger.debug("[whiteboarrd-sdk]createExtendWhiteboard  parentNode  instanceId  configration and receiveActionCommand:",e,o,t,i),null!=o){if("string"==typeof e){var a=e;if(!(e=document.getElementById(a)))return void L.Logger.warning("The node id cannot be found by node id, and createExtendWhiteboard method cannot be performed , element id is "+a+".")}o||(this.randomCreateExtendWhiteboardNumber++,o="randomWhiteboard"+this.randomCreateExtendWhiteboardNumber),this._createWhiteboard(e,o,t,function(){var e,t;n.documentToolbarViewList[o]&&n.documentToolbarViewList[o].receiveActionCommand&&(e=n.documentToolbarViewList[o]).receiveActionCommand.apply(e,arguments),n.documentRemarkViewList[o]&&n.documentRemarkViewList[o].receiveActionCommand&&(e=n.documentRemarkViewList[o]).receiveActionCommand.apply(e,arguments),"function"==typeof i&&(!n.isInner&&"viewStateUpdate"!==(t=arguments.length<=0?void 0:arguments[0])&&"mediaPlayerNotice"!==t||i.apply(void 0,arguments))});var r,t=this.whiteboardViewMap.get(o);t&&t.getConfigration().isLoadDocumentToolBar&&t.getConfigration().hasExtendDocument&&(r=t.getConfigration().documentToolBarConfig.parentNode||t.getWhiteboardRootElement(),this.createDocumentToolBar(r,t.getConfigration().documentToolBarConfig,o)),t&&t.getConfigration().isLoadDocumentRemark&&t.getConfigration().hasExtendDocument&&(r=t.getConfigration().documentRemarkConfig.parentNode||t.getWhiteboardRootElement(),this.createDocumentRemark(r,t.getConfigration().documentRemarkConfig,o)),this._executeSaveMsglistData(o),this._executeSavePubmsgData(o)}}},{key:"destroyMainWhiteboard",value:function(){L.Logger.debug("[whiteboarrd-sdk]destroyMainWhiteboard");this._destroyWhiteboard("default")}},{key:"destroyExtendWhiteboard",value:function(e){L.Logger.debug("[whiteboarrd-sdk]destroyExtendWhiteboard  instanceId:",e),null!=e&&this._destroyWhiteboard(e)}},{key:"changeDocument",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if("mobile"!==TK.SDKTYPE)if(null!=e&&null!=e){if(this.room&&this.whiteboardViewMap.has(o)){var n,i,a,r,s=this.whiteboardViewMap.get(o),l=void 0;if(0==e)l=this.pureWhiteboardFileinfoList[o];else{var d=this.room.getFileList(),c=!0,u=!1,h=void 0;try{for(var m=d[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var f=f.value;if(f.fileid==e){l=f;break}}}catch(e){u=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(u)throw h}}}l?/(mp3|mp4|webm)/g.test(l.filetype)?(n=(a=l.swfpath).lastIndexOf("."),r=a.substring(n),i=a.replace(r,"-1"+r),n=I.default.nowUseDocAddress+i,a=/(mp4|webm)/g.test(l.filetype),r=s.getConfigration().mediaShareToID,i={source:"mediaFileList",filename:l.filename,fileid:l.fileid,pauseWhenOver:a&&s.getConfigration().mediaSharePauseWhenOver},this.startShareMedia(n,a,r,i)):(r=3===(a=Number(l.fileprop)),a=!(i=1===a||2===a)&&!r,i||r||a?(a&&t>l.pagenum&&(t=l.pagenum),t<1&&(t=1),r={name:"default"===o?"ShowPage":"ExtendShowPage",id:"default"===o?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+o,toID:"__all",data:{sourceInstanceId:o,isGeneralFile:a,isMedia:!1,isDynamicPPT:i,isH5Document:r,action:"show",mediaType:"",filedata:{currpage:t,pptslide:i?t:1,pptstep:0,steptotal:0,fileid:l.fileid,pagenum:l.pagenum,filename:l.filename,filetype:l.filetype,isContentDocument:l.isContentDocument,swfpath:i||r?l.downloadpath:l.swfpath}},save:!0},this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},r)},o),s.getConfigration().synchronization&&this.pubMsg(r)):L.Logger.info("[whiteboarrd-sdk]changeDocument:you open file type is not support , filetype is "+l.filetype+" , fileid is "+e+" , toPage is "+t+".")):L.Logger.info("[whiteboarrd-sdk]changeDocument:you can't find the file by fileid , fileid is "+e+" , toPage is "+t+".")}}else L.Logger.error("changeDocument method parameter error: fileid can't be empty! ");else L.Logger.error("changeDocument method is not allowed in the mobile environment!")}},{key:"openRemoteDocument",value:function(e,t,o,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(!function(e,t,o,n){return e=e,1!=new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(e)?(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: url invalid"),"function"==typeof n&&n("url invalid"),!1):-1==["generalDocument","dynamicPPT","h5Document","mediaFile"].indexOf(t)?(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: type invalid"),"function"==typeof n&&n("type invalid"),!1):!!o||(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: id is empty"),"function"==typeof n&&n("id is empty"),!1)}(e,o,t,n)||!this.room)return!1;if(this.whiteboardViewMap.has("default")){var a,r,s=this.whiteboardViewMap.get("default"),l="unknown",d="unknown";try{var c=e.split(/(\/|\\)/g);c&&1<c.length&&(!(c=c[c.length-1])||"string"!=typeof c||(c=c.split("."))&&2==c.length&&(l=c[0],d=c[1]))}catch(e){L.Logger.error("[whiteboarrd-sdk]openRemoteDocument err:",e)}"mediaFile"===o?(a=s.getConfigration().mediaShareToID,n={source:"mediaFileList",filename:l,fileid:t,pauseWhenOver:(r="unknown"===d?/(.mp4|.webm)/g.test(e):/(mp4|webm)/g.test(d))&&s.getConfigration().mediaSharePauseWhenOver},this.startShareMedia(e,r,a,n)):(t={name:"ShowPage",id:"DocumentFilePage_ShowPage",toID:"__all",data:{isGeneralFile:"generalDocument"==o,isMedia:!1,isDynamicPPT:"dynamicPPT"==o,isH5Document:"h5Document"==o,action:"show",mediaType:"",filedata:{currpage:void 0!==i.toPage&&"number"==typeof i.toPage?i.toPage:1,pptslide:void 0!==i.toPage&&"number"==typeof i.toPage?i.toPage:1,pptstep:0,steptotal:0,fileid:t,pagenum:1,filename:l,filetype:d,isContentDocument:1,swfpath:e}},save:!0},this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},t)}),s.getConfigration().synchronization&&this.pubMsg(t))}}},{key:"changeWhiteBoardConfigration",value:function(e){var t,o,n,i,a,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",s={};for(t in e)C.default.commonWhiteboard.hasOwnProperty(t)&&(s[t]=e[t],delete e[t]);if(Object.keys(s).length&&this.changeCommonWhiteBoardConfigration(s),Object.keys(e).length){if(L.Logger.debug("[whiteboarrd-sdk]changeWhiteBoardConfigration  configration and instanceId:",e,r),this.whiteboardViewMap.has(r)?(this.awitWhiteboardConfigrationMap.has(r)&&this.awitWhiteboardConfigrationMap.delete(r),this.whiteboardViewMap.get(r).changeWhiteBoardConfigration(e)):this.awitWhiteboardConfigrationMap.has(r)?Object.deepAssign(this.awitWhiteboardConfigrationMap.get(r),e):this.awitWhiteboardConfigrationMap.set(r,Object.deepAssign({},C.default.defaultWhiteboard,C.default.commonWhiteboard,e)),(void 0!==e.isLoadDocumentToolBar&&"default"===r||e.hasExtendDocument)&&(n=this.whiteboardViewMap.get(r),e.isLoadDocumentToolBar&&!this.documentToolbarViewList[r]?n&&(o=n.getConfigration().documentToolBarConfig.parentNode||n.getWhiteboardRootElement(),this.createDocumentToolBar(o,n.getConfigration().documentToolBarConfig,r)):!e.isLoadDocumentToolBar&&this.documentToolbarViewList[r]&&this.documentToolbarViewList[r].destroyView&&(this.documentToolbarViewList[r].destroyView(),this.documentToolbarViewList[r]=void 0)),(void 0!==e.isLoadDocumentRemark&&"default"===r||e.hasExtendDocument)&&(o=this.whiteboardViewMap.get(r),e.isLoadDocumentRemark&&!this.documentRemarkViewList[r]?o&&(n=o.getConfigration().documentRemarkConfig.parentNode||o.getWhiteboardRootElement(),this.createDocumentRemark(n,o.getConfigration().documentRemarkConfig,r)):!e.isLoadDocumentRemark&&this.documentRemarkViewList[r]&&this.documentRemarkViewList[r].destroyView&&(this.documentRemarkViewList[r].destroyView(),this.documentRemarkViewList[r]=void 0)),void 0!==e.isLoadAudioPlayer&&"default"===r&&(a=this.whiteboardViewMap.get(r),e.isLoadAudioPlayer&&!this.audioPlayerView?a&&(i=a.getConfigration().audioPlayerConfig.parentNode||a.getWhiteboardRootElement(),this.createAudioPlayer(i,a.getConfigration().audioPlayerConfig)):!e.isLoadAudioPlayer&&this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0)),void 0!==e.isLoadVideoPlayer&&"default"===r&&(i=this.whiteboardViewMap.get(r),e.isLoadVideoPlayer&&!this.videoPlayerView?i&&(a=i.getConfigration().videoPlayerConfig.parentNode||i.getWhiteboardRootElement(),this.createVideoPlayer(a,i.getConfigration().videoPlayerConfig)):!e.isLoadVideoPlayer&&this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0)),void 0!==e.languageType&&("default"!==r&&!e.hasExtendDocument||(this.documentToolbarViewList[r]&&this.documentToolbarViewList[r].setProps({languageType:e.languageType}),this.documentRemarkViewList[r]&&this.documentRemarkViewList[r].setProps({languageType:e.languageType}))),void 0!==e.isMobile&&("default"!==r&&!e.hasExtendDocument||(this.documentToolbarViewList[r]&&this.documentToolbarViewList[r].setProps({isMobile:e.isMobile}),this.documentRemarkViewList[r]&&this.documentRemarkViewList[r].setProps({isMobile:e.isMobile}))),void 0!==e.canRemark&&("default"!==r&&!e.hasExtendDocument||(this.documentToolbarViewList[r]&&this.documentToolbarViewList[r].setProps({canRemark:e.canRemark}),this.documentRemarkViewList[r]&&this.documentRemarkViewList[r].setProps({canRemark:e.canRemark}))),void 0!==e.documentToolBarConfig&&("default"===r||e.hasExtendDocument)&&this.documentToolbarViewList[r]){if(e.documentToolBarConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentToolbarViewList[r].changeParentNode){var l=this.whiteboardViewMap.get(r);if("string"==typeof(l=e.documentToolBarConfig.parentNode||(l?l.getWhiteboardRootElement():void 0))){var d=l;if(!(l=document.getElementById(d)))return void L.Logger.warning("The node id cannot be found by node id, and  documentToolBarConfig.parentNode cannot update config, element id is "+d+".")}this.documentToolbarViewList[r].changeParentNode(l)}for(var c in e.documentToolBarConfig){var u=e.documentToolBarConfig[c];"object"===(void 0===u?"undefined":P(u))&&(e.documentToolBarConfig[c]=Object.deepAssign({},this.documentToolbarViewList[r].props[c],u))}this.documentToolbarViewList[r].setProps(Object.deepAssign({},e.documentToolBarConfig))}if(void 0!==e.documentRemarkConfig&&("default"===r||e.hasExtendDocument)&&this.documentRemarkViewList[r]){if(e.documentRemarkConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentRemarkViewList[r].changeParentNode){d=this.whiteboardViewMap.get(r);if("string"==typeof(l=e.documentRemarkConfig.parentNode||(d?d.getWhiteboardRootElement():void 0))){d=l;if(!(l=document.getElementById(d)))return void L.Logger.warning("The node id cannot be found by node id, and  documentRemarkConfig.parentNode cannot update config, element id is "+d+".")}this.documentRemarkViewList[r].changeParentNode(l)}for(var h in e.documentRemarkConfig){var m=e.documentRemarkConfig[h];"object"===(void 0===m?"undefined":P(m))&&(e.documentRemarkConfig[h]=Object.deepAssign({},this.documentRemarkViewList[r].props[h],m))}this.documentRemarkViewList[r].setProps(Object.deepAssign({},e.documentRemarkConfig))}if(void 0!==e.audioPlayerConfig&&this.audioPlayerView){for(var f in e.audioPlayerConfig){var p=e.audioPlayerConfig[f];"object"===(void 0===p?"undefined":P(p))&&(e.audioPlayerConfig[f]=Object.deepAssign({},this.audioPlayerView.props[f],p))}this.audioPlayerView.setProps(Object.deepAssign({},e.audioPlayerConfig))}if(void 0!==e.videoPlayerConfig&&this.videoPlayerView){for(var g in e.videoPlayerConfig){var y=e.videoPlayerConfig[g];"object"===(void 0===y?"undefined":P(y))&&(e.videoPlayerConfig[g]=Object.deepAssign({},this.videoPlayerView.props[g],y))}this.videoPlayerView.setProps(Object.deepAssign({},e.videoPlayerConfig))}e.isNativePlayAudio&&(I.default.isNativePlayAudio=!0),e.isNativePlayVideo&&(I.default.isNativePlayVideo=!0)}}},{key:"noticeWhiteboardActionCommand",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";L.Logger.debug("[whiteboarrd-sdk]noticeWhiteboardActionCommand "),this.whiteboardViewMap.has(o)&&this.whiteboardViewMap.get(o).noticeWhiteboardActionCommand(e,t)}},{key:"changeCommonWhiteBoardConfigration",value:function(e){L.Logger.debug("[whiteboarrd-sdk]changeCommonWhiteBoardConfigration common configration:",e);var t=Object.deepAssign({},e);"object"===P(t.docAddress)&&(I.default.docAddress=e.docAddress,""===I.default.docAddressKey&&(I.default.docAddressKey=e.docAddress.hostname),I.default.protocol=t.docAddress.protocol,I.default.port=t.docAddress.port,t.docAddress=e.docAddress.protocol+"://"+e.docAddress.hostname+":"+e.docAddress.port),"object"===P(t.webAddress)&&(t.webAddress=e.webAddress.protocol+"://"+e.webAddress.hostname+":"+e.webAddress.port),t.backupDocAddressList&&Array.isArray(t.backupDocAddressList)&&(I.default.backupDocAddressList=e.backupDocAddressList,C.default.commonWhiteboard.backupDocAddressList=[]),Object.deepAssign(C.default.commonWhiteboard,t);var o=!0,n=!1,i=void 0;try{for(var a=this.awitWhiteboardConfigrationMap.values()[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var r=r.value;Object.deepAssign(r,t)}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}void 0===e.docAddress&&void 0===e.backupDocAddressList||(I.default.docAddressList=[I.default.docAddress].concat(T(I.default.backupDocAddressList),T(I.default.laterAddressList)),I.default.hasGetDocAddressIndexByLocalStorage?(I.default.localStorageDocAddressKey&&""===x.default.getItem(I.default.docAddressList,I.default.localStorageDocAddressKey)&&""===x.default.getItem(I.default.laterAddressList,I.default.localStorageDocAddressKey)&&(I.default.protocol&&I.default.port&&(I.default.laterAddressList=[{protocol:I.default.protocol,hostname:I.default.localStorageDocAddressKey,port:I.default.port}]),I.default.docAddressList=[I.default.docAddress].concat(T(I.default.backupDocAddressList),T(I.default.laterAddressList))),I.default.nowUseDocAddress=x.default.getItem(I.default.docAddressList,I.default.docAddressKey)||C.default.commonWhiteboard.docAddress):(I.default.nowUseDocAddress=x.default.getItem(I.default.docAddressList,I.default.docAddressKey)||C.default.commonWhiteboard.docAddress,this.getLocalStorageItem("tkDocAddressKey",function(e){e&&void 0!==e&&"string"==typeof e&&"undefined"!==e&&(I.default.docAddressKey=e,I.default.localStorageDocAddressKey=e),I.default.localStorageDocAddressKey&&""===x.default.getItem(I.default.docAddressList,I.default.localStorageDocAddressKey)&&""===x.default.getItem(I.default.laterAddressList,I.default.localStorageDocAddressKey)&&(I.default.protocol&&I.default.port&&(I.default.laterAddressList=[{protocol:I.default.protocol,hostname:I.default.localStorageDocAddressKey,port:I.default.port}]),I.default.docAddressList=[I.default.docAddress].concat(T(I.default.backupDocAddressList),T(I.default.laterAddressList))),I.default.nowUseDocAddress=x.default.getItem(I.default.docAddressList,I.default.docAddressKey)||C.default.commonWhiteboard.docAddress,I.default.hasGetDocAddressIndexByLocalStorage=!0})));var s=!0,l=!1,d=void 0;try{for(var c=this.whiteboardViewMap[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){var u=h.value,h=S(u,2),u=h[0],h=h[1];this.awitWhiteboardConfigrationMap.has(u)&&this.awitWhiteboardConfigrationMap.delete(u),h.changeWhiteBoardConfigration(t)}}catch(e){l=!0,d=e}finally{try{!s&&c.return&&c.return()}finally{if(l)throw d}}var m=!0,f=!1,p=void 0;try{for(var g=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(m=(y=g.next()).done);m=!0){var y=y.value;y&&y.setProps(Object.deepAssign({},t))}}catch(e){f=!0,p=e}finally{try{!m&&g.return&&g.return()}finally{if(f)throw p}}var v=!0,b=!1,_=void 0;try{for(var w=Object.values(this.documentRemarkViewList)[Symbol.iterator]();!(v=(k=w.next()).done);v=!0){var k=k.value;k&&k.setProps(Object.deepAssign({},t))}}catch(e){b=!0,_=e}finally{try{!v&&w.return&&w.return()}finally{if(b)throw _}}this.audioPlayerView&&this.audioPlayerView.setProps(Object.deepAssign({},t)),this.videoPlayerView&&this.videoPlayerView.setProps(Object.deepAssign({},t))}},{key:"addPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]addPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).addPage()}},{key:"nextPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]nextPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).nextPage()}},{key:"prevPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]prevPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).prevPage()}},{key:"skipPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]skipPage  page :",e),"number"==typeof e?this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).skipPage(e):L.Logger.warning("skipPage page must is number!")}},{key:"nextStep",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]nextStep "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).nextStep()}},{key:"prevStep",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]prevStep "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).prevStep()}},{key:"enlargeWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]enlargeWhiteboard  instanceId:",e);this.executeZoomWhiteaord("zoom_big",e)}},{key:"narrowWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]narrowWhiteboard  instanceId:",e);this.executeZoomWhiteaord("zoom_small",e)}},{key:"clear",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]clear  instanceId:",e);this.executeWhiteboardAction("action_clear",e)}},{key:"undo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]undo  instanceId:",e);this.executeWhiteboardAction("action_undo",e)}},{key:"redo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]redo  instanceId:",e);this.executeWhiteboardAction("action_redo",e)}},{key:"fullScreen",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]fullScreen "),this.whiteboardViewMap.has(t)&&this.room&&((e=this.whiteboardViewMap.get(t)).getConfigration().isMobile?this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!0):(x.default.isFullScreenStatus()&&x.default.exitFullscreen(),t=e.getWhiteboardRootElement(),(e=e.getConfigration().documentToolBarConfig.fullScreenElementId)&&("string"==typeof e?document.getElementById(e)&&(t=document.getElementById(e)):t=e),x.default.launchFullscreen(t)))}},{key:"exitFullScreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]exitFullScreen "),this.whiteboardViewMap.has(e)&&this.room&&(this.whiteboardViewMap.get(e).getConfigration().isMobile?this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!1):x.default.exitFullscreen())}},{key:"updateWhiteboardSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]updateWhiteboardSize  instanceId:",e);var t,o={};this.whiteboardViewMap.has(e)&&((t=this.whiteboardViewMap.get(e)).resizeWhiteboardHandler(),o=t.getConfigration()),("default"===e||o.hasExtendDocument)&&this.documentRemarkViewList[e]&&x.default.isFunction(this.documentRemarkViewList[e].resize)&&this.documentRemarkViewList[e].resize(),("default"===e||o.hasExtendDocument)&&this.documentToolbarViewList[e]&&x.default.isFunction(this.documentToolbarViewList[e].resize)&&this.documentToolbarViewList[e].resize()}},{key:"updateAllWhiteboardSize",value:function(){L.Logger.debug("[whiteboarrd-sdk]updateAllWhiteboardSize ");var e=!0,t=!1,o=void 0;try{for(var n=this.whiteboardViewMap.keys()[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var i=i.value;this.updateWhiteboardSize(i)}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}}},{key:"resetWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]resetWhiteboardData  instanceId:",e),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).resetWhiteboardData()}},{key:"resetAllWhiteboardData",value:function(){L.Logger.debug("[whiteboarrd-sdk]resetAllWhiteboardData ");var e=!0,t=!1,o=void 0;try{for(var n,i=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0)n.value.resetWhiteboardData()}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}},{key:"resetPureWhiteboardTotalPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]resetPureWhiteboardTotalPage ");var t=this.pureWhiteboardFileinfoList[e]?this.pureWhiteboardFileinfoList[e].pagenum:1;this.pureWhiteboardFileinfoList[e]&&(this.pureWhiteboardFileinfoList[e].pagenum=1);e=this.whiteboardViewMap.get(e);e&&x.default.isFunction(e.resetPureWhiteboardTotalPage)&&e.resetPureWhiteboardTotalPage(t)}},{key:"changeDynamicPptVolume",value:function(e){var t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]changeDynamicPptVolume volume:",e),"number"==typeof e&&this.whiteboardViewMap.has(o)&&(t=this.whiteboardViewMap.get(o),e<0?e=0:100<e&&(e=100),o={name:"default"===o?"PptVolumeControl":"ExtendPptVolumeControl",id:"default"===o?"PptVolumeControl":"PptVolumeControl_"+o,toID:"__allExceptSender",data:{sourceInstanceId:o,volume:e/100},save:!0},this.receiveEventRoomPubmsg({type:"room-pubmsg",message:o}),this.room.setPptAudioVolume&&this.room.setPptAudioVolume(e),t.getConfigration().pptVolumeSynchronization&&this.pubMsg(o))}},{key:"openDocumentRemark",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]openDocumentRemark "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).changeDocumentRemarkState(!0)}},{key:"closeDocumentRemark",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]closeDocumentRemark "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).changeDocumentRemarkState(!1)}},{key:"executeWhiteboardAction",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]executeWhiteboardAction actionKey and\tinstanceId:",e,t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).executeWhiteboardAction(e)}},{key:"executeZoomWhiteaord",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]executeZoomWhiteaord \tzoomKey and\tinstanceId:",e,t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).executeZoomWhiteaord(e)}},{key:"receiveEventRoomPubmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomPubmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name))if("ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name||"ExtendShowPage"===t.name||"ExtendWhiteboardMarkTool"===t.name||"ExtendH5DocumentAction"===t.name||"ExtendPptVolumeControl"===t.name||"ExtendNewPptTriggerActionClick"===t.name)"ShowPage"!==t.name&&"ExtendShowPage"!==t.name||("string"==typeof t.data&&(t.data=x.default.toJsonParse(t.data)),t.data.isGeneralFile&&t.data.filedata&&0==t.data.filedata.fileid&&("ShowPage"===t.name&&this.pureWhiteboardFileinfoList.default?t.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===t.name&&this.pureWhiteboardFileinfoList[t.data.sourceInstanceId]&&(t.data.filedata.pagenum=this.pureWhiteboardFileinfoList[t.data.sourceInstanceId].pagenum))),"ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name?this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomPubmsg(e):this.savePubmsgData.default&&Array.isArray(this.savePubmsgData.default)?this.savePubmsgData.default.push(e):this.savePubmsgData.default=[e]:"ExtendShowPage"!==t.name&&"ExtendWhiteboardMarkTool"!==t.name&&"ExtendPptVolumeControl"!==t.name&&"ExtendH5DocumentAction"!==t.name&&"ExtendNewPptTriggerActionClick"!==t.name||t.data&&(this.whiteboardViewMap.has(t.data.sourceInstanceId)?this.whiteboardViewMap.get(t.data.sourceInstanceId).receiveEventRoomPubmsg(e):this.savePubmsgData[t.data.sourceInstanceId]&&Array.isArray(this.savePubmsgData[t.data.sourceInstanceId])?this.savePubmsgData[t.data.sourceInstanceId].push(e):this.savePubmsgData[t.data.sourceInstanceId]=[e]);else{var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0)a.value.receiveEventRoomPubmsg(e)}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"receiveEventRoomConnected",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomConnected \trecvEventData:",e),this.saveMsglistData={},this.savePubmsgData={},this.resetAllWhiteboardData(),this.resetPureWhiteboardTotalPage();e=e.message;this.receiveEventRoomMsglist(JSON.stringify({type:"room-msglist",message:e}))}},{key:"receiveEventRoomDisconnected",value:function(){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDisconnected "),I.default.laterAddressList=[];var e=!(I.default.hasGetDocAddressIndexByLocalStorage=!1),t=!1,o=void 0;try{for(var n=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var i=i.value;i&&i.getConfigration()&&i.getConfigration().isDisconnectedClearWhiteboardData&&x.default.isFunction(i.resetWhiteboardData)&&i.resetWhiteboardData()}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}}},{key:"receiveEventRoomDelmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDelmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name)&&"SharpsChange"!==t.name){var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0)a.value.receiveEventRoomDelmsg(e)}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"receiveEventRoomMsglist",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomMsglist \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t,o={},n=e.message;for(t in n)this._isWhiteboardCorrelationSignalling(n[t].name)&&(n[t].data&&"string"==typeof n[t].data&&(n[t].data=JSON.parse(n[t].data)),null!==o[n[t].name]&&void 0!==o[n[t].name]||(o[n[t].name]=[]),o[n[t].name].push(n[t]));var i=!0,a=!1,r=void 0;try{for(var s,l=["ShowPage","whiteboardMarkTool","NewPptTriggerActionClick","PptVolumeControl","H5DocumentAction","ExtendShowPage","ExtendWhiteboardMarkTool","ExtendPptVolumeControl","ExtendH5DocumentAction","ExtendNewPptTriggerActionClick"][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value,c=o[d];if(("ShowPage"===d||"ExtendShowPage"===d)&&c&&c.length){var u=!0,h=!1,m=void 0;try{for(var f=c[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var p=p.value;"ShowPage"!==p.name&&"ExtendShowPage"!==p.name||("string"==typeof p.data&&(p.data=x.default.toJsonParse(p.data)),p.data.isGeneralFile&&p.data.filedata&&0==p.data.filedata.fileid&&("ShowPage"===p.name&&this.pureWhiteboardFileinfoList.default?p.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===p.name&&this.pureWhiteboardFileinfoList[p.data.sourceInstanceId]&&(p.data.filedata.pagenum=this.pureWhiteboardFileinfoList[p.data.sourceInstanceId].pagenum)))}}catch(e){h=!0,m=e}finally{try{!u&&f.return&&f.return()}finally{if(h)throw m}}}if(null!=c&&0<c.length)if("ShowPage"===d||"whiteboardMarkTool"===d||"NewPptTriggerActionClick"===d||"PptVolumeControl"===d||"H5DocumentAction"===d)this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomMsglist(d,c[c.length-1]):this.saveMsglistData.default&&Array.isArray(this.saveMsglistData.default)?this.saveMsglistData.default.push(c[c.length-1]):this.saveMsglistData.default=[c[c.length-1]];else if("ExtendShowPage"===d||"ExtendWhiteboardMarkTool"===d||"ExtendPptVolumeControl"===d||"ExtendH5DocumentAction"===d||"ExtendNewPptTriggerActionClick"===d){var g=!0,y=!1,v=void 0;try{for(var b=c[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var _=_.value;_.data&&(this.whiteboardViewMap.has(_.data.sourceInstanceId)?this.whiteboardViewMap.get(_.data.sourceInstanceId).receiveEventRoomMsglist(d,_):this.saveMsglistData[_.data.sourceInstanceId]&&Array.isArray(this.saveMsglistData[_.data.sourceInstanceId])?this.saveMsglistData[_.data.sourceInstanceId].push(_):this.saveMsglistData[_.data.sourceInstanceId]=[_])}}catch(e){y=!0,v=e}finally{try{!g&&b.return&&b.return()}finally{if(y)throw v}}}o[d]=null,delete o[d]}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}}},{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfilestateChanged recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfilestateChanged",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfileattributesUpdate recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfileattributesUpdate",e)}},{key:"receiveEventRoomErrorNotice",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomErrorNotice recvEventData:",e),this._forwardingStreamEvents("receiveEventRoomErrorNotice",e)}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomReceiveActionCommand \trecvEventData:",e);var e=e.message,t=e.action,o=e.cmd;"transmitWindowSize"===t&&this._windowResizeCallback();var n=!0,i=!1,a=void 0;try{for(var r,s=this.whiteboardViewMap.values()[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)r.value.reveiveEventRoomReceiveActionCommand(t,o)}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}},{key:"registerRoomDelegate",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]registerRoomDelegate \troom and  sdkReceiveActionCommand:",e,t),this.room=e,this.sdkReceiveActionCommand=t,this._addRoomEvent()}},{key:"getRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getRoomDelegate "),this.room}},{key:"hasRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]hasRoomDelegate "),!!this.room}},{key:"sendActionCommandToSdk",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]sendActionCommandToSdk \taction and\tcmd:",e,t),this.sdkReceiveActionCommand&&"function"==typeof this.sdkReceiveActionCommand&&(void 0!==t&&!P(t)||Array.isArray(t)||(t=JSON.parse(JSON.stringify(t))),this.sdkReceiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]pubMsg \tparams :",e),this.room&&this.room.pubMsg&&("string"==typeof e&&(e=JSON.parse(e)),e.data&&"object"===P(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.pubMsg(e))}},{key:"delMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]delMsg params :",e),this.room&&this.room.delMsg&&(e.data&&"object"===P(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.delMsg(e))}},{key:"startShareMedia",value:function(e,t,o){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};L.Logger.debug("[whiteboarrd-sdk]startShareMedia url  isVideo  toID  and  attrs:",e,t,o,i),this.stopShareMedia(),this.stopShareLocalMedia(),this.room&&this.room.startShareMedia&&(n=this.whiteboardViewMap.get("default"),t&&n&&n.getConfigration()&&n.getConfigration().mediaSharePauseWhenOver&&(i.pauseWhenOver=n.getConfigration().mediaSharePauseWhenOver),n&&n.getConfigration()&&void 0!==n.getConfigration().myUserId&&!n.getConfigration().synchronization&&(o=n.getConfigration().myUserId),"mobile"!==TK.SDKTYPE?this.room.startShareMedia(e,t,function(e){L.Logger.warning("[whiteboard-sdk]startShareMedia fail , fail info:"+e)},{toID:o,attrs:i}):this.room.startShareMedia(e,t,o,i))}},{key:"stopShareMedia",value:function(){L.Logger.debug("[whiteboarrd-sdk]stopShareMedia "),this.room&&this.room.stopShareMedia&&this.room.stopShareMedia()}},{key:"stopShareLocalMedia",value:function(){"mobile"!==TK.SDKTYPE&&this.room&&this.room.stopShareLocalMedia&&(L.Logger.debug("[whiteboarrd-sdk]stopShareLocalMedia "),this.room.stopShareLocalMedia())}},{key:"createAudioPlayer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(L.Logger.debug("[whiteboarrd-sdk]createAudioPlayer parentNode and config :",e,t),window.TalkAudioPlayer){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createAudioPlayer method cannot be performed , element id is "+o+".")}o=this.whiteboardViewMap.get("default"),e=e||(o?o.getWhiteboardRootElement():document.body);this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0),this.audioPlayerView=new window.TalkAudioPlayer(e,"default",this,Object.deepAssign({},t,{languageType:o?o.getConfigration().languageType:"ch",isMobile:!!o&&o.getConfigration().isMobile},C.default.commonWhiteboard),o?o.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createAudioPlayer methods.")}},{key:"createVideoPlayer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(L.Logger.debug("[whiteboarrd-sdk]createVideoPlayer parentNode and config :",e,t),window.TalkVideoPlayer){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createVideoPlayer method cannot be performed , element id is "+o+".")}o=this.whiteboardViewMap.get("default"),e=e||(o?o.getWhiteboardRootElement():document.body);this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0),this.videoPlayerView=new window.TalkVideoPlayer(e,"default",this,Object.deepAssign({},t,{languageType:o?o.getConfigration().languageType:"ch",isMobile:!!o&&o.getConfigration().isMobile},C.default.commonWhiteboard),o?o.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createVideoPlayer methods.")}},{key:"createDocumentRemark",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];if(L.Logger.debug("[whiteboarrd-sdk]createDocumentRemark parentNode and config :",e,t),window.TalkDocumentRemark){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentRemark method cannot be performed , element id is "+n+".")}n=this.whiteboardViewMap.get(o),e=e||(n?n.getWhiteboardRootElement():document.body);this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].destroyView&&(this.documentRemarkViewList[o].destroyView(),delete this.documentRemarkViewList[o]),this.documentRemarkViewList[o]=new window.TalkDocumentRemark(e,o,this,Object.deepAssign({},t,{languageType:n?n.getConfigration().languageType:"ch",isMobile:!!n&&n.getConfigration().isMobile,canRemark:!!n&&n.getConfigration().canRemark},C.default.commonWhiteboard),n?n.getConfigration():void 0),n&&(n=this.getWhiteboardViewState(o),this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].receiveActionCommand&&n&&Object.keys(n.page).length&&Object.keys(n.zoom).length&&(n={viewState:n,updateViewState:{}},this.documentRemarkViewList[o].receiveActionCommand("viewStateUpdate",n)))}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentRemark methods.")}},{key:"createDocumentToolBar",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if(L.Logger.debug("[whiteboarrd-sdk]createDocumentToolBar parentNode and config :",e,t),window.TalkDocumentToolbar){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentToolBar method cannot be performed , element id is "+n+".")}n=this.whiteboardViewMap.get(o),e=e||(n?n.getWhiteboardRootElement():document.body);this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].destroyView&&(this.documentToolbarViewList[o].destroyView(),delete this.documentToolbarViewList[o]),this.documentToolbarViewList[o]=new window.TalkDocumentToolbar(e,o,this,Object.deepAssign({},t,{languageType:n?n.getConfigration().languageType:"ch",isMobile:!!n&&n.getConfigration().isMobile,canRemark:!!n&&n.getConfigration().canRemark},C.default.commonWhiteboard),n?n.getConfigration():void 0),n&&(n=this.getWhiteboardViewState(o),this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].receiveActionCommand&&n&&Object.keys(n.page).length&&Object.keys(n.zoom).length&&(n={viewState:n,updateViewState:{}},this.documentToolbarViewList[o].receiveActionCommand("viewStateUpdate",n)))}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentToolBar methods.")}},{key:"getWhiteboardViewState",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]getWhiteboardViewState ");e=this.whiteboardViewMap.get(e);if(e)return e.getWhiteboardViewState()}},{key:"getWhiteboardIntermediateLayerInstance",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getWhiteboardIntermediateLayerInstance "),r.default}},{key:"nativeUpdateDoc",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=e.protocal,n=e.hostname,i=e.port;I.default.backupDocAddressList=[e],I.default.nowUseDocAddress=o+"://"+n+":"+i,I.default.protocol=o,I.default.port=i,I.default.docAddressKey=n;t=this.whiteboardViewMap.get(t);t&&t.reloadCurrentDocument()}},{key:"switchDocAddress",value:function(e){var t,o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"default";L.Logger.debug("[whiteboarrd-sdk]call switchDocAddress method , docAddressKey is "+e),e&&"string"==typeof e?(I.default.localStorageDocAddressKey=e,I.default.localStorageDocAddressKey&&""===x.default.getItem(I.default.docAddressList,I.default.localStorageDocAddressKey)&&""===x.default.getItem(I.default.laterAddressList,I.default.localStorageDocAddressKey)&&(I.default.protocol&&I.default.port&&(I.default.laterAddressList=[{protocol:I.default.protocol,hostname:I.default.localStorageDocAddressKey,port:I.default.port}]),I.default.docAddressList=[I.default.docAddress].concat(T(I.default.backupDocAddressList),T(I.default.laterAddressList))),I.default.docAddressKey!==e?(t=x.default.getItem(I.default.docAddressList,I.default.docAddressKey),I.default.docAddressKey=e,I.default.nowUseDocAddress=x.default.getItem(I.default.docAddressList,I.default.docAddressKey)||C.default.commonWhiteboard.docAddress,o&&this.setLocalStorageItem("tkDocAddressKey",I.default.docAddressKey),(o=this.whiteboardViewMap.get(i))&&(o.reloadCurrentDocument(),o.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(T(I.default.docAddressList)),docAddressKey:I.default.docAddressKey,oldDocAddress:t||I.default.docAddress,nowDocAddress:I.default.docAddressList[I.default.docAddressKey]||C.default.commonWhiteboard.docAddress||I.default.docAddress}))):!n||(t=this.whiteboardViewMap.get(i))&&t.reloadCurrentDocument()):!n||(i=this.whiteboardViewMap.get(i))&&i.reloadCurrentDocument()}},{key:"setLocalStorageItem",value:function(e,t){"mobile"===TK.SDKTYPE?this.room&&x.default.isFunction(this.room.setLocalStorageItem)&&this.room.setLocalStorageItem(e,t):x.default.setLocalStorageItem(e,t)}},{key:"getLocalStorageItem",value:function(e,t){if(x.default.isFunction(t))if("mobile"===TK.SDKTYPE){if(this.room&&x.default.isFunction(this.room.getLocalStorageItem))try{this.room.getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("[whiteboard-sdk]getLocalStorageItem error:",e)}}else t(x.default.getLocalStorageItem("tkDocAddressKey"))}},{key:"_executeSaveMsglistData",value:function(o){var n=this;this.saveMsglistData[o]&&this.whiteboardViewMap.get(o)&&(this.saveMsglistData[o].forEach(function(e,t){n.whiteboardViewMap.get(o).receiveEventRoomMsglist(e.name,e)}),delete this.saveMsglistData[o])}},{key:"_executeSavePubmsgData",value:function(o){var n=this;this.savePubmsgData[o]&&this.whiteboardViewMap.get(o)&&(this.savePubmsgData[o].forEach(function(e,t){n.whiteboardViewMap.get(o).receiveEventRoomPubmsg(e)}),delete this.savePubmsgData[o])}},{key:"_createWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];if(L.Logger.debug("[whiteboarrd-sdk]_createWhiteboard  parentNode  instanceId  configration  and\treceiveActionCommand:",e,t,n,i),"string"==typeof e){var a=e;if(!(e=document.getElementById(a)))return void L.Logger.warning("The node id cannot be found by node id, and createWhiteboard method cannot be performed , element id is "+a+".")}this.pureWhiteboardFileinfoList[t]={fileid:0,companyid:"",filename:"whiteboard",uploaduserid:"",uploadusername:"",downloadpath:"",swfpath:"",filetype:"whiteboard",pagenum:1,dynamicppt:0,filecategory:0,fileprop:0};a=void 0;this.awitWhiteboardConfigrationMap.has(t)?(a=this.awitWhiteboardConfigrationMap.get(t),this.awitWhiteboardConfigrationMap.delete(t)):a=Object.deepAssign({},C.default.defaultWhiteboard,C.default.commonWhiteboard);n=Object.deepAssign({},a,n);this.whiteboardViewMap.has(t)&&this._destroyWhiteboard(t),this.whiteboardViewMap.set(t,new s.default(e,t,n,function(){"function"==typeof i&&i.apply(void 0,arguments)},this)),x.default.onElementResize(e,function(){o.updateWhiteboardSize(t)})}},{key:"_destroyWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]_destroyWhiteboard    instanceId  :",e),this.whiteboardViewMap.has(e)&&(this.whiteboardViewMap.get(e).destroyWhiteboardView(),this.whiteboardViewMap.delete(e)),this.awitWhiteboardConfigrationMap.has(e)&&this.awitWhiteboardConfigrationMap.delete(e)}},{key:"_isWhiteboardCorrelationSignalling",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_isWhiteboardCorrelationSignalling    name  :",e);var t=!1;switch(e){case"ShowPage":case"ExtendShowPage":case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":case"PptVolumeControl":case"ExtendPptVolumeControl":case"H5DocumentAction":case"ExtendH5DocumentAction":case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t=!0}return t}},{key:"_windowResizeCallback",value:function(){var e=this;return L.Logger.debug("[whiteboarrd-sdk]_windowResizeCallback "),this.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1}},{key:"_windowMessageCallback",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_windowMessageCallback"),e=e||window.event;var t=!0,o=!1,n=void 0;try{for(var i,a=this.whiteboardViewMap.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.receiveWindowMessageEvent(e)}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}var r=!0,s=!1,l=void 0;try{for(var d=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var c=c.value;c&&c.receiveWindowMessageEvent(e)}}catch(e){s=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(s)throw l}}return!1}},{key:"_documentKeydownCallback",value:function(e){var t=this;L.Logger.debug("[whiteboarrd-sdk]_documentKeydownCallback"),27===(e=e||window.event).keyCode&&x.default.isFullScreenStatus()&&x.default.exitFullscreen();function o(){if(!I.default.isSkipPageing&&t.whiteboardViewMap.has("default")&&t.whiteboardViewMap.get("default").getConfigration().isUseKeyboardPage&&!t.whiteboardViewMap.get("default").isWhiteboardTextEditing())switch(e.keyCode){case 37:t.whiteboardViewMap.get("default").prevPage();break;case 38:t.whiteboardViewMap.get("default").prevStep();break;case 39:t.whiteboardViewMap.get("default").nextPage();break;case 40:t.whiteboardViewMap.get("default").nextStep()}}return clearTimeout(this.documentKeydownTimer),this.documentKeydownDateTime&&500<(new Date).getTime()-this.documentKeydownDateTime?o():this.documentKeydownTimer=setTimeout(function(){o()},300),this.documentKeydownDateTime=(new Date).getTime(),!1}},{key:"_documentFullscreenchangeCallback",value:function(e){var t=this;L.Logger.debug("[whiteboarrd-sdk]_documentFullscreenchangeCallback");var o=!0,n=!1,i=void 0;try{for(var a=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var r,s,l=s.value;x.default.isFullScreenStatus()?(r=l.getWhiteboardRootElement(),(s=l.getConfigration().documentToolBarConfig.fullScreenElementId)&&("string"==typeof s?document.getElementById(s)&&(r=document.getElementById(s)):r=s),x.default.getFullscreenElement()&&x.default.getFullscreenElement().id===r.id?l.changeFullScreenState(!0):l.changeFullScreenState(!1)):l.changeFullScreenState(!1)}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}return this.videoPlayerView&&this.videoPlayerView.receiveEventFullScreenChange&&this.videoPlayerView.receiveEventFullScreenChange(e),this.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize()},250)},50),!1}},{key:"_registerEvent",value:function(){var e=this;L.Logger.debug("[whiteboarrd-sdk]_registerEvent");x.default.addEvent(window,"resize",this._windowResizeCallback.bind(this)),x.default.addEvent(window,"message",this._windowMessageCallback.bind(this)),x.default.addEvent(document,"keyup",this._documentKeydownCallback.bind(this)),x.default.addFullscreenchange(this._documentFullscreenchangeCallback.bind(this));var t,o,n,i=((n=o=t=void 0)!==document.hidden?(t="hidden",n="visibilitychange",o="visibilityState"):void 0!==document.mozHidden?(t="mozHidden",n="mozvisibilitychange",o="mozVisibilityState"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange",o="msVisibilityState"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange",o="webkitVisibilityState"),{hidden:t,state:o,visibilityChange:n}),a=i.state,i=i.visibilityChange;x.default.addEvent(document,i,function(){if("visible"===document[a])return e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1},!1)}},{key:"_addRoomEvent",value:function(){L.Logger.debug("[whiteboarrd-sdk]_addRoomEvent"),this.room&&(this.room.removeBackupListerner&&this.room.removeBackupListerner(this.listernerBackupid),this.room.addEventListener("room-receiveActionCommand",this.reveiveEventRoomReceiveActionCommand.bind(this),this.listernerBackupid),this.room.addEventListener("room-pubmsg",this.receiveEventRoomPubmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-delmsg",this.receiveEventRoomDelmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-connected",this.receiveEventRoomConnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-disconnected",this.receiveEventRoomDisconnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-msglist",this.receiveEventRoomMsglist.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediastate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfilestate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediaattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfileattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-error-notice",this.receiveEventRoomErrorNotice.bind(this),this.listernerBackupid))}},{key:"_forwardingStreamEvents",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]_forwardingStreamEvents handlerName and recvEventData:",e,t),this.audioPlayerView&&this.audioPlayerView[e]&&x.default.isFunction(this.audioPlayerView[e])&&this.audioPlayerView[e](t),this.videoPlayerView&&this.videoPlayerView[e]&&x.default.isFunction(this.videoPlayerView[e])&&this.videoPlayerView[e](t)}}]),d);function d(e,t,o){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.className="TKWhiteBoardManagerInner",this.isInner=o,this.room=e,this.sdkReceiveActionCommand=t,this.whiteboardViewMap=new Map,this.awitWhiteboardConfigrationMap=new Map,this.randomCreateExtendWhiteboardNumber=0,this.audioPlayerView=void 0,this.videoPlayerView=void 0,this.documentRemarkViewList={},this.documentToolbarViewList={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.pureWhiteboardFileinfoList={},this.saveMsglistData={},this.savePubmsgData={},this._registerEvent(),this._addRoomEvent()}var h=["createMainWhiteboard","destroyMainWhiteboard","createExtendWhiteboard","destroyExtendWhiteboard","changeWhiteBoardConfigration","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","updateWhiteboardSize","updateAllWhiteboardSize","resetAllWhiteboardData","resetPureWhiteboardTotalPage","changeDynamicPptVolume","openDocumentRemark","closeDocumentRemark","getWhiteboardIntermediateLayerInstance","changeCommonWhiteBoardConfigration","registerRoomDelegate","changeDocument","stopShareLocalMedia","switchDocAddress","getVersion","openRemoteDocument","noticeWhiteboardActionCommand","nativeUpdateDoc"],m=["createMainWhiteboard","destroyMainWhiteboard","changeDocument","changeWhiteBoardConfigration","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","registerRoomDelegate","changeCommonWhiteBoardConfigration","getVersion","openRemoteDocument","noticeWhiteboardActionCommand","nativeUpdateDoc"];function c(e,t,o){var n={className:"TKWhiteBoardManager"},i=new u(e,t,o),a=o?h:m,r=!0,s=!1,l=void 0;try{for(var d,c=a[Symbol.iterator]();!(r=(d=c.next()).done);r=!0)!function(e){n[e]=function(){return i[e].apply(i,arguments)}}(d.value)}catch(e){s=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}return n}window.TKWhiteBoardManager=c,o.TKWhiteBoardManager=c,o.default=c},{"./intermediateLayer/WhiteboardIntermediateLayer":336,"./utils/Configuration":337,"./utils/Constant":338,"./utils/Global":340,"./utils/Utils":344,"./view/containers/AudioPlayer":349,"./view/containers/DocumentRemark":350,"./view/containers/DocumentToolbar":351,"./view/containers/VideoPlayer":353,"./view/containers/WhiteboardView":354}],334:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.defaultProductionOptions={synchronizationDynamicPpt:!0,dynamicPptActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.dynamicPptInstanceIDPrefix="dynamicPpt_",this.dynamicPptInstanceDefaultID="dynamicPpt_default",this.dynamicPptInstanceStore={},this.uniqueDynamicPpt=!1,this.specialDynamicPptInstanceIDPrefix="specialDynamicPptInstanceIDPrefix_"}var a=new(function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}(i,[{key:"productionDynamicPpt",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.dynamicPptElementId,n=t.productionOptions,i=void 0===n?{}:n,a=t.handler,r=void 0===a?{}:a,s=t.id;if(o){var l=this._getDynamicPptInstanceID(s),d=this.getDynamicPptInstanceByID(l);if(d)return L.Logger.error("The production dynamicPpt(dynamicPptInstanceID:"+l+") fails, the dynamicPpt already exists!"),d;d={},i=Object.deepAssign({},this.defaultProductionOptions,i);var c=document.getElementById(o);if(!c)return L.Logger.error("DynamicPpt elements do not exist , element id is:"+o+"!"),d;var u=document.createElement("div"),h=o+"_dynamicPptInstance";u.className="dynamicPpt-instance-element",u.id=h,u.style.width="100%",u.style.height="100%";var m=document.createElement("iframe"),f=o+"_dynamicPptIframe";m.className="dynamicPpt-iframe-element",m.id=f,m.name=o+"_dynamicPptIframeName",m.allowFullScreen=!0,m.frameborder=0,m.scrolling="no",m.allow="autoplay",m.width="100%",m.height="100%",m.style.width="100%",m.style.height="100%",m.style.border="none",m.style.padding="0",m.style.margin="0",u.appendChild(m);var p=document.createElement("div"),g=o+"_dynamicPptLoading";p.className="dynamicPpt-loading-element talkcloud-loading",p.id=g;n=document.createElement("span");n.className="tk-loading-reload-number",n.style.display="none",p.appendChild(n),u.appendChild(p);a=document.createElement("div"),t=o+"_dynamicPptAction";return a.className="dynamicPpt-action-element talkcloud-action",a.style.width="100%",a.style.height="100%",a.style.zIndex=98,a.style.display=i.dynamicPptActionClick?"none":"block",a.style.position="absolute",a.style.top="0",a.style.left="0",a.id=t,u.appendChild(a),u.appendChild(a),c.appendChild(u),(this.dynamicPptInstanceStore[l]=d).dynamicPptInstanceID=l,d.handler={},d.handler.sendSignallingToServer=r.sendSignallingToServer,d.handler.delSignallingToServer=r.delSignallingToServer,d.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,d.dynamicPptElementId=o,d.dynamicPptElement=c,d.dynamicPptInstanceElementId=h,d.dynamicPptInstanceElement=u,d.dynamicPptIframeElementId=f,d.dynamicPptIframeElement=m,d.dynamicPptLoadingElementId=g,d.dynamicPptLoadingElement=p,d.dynamicPptReloadNumberElement=n,d.dynamicPptActionElementId=t,d.dynamicPptActionElement=a,d.id=s,d.remoteData={},d.awitExecutePostMessageArray=[],d.dynamicPptActionJson={},d.associatedMsgID=i.associatedMsgID,d.associatedUserID=i.associatedUserID,d.synchronizationDynamicPpt=i.synchronizationDynamicPpt,d.dynamicPptActionClick=i.dynamicPptActionClick,d.forceReloadNumber=0,d.maxForceReloadNumber=i.maxForceReloadNumber,d.forceReloadInterval=i.forceReloadInterval,d.isShowReloadFileTip=i.isShowReloadFileTip,d.languageType=i.languageType,d.againreconnectNum=0,i.againreconnectElementParentNode&&(d.againreconnectElementParentNode=i.againreconnectElementParentNode),d.dynamicPptIframeElement.onload=function(){clearTimeout(d.forceReloadNumberTimer),d.forceReloadNumberTimer=null,d.iframeSrc&&!d.isLoadFinished&&d.forceReloadNumber<d.maxForceReloadNumber&&e._iframeReloadMonitor(d,"dynamicPptLoaded")},d}L.Logger.error("dynamicPptElementId is required!")}},{key:"destroyDynamicPptInstance",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?this._destroyDynamicPptInstance(t):L.Logger.error("[destroy]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?t.source===o.dynamicPptIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"changeDynamicPptSize",value:function(e){var t,o=this,n=this.getDynamicPptInstanceByID(e);n?(t={action:"resizeHandler",width:n.dynamicPptElement.clientWidth,height:n.dynamicPptElement.clientHeight},this._postMessage(n,t),setTimeout(function(){var e={action:"resizeHandler",width:n.dynamicPptElement.clientWidth,height:n.dynamicPptElement.clientHeight};o._postMessage(n,e)},250)):L.Logger.error("[changeDynamicPptSize]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"hasDynamicPptById",value:function(e){e=this.getDynamicPptInstanceByID(e);return null!=e}},{key:"setDynamicPptIframeSrc",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=this.getDynamicPptInstanceByID(e);if(a){var r="";a.isLoadFinished=!1,a.awitExecutePostMessageArray.length=0,clearTimeout(a.forceReloadNumberTimer),a.forceReloadNumberTimer=null,a.forceReloadNumber=i.forceReloadNumber||0;var s=n.fileid,l=n.pptslide,n=n.pptstep;if(a.playback=i.playback,a.againreconnectElement&&(a.againreconnectElement.parentNode&&a.againreconnectElement.parentNode.removeChild(a.againreconnectElement),a.againreconnectElement=void 0),s==a.fileid&&t&&i.isAgainreconnect||(a.againreconnectNum=0),a.fileid=s,a.awitJumpToAnimPptslide=l,a.awitJumpToAnimPptstep=n,t){r=t;var d=!1,c=!0,u=!1,h=void 0;try{for(var m=Object.entries(o)[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var f=p.value,p=g(f,2),f=p[0],p=p[1];null!=p&&(d?r+="&"+f+"="+p:(d=!0,r+=(/\?/g.test(r)?"&":"?")+f+"="+p))}}catch(e){u=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(u)throw h}}a.iframeSrc=r,this._showLoading(a),this._iframeReloadMonitor(a,"setDynamicPptIframeSrc")}else a.iframeSrc=r;i.isAgainreconnect&&(a.dynamicPptIframeElement.src=""),a.dynamicPptIframeElement.src=r,L.Logger.debug("set dynamic ppt src:",r)}else L.Logger.error("[setDynamicPptIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"jumpToAnimation",value:function(e,t,o,n,i,a){var r=this.getDynamicPptInstanceByID(e);r?this._jumpToAnimation(r,t,o,n,i,a):L.Logger.error("[jumpToAnimation]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide>=o.remoteData.pptslidesCount?L.Logger.warning("[nextPage]dynamic ppt is on the last page , cannot execute nextPage method."):this._postMessage(o,{action:"gotoNextSlide",autoStart:t}):L.Logger.info("[nextPage]dynamic ppt is not load finished  , cannot execute nextPage method"):L.Logger.error("[nextPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide<=1?L.Logger.warning("[prevPage]dynamic ppt is  on page 1 , cannot execute prevPage method."):this._postMessage(o,{action:"gotoPreviousSlide",autoStart:t}):L.Logger.info("[prevPage]dynamic ppt is not load finished  , cannot execute prevPage method"):L.Logger.error("[prevPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoNextStep"}):L.Logger.info("[nextStep]dynamic ppt is not load finished  , cannot execute nextStep method"):L.Logger.error("[nextStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoPreviousStep"}):L.Logger.info("[prevStep]dynamic ppt is not load finished  , cannot execute prevStep method"):L.Logger.error("[prevStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"updateDynamicPptProperty",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationDynamicPpt&&(o.synchronizationDynamicPpt=t.synchronizationDynamicPpt,this._postMessage(o,{action:"changePublishDynamicPptMediaPermission_video",publishDynamicPptMediaPermission_video:o.synchronizationDynamicPpt})),void 0!==t.dynamicPptActionClick&&(o.dynamicPptActionClick=t.dynamicPptActionClick,o.dynamicPptActionElement.style.display=o.dynamicPptActionClick?"none":"block",this._postMessage(o,{action:"changeDynamicPptActionClick",dynamicPptActionClick:o.dynamicPptActionClick})),void 0!==t.canPage&&this._postMessage(o,{action:"changeNewpptPagingPage",newpptPagingPage:t.canPage}),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o))):L.Logger.error("[updateDynamicPptProperty]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessageDynamicPptTriggerAction",value:function(e,t){var o,n,i=this.getDynamicPptInstanceByID(e);i?(o=t.slide,n=t.fileid,i.fileid!=n||i.remoteData.pptslide!==o+1?(i.dynamicPptActionJson[o+1]=i.dynamicPptActionJson[o+1]||[],i.dynamicPptActionJson[o+1].push(t)):this._postMessage(i,t)):L.Logger.error("[postMessageDynamicPptTriggerAction]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getDynamicPptInstanceByID",value:function(e){e=this._getDynamicPptInstanceID(e);return this.dynamicPptInstanceStore[e]}},{key:"_jumpToAnimation",value:function(e,t,o,n,i,a){e.isLoadFinished&&(e.remoteData.pptslide>e.remoteData.pptslidesCount||e.remoteData.pptslide<1)&&(e.remoteData.pptslide>e.remoteData.pptslidesCount&&(t=e.remoteData.pptslidesCount,e.remoteData.pptslide=e.remoteData.pptslidesCount),e.remoteData.pptslide<1&&(t=1,e.remoteData.pptslide=1),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}));n={action:"jumpToAnim",data:{slide:t,step:o,timeOffset:i,autoStart:a,initiative:n}};this._postMessage(e,n)}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{var o;e.dynamicPptIframeElement&&e.dynamicPptIframeElement.src&&(o={source:"tk_dynamicPPT",data:t},o=JSON.stringify(o),e.dynamicPptIframeElement&&e.dynamicPptIframeElement.contentWindow&&e.dynamicPptIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]dynamic ppt postMessage instanceId is "+e.id+",sendData:"+o),e.dynamicPptIframeElement.contentWindow.postMessage(o,"*")))}catch(e){L.Logger.error("[_postMessage] dynamic ppt postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.dynamicPptLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.dynamicPptLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getDynamicPptInstanceID",value:function(e){var t=this.uniqueDynamicPpt||null==e?this.dynamicPptInstanceDefaultID:this.dynamicPptInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(this.specialDynamicPptInstanceIDPrefix,"g").test(e)&&(t=e),t}},{key:"_destroyDynamicPptInstance",value:function(e){var t=e.dynamicPptInstanceID,o=e.dynamicPptElement;o?o.innerHTML="":L.Logger.warning("[destroy] dynamicPpt elements do not exist , element id is:"+e.dynamicPptElementId+"!");var n=!0,i=!1,a=void 0;try{for(var r=Object.keys(e)[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var s=s.value;e[s]=null,delete e[s]}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}this.dynamicPptInstanceStore[t]=null,delete this.dynamicPptInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){if(o.data){var n=void 0,i=void 0;try{n=(i=JSON.parse(o.data)).data}catch(e){return void L.Logger.warning("dynamic ppt receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(i&&"tk_dynamicPPT"===i.source){L.Logger.debug("[dynamicPpt]receive remote iframe data form "+o.origin+":",o);switch(n.action){case"initEvent":this._handleIframeMessage_initEvent(t,n);break;case"slideChangeEvent":case"stepChangeEvent":this._handleIframeMessage_slideOrStepChangeEvent(t,n,n.action);break;case"autoPlayVideoInNewPpt":this._handleIframeMessage_autoPlayVideoInNewPpt(t,n);break;case"clinetAudioPlayer":this._handleIframeMessage_autoPlayAudioInNative(t,n);break;case"clickNewpptTriggerEvent":this._handleIframeMessage_clickNewpptTriggerEvent(e,t,n);break;case"allVideoAndAudio":case"clickLink":break;case"againReconnect":if(L.Logger.warning("[dynamic ppt]again reconnect info from dynamic ppt inner, again reconnect number is "+t.againreconnectNum),t.againreconnectNum++,t.againreconnectNum<=1)t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("reloadCurrentDocument",{id:t.id,iframeSrc:t.iframeSrc,fileid:t.fileid,forceReloadNumber:t.forceReloadNumber,isAgainreconnect:!0});else{t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement);break}}}}}},{key:"_handleIframeMessage_initEvent",value:function(e,t){if(clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.remoteData.pptview=t.view,e.remoteData.pptslidesCount=t.slidesCount,e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&(e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),e.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height}),e.handler.receiveActionCommandCallback("dynamicPptLoadEnd",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height,reloadNumber:e.forceReloadNumber,success:!0})),e.isLoadFinished||(e.isLoadFinished=!0,void 0!==e.awitJumpToAnimPptslide&&(this._jumpToAnimation(e,e.awitJumpToAnimPptslide,e.awitJumpToAnimPptstep),e.awitJumpToAnimPptslide=void 0,e.awitJumpToAnimPptstep=void 0,delete e.awitJumpToAnimPptslide,delete e.awitJumpToAnimPptstep)),e.awitExecutePostMessageArray&&0<e.awitExecutePostMessageArray.length){var o=!0,n=!1,i=void 0;try{for(var a=e.awitExecutePostMessageArray[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var r=r.value;this._postMessage(e,r)}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}}e.awitExecutePostMessageArray.length=0,this._hideLoading(e)}},{key:"_handleIframeMessage_slideOrStepChangeEvent",value:function(e,t,o){if(e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("slideChangeEvent"===o?"dynamicPptSlideChange":"dynamicPptStepChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),0<Object.keys(e.dynamicPptActionJson).length&&e.dynamicPptActionJson[e.remoteData.pptslide]&&0!==e.dynamicPptActionJson[e.remoteData.pptslide].length){var n=!0,i=!1,a=void 0;try{for(var r=e.dynamicPptActionJson[e.remoteData.pptslide][Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var s=s.value;this._postMessage(e,s)}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}e.dynamicPptActionJson[e.remoteData.pptslide].length=0,delete e.dynamicPptActionJson[e.remoteData.pptslide]}t.externalData&&t.externalData.initiative&&(this._sendSignalling_ShowPage(e,{data:{action:"slideChangeEvent"===o?"slide":"step"}}),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("closeAllSelectBox",{id:e.id}))}},{key:"_handleIframeMessage_autoPlayVideoInNewPpt",value:function(e,t){var o,n;e.handler&&e.handler.receiveActionCommandCallback&&(o=t.isvideo,n=t.url,t=t.fileid,t={id:e.id,url:n,video:o,audio:!0,attributes:{source:"dynamicPPT",filename:"",fileid:t}},e.handler.receiveActionCommandCallback("publishDymanicPptNetworkMedia",t))}},{key:"_handleIframeMessage_autoPlayAudioInNative",value:function(e,t){var o,n,i;e.handler&&e.handler.receiveActionCommandCallback&&(o=t.isPlay,n=t.url,i=t.fileid,t=function(e,t){var o,n={};for(o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["isPlay","url","fileid"]),t={id:e.id,url:n,isPlay:o,audio:!0,attributes:{source:"dynamicPPT",filename:"",fileid:i,type:"audio",other:t,currentPage:e.remoteData.pptslide}},e.handler.receiveActionCommandCallback("publishDymanicPptNetworkAudio",t))}},{key:"_handleIframeMessage_clickNewpptTriggerEvent",value:function(e,t,o){o.externalData&&o.externalData.initiative&&(o.fileid=t.fileid,o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"NewPptTriggerActionClick":"ExtendNewPptTriggerActionClick",id:"default"===e?"NewPptTriggerActionClick":"NewPptTriggerActionClick_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id}))}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.name,n=t.id,i=t.toID,a=void 0===i?"__all":i,r=t.data,s=t.do_not_save,l=t.expiresabs,i=t.associatedMsgID,t=t.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(i=i||e.associatedMsgID,t=t||e.associatedUserID,e.handler.sendSignallingToServer(o,n,a,r,s,l,i,t))}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadDynamicPptIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval)),e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber>=e.maxForceReloadNumber&&e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadDynamicPptFail",{id:e.id,forceReloadNumber:e.maxForceReloadNumber,success:!1})}},{key:"_sendSignalling_ShowPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:t})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.dynamicPptReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"ja":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.dynamicPptReloadNumberElement.innerHTML=t||""}},{key:"_setAgainreconnectInfo",value:function(e){if(e.againreconnectElement){var t=e.againreconnectElement.getElementsByClassName("top-box")[0],o=e.againreconnectElement.getElementsByClassName("ok-btn")[0];if(t||o){var n="加载有点慢......",i="点此继续";switch(e.languageType){case"tw":n="加載有點慢......",i="點此繼續";break;case"en":n="Loading a bit slow...",i="Click to continue";break;case"ja":n="インストールに時間がかかっています。...",i="続行する"}t&&(t.innerHTML=n),o&&(o.innerHTML=i)}}}}]),i);o.default=a},{}],335:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){var o,n={};for(o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.defaultProductionOptions={synchronizationH5Document:!0,h5DocumentActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.h5DocumentInstanceIDPrefix="h5Document_",this.h5DocumentInstanceDefaultID="h5Document_default",this.h5DocumentInstanceStore={},this.uniqueH5Document=!1,this.specialH5DocumentInstanceIDPrefix="specialH5DocumentInstanceIDPrefix_",this.isH5MediaOutputDominant=!1}var a=new(function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}(i,[{key:"productionH5Document",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.h5DocumentElementId,n=t.productionOptions,i=void 0===n?{}:n,a=t.handler,r=void 0===a?{}:a,s=t.id;if(o){var l=this._getH5DocumentInstanceID(s),d=this.getH5DocumentInstanceByID(l);if(d)return L.Logger.error("The production h5Document(h5DocumentInstanceID:"+l+") fails, the h5Document already exists!"),d;d={},i=Object.deepAssign({},this.defaultProductionOptions,i);var c=document.getElementById(o);if(!c)return L.Logger.error("H5Document elements do not exist , element id is:"+o+"!"),d;var u=document.createElement("div"),h=o+"_h5DocumentInstance";u.className="h5Document-instance-element",u.id=h,u.style.width="100%",u.style.height="100%";var m=document.createElement("iframe"),f=o+"_h5DocumentIframe";m.className="h5Document-iframe-element",m.id=f,m.name=o+"_h5DocumentIframeName",m.allowFullScreen=!0,m.allow="autoplay",m.frameborder=0,m.scrolling="no",m.width="1px",m.height="1px",m.style.width="1px",m.style.minWidth="100%",m.style.height="1px",m.style.minHeight="100%",m.style.border="none",m.style.padding="0",m.style.margin="0",u.appendChild(m);var p=document.createElement("div"),g=o+"_h5DocumentLoading";p.className="h5Document-loading-element talkcloud-loading",p.id=g;n=document.createElement("span");n.className="tk-loading-reload-number",n.style.display="none",p.appendChild(n),u.appendChild(p);a=document.createElement("div"),t=o+"_h5DocumentAction";return a.className="h5Document-action-element talkcloud-action",a.style.width="100%",a.style.height="100%",a.style.zIndex=98,a.style.display=i.h5DocumentActionClick?"none":"block",a.style.position="absolute",a.style.top="0",a.style.left="0",a.id=t,u.appendChild(a),u.appendChild(a),c.appendChild(u),(this.h5DocumentInstanceStore[l]=d).h5DocumentInstanceID=l,d.handler={},d.handler.sendSignallingToServer=r.sendSignallingToServer,d.handler.delSignallingToServer=r.delSignallingToServer,d.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,d.h5DocumentElementId=o,d.h5DocumentElement=c,d.h5DocumentInstanceElementId=h,d.h5DocumentInstanceElement=u,d.h5DocumentIframeElementId=f,d.h5DocumentIframeElement=m,d.h5DocumentLoadingElementId=g,d.h5DocumentLoadingElement=p,d.h5DocumentReloadNumberElement=n,d.h5DocumentActionElementId=t,d.h5DocumentActionElement=a,d.id=s,d.awitExecutePostMessageArray=[],d.h5DocumentActionJson={},d.associatedMsgID=i.associatedMsgID,d.associatedUserID=i.associatedUserID,d.synchronizationH5Document=i.synchronizationH5Document,d.h5DocumentActionClick=i.h5DocumentActionClick,d.forceReloadNumber=0,d.maxForceReloadNumber=i.maxForceReloadNumber,d.forceReloadInterval=i.forceReloadInterval,d.isShowReloadFileTip=i.isShowReloadFileTip,d.languageType=i.languageType,d.isH5MediaOutputDominant=i.isH5MediaOutputDominant,this.isH5MediaOutputDominant=i.isH5MediaOutputDominant,d.h5DocumentIframeElement.onload=function(){clearTimeout(d.forceReloadNumberTimer),d.forceReloadNumberTimer=null,d.iframeSrc&&!d.isLoadFinished&&d.forceReloadNumber<d.maxForceReloadNumber&&e._iframeReloadMonitor(d,"h5DocumentLoaded")},d}L.Logger.error("h5DocumentElementId is required!")}},{key:"destroyH5DocumentInstance",value:function(e){var t=this.getH5DocumentInstanceByID(e);t?this._destroyH5DocumentInstance(t):L.Logger.error("[destroy]There are no h5 document Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?t.source===o.h5DocumentIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no h5 document Numbers that belong to id "+e)}},{key:"hasH5DocumentById",value:function(e){e=this.getH5DocumentInstanceByID(e);return null!=e}},{key:"setH5DocumentIframeSrc",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=this.getH5DocumentInstanceByID(e),r=a.h5DocumentInstanceElement;if(a){var s="";a.isLoadFinished=!1,a.isReceivePagenum=!1,clearTimeout(a.h5DocumentActionTimer),clearTimeout(a.forceReloadNumberTimer),a.forceReloadNumberTimer=null,a.forceReloadNumber=i.forceReloadNumber||0;n=n.fileid;if(this.isH5MediaOutputDominant=o.isH5MediaOutput&&0==o.role,a.fileid=n,t){r.contains(a.h5DocumentIframeElement)||r.appendChild(a.h5DocumentIframeElement),s=t;var l=!1,d=!0,c=!1,u=void 0;try{for(var h=Object.entries(o)[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var m=f.value,f=p(m,2),m=f[0],f=f[1];l?s+="&"+m+"="+f:(l=!0,s+=(/\?/g.test(s)?"&":"?")+m+"="+f)}}catch(e){c=!0,u=e}finally{try{!d&&h.return&&h.return()}finally{if(c)throw u}}a.iframeSrc=s,this._showLoading(a),this._iframeReloadMonitor(a,"setH5DocumentIframeSrc")}else s="about:blank",r.contains(a.h5DocumentIframeElement)&&(a.h5DocumentIframeElement=r.removeChild(a.h5DocumentIframeElement)),a.iframeSrc=s,this._hideLoading(a);a.h5DocumentIframeElement.src=s,L.Logger.debug("set h5 document src:",s)}else L.Logger.error("[setH5DocumentIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"jumpToPage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._jumpToPage(o,t):L.Logger.error("[jumpToPage]There are no h5 document Numbers that belong to id "+e)}},{key:"nextPage",value:function(e){var t,o=this.getH5DocumentInstanceByID(e);o?o.isLoadFinished?(t=this._getWhiteboardFiledata(o))&&t.currpage>=t.pagenum?L.Logger.warning("[nextPage]h5 document is on the last page , cannot execute nextPage method."):(t={currpage:t.currpage+1},this._postMessage(o,{method:"onJumpPage",toPage:t.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(o,t),this._sendSignalling_ShowPage(o)):L.Logger.info("[nextPage]h5 document is not load finished  , cannot execute nextPage method"):L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"prevPage",value:function(e){var t,o=this.getH5DocumentInstanceByID(e);o?o.isLoadFinished?(t=this._getWhiteboardFiledata(o))&&t.currpage<=1?L.Logger.warning("[nextPage]h5 document is on page 1, cannot execute prevPage method."):(t={currpage:t.currpage-1},this._postMessage(o,{method:"onJumpPage",toPage:t.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(o,t),this._sendSignalling_ShowPage(o)):L.Logger.info("[prevPage]h5 document is not load finished  , cannot execute prevPage method"):L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"skipPage",value:function(e,t){var o,n=this.getH5DocumentInstanceByID(e);n?n.isLoadFinished?((o=this._getWhiteboardFiledata(n))&&t>o.pagenum&&(L.Logger.info("[skipPage]h5 document skip to page exceeds the maximum number of pages , change skip page  to 5(max page number)."),t=o.pagenum),t<1&&(L.Logger.info("[skipPage]h5 document skip to page less than the minimum page , change skip page  to 1(min page number)."),t=1),this._saveFiledataAndLoadCurrpageWhiteboardData(n,{currpage:t}),this._jumpToPage(n,t),this._sendSignalling_ShowPage(n)):L.Logger.info("[skipPage]h5 document is not load finished  , cannot execute skipPage method"):L.Logger.error("[skipPage]There are no h5 document Numbers that belong to id "+e)}},{key:"updateH5DocumentProperty",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationH5Document&&(o.synchronizationH5Document=t.synchronizationH5Document),void 0!==t.h5DocumentActionClick&&(o.h5DocumentActionClick=t.h5DocumentActionClick,o.h5DocumentActionElement.style.display=o.h5DocumentActionClick?"none":"block"),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o)),void 0!==t.isH5MediaOutputDominant&&(o.isH5MediaOutputDominant=t.isH5MediaOutputDominant)):L.Logger.error("[updateH5DocumentProperty]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessageH5DocumentTriggerAction",value:function(e,t){var o,n=this.getH5DocumentInstanceByID(e);n?(o=this._getWhiteboardFiledata(n),!t||null==t.fileid||void 0===t.currpage||o.fileid==t.fileid&&o.currpage===t.currpage?this._postMessage(n,t):(n.h5DocumentActionJson[t.currpage]=n.h5DocumentActionJson[t.currpage]||[],n.h5DocumentActionJson[t.currpage].push(t))):L.Logger.error("[postMessageH5DocumentTriggerAction]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no h5 document Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no h5 document Numbers that belong to id "+e)}},{key:"getH5DocumentInstanceByID",value:function(e){e=this._getH5DocumentInstanceID(e);return this.h5DocumentInstanceStore[e]}},{key:"_jumpToPage",value:function(e,t){var o,n,i;e.isLoadFinished&&(o=!1,n=t,(i=this._getWhiteboardFiledata(e))&&(i.currpage>i.pagenum&&(i.currpage=i.pagenum,o=!0,t=i.currpage),i.currpage<1&&(i.currpage=1,o=!0,t=i.currpage),n=i.currpage),o&&(i={},o&&(i.currpage=n),this._saveFiledataAndLoadCurrpageWhiteboardData(e,i)),null==t||isNaN(t)||(t={method:"onJumpPage",toPage:t},this._postMessage(e,t)))}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{var o;e.h5DocumentIframeElement&&e.h5DocumentIframeElement.src&&(o=t,o=JSON.stringify(o),e.h5DocumentIframeElement&&e.h5DocumentIframeElement.contentWindow&&e.h5DocumentIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]h5 document postMessage instanceId is "+e.id+",sendData:"+o),e.h5DocumentIframeElement.contentWindow.postMessage(o,"*")))}catch(e){L.Logger.error("[_postMessage] h5 document postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.h5DocumentLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.h5DocumentLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getH5DocumentInstanceID",value:function(e){var t=this.uniqueH5Document||null==e?this.h5DocumentInstanceDefaultID:this.h5DocumentInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(this.specialH5DocumentInstanceIDPrefix,"g").test(e)&&(t=e),t}},{key:"_destroyH5DocumentInstance",value:function(e){var t=e.h5DocumentInstanceID,o=e.h5DocumentElement;o?o.innerHTML="":L.Logger.warning("[destroy] h5Document elements do not exist , element id is:"+e.h5DocumentElementId+"!");var n=!0,i=!1,a=void 0;try{for(var r=Object.keys(e)[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var s=s.value;e[s]=null,delete e[s]}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}this.h5DocumentInstanceStore[t]=null,delete this.h5DocumentInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){if(o.data){var n=void 0;try{n=JSON.parse(o.data)}catch(e){return void L.Logger.warning("h5 document receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(n.method||"tk_h5Document"===n.source){L.Logger.debug("[h5Document]receive remote iframe data form "+o.origin+":",o);switch(n.method){case"onLoadComplete":this._handleIframeMessage_onLoadComplete(t,n);break;case"onPagenum":this._handleIframeMessage_onPagenum(t,n);break;case"onFileMessage":this._handleIframeMessage_onFileMessage(e,t,n);break;case"onJumpPage":if(!n.toPage||"number"!=typeof n.toPage)return void L.Logger.warning("h5 document toPage is not a number , toPage:",n.toPage);t.handler.receiveActionCommandCallback("h5DocumentOnJumpPage",{id:t.id,toPage:n.toPage});break;case"clinetAudioPlayer":if(!t.isH5MediaOutputDominant)return;this._handleIframeMessage_autoPlayAudioInNative(t,n.data);break;case"clinetVideoPlayer":if(!t.isH5MediaOutputDominant)return;this._handleIframeMessage_autoPlayVideoInNative(t,n.data)}}}}},{key:"_handleIframeMessage_autoPlayAudioInNative",value:function(e,t){var o,n,i,a,r,s;e.handler&&e.handler.receiveActionCommandCallback&&(s=this._getWhiteboardFiledata(e),o=t.isPlay,n=t.url,i=t.fileid,a=t.status,r=c(t,["isPlay","url","fileid","status"]),s={id:e.id,url:n,isPlay:o,status:a,audio:!0,attributes:d({},t,{source:"h5Document",filename:"",fileid:i,type:"audio",other:r,currentPage:s.currpage})},e.handler.receiveActionCommandCallback("publishH5DocumentNetworkMedia",s))}},{key:"_handleIframeMessage_autoPlayVideoInNative",value:function(e,t){var o,n=this._getWhiteboardFiledata(e),i=t.isPlay,a=t.url,r=t.status,s=c(t,["isPlay","url","status"]),l=n.fileid;s.position&&(o=e.h5DocumentIframeElement,s.position.height=s.position.height/o.offsetHeight||1,s.position.width=s.position.width/o.offsetWidth||1,s.position.top=s.position.top/o.offsetHeight||0,s.position.left=s.position.left/o.offsetWidth||0);n={id:e.id,url:a,video:!0,isPlay:i,status:r,audio:!0,attributes:d({},t,{source:"h5Document",filename:"",fileid:l,type:"video",other:s,currentPage:n.currpage})};e.handler.receiveActionCommandCallback("publishH5DocumentNetworkMedia",n)}},{key:"_handleIframeMessage_onLoadComplete",value:function(a,e){var r,s=this;if(clearTimeout(a.forceReloadNumberTimer),a.forceReloadNumberTimer=null,a.handler&&a.handler.receiveActionCommandCallback&&(a.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:a.id,scale:e.coursewareRatio||16/9}),a.handler.receiveActionCommandCallback("h5DocumentLoadEnd",{id:a.id,scale:e.coursewareRatio||16/9,reloadNumber:a.forceReloadNumber,success:!0})),a.isLoadFinished||(a.isLoadFinished=!0,!a.isReceivePagenum||(r=this._getWhiteboardFiledata(a))&&(this._jumpToPage(a,r.currpage),clearTimeout(a.h5DocumentActionTimer),a.h5DocumentActionTimer=setTimeout(function(){if(a.isLoadFinished&&(r=s._getWhiteboardFiledata(a),0<Object.keys(a.h5DocumentActionJson).length&&a.h5DocumentActionJson[r.currpage]&&0!==a.h5DocumentActionJson[r.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var n=a.h5DocumentActionJson[r.currpage][Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var i=i.value;s._postMessage(a,i)}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}a.h5DocumentActionJson[r.currpage].length=0,delete a.h5DocumentActionJson[r.currpage]}},100))),a.awitExecutePostMessageArray&&0<a.awitExecutePostMessageArray.length){var t=!0,o=!1,n=void 0;try{for(var i=a.awitExecutePostMessageArray[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){var l=l.value;this._postMessage(a,l)}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}}a.awitExecutePostMessageArray.length=0,this._hideLoading(a)}},{key:"_handleIframeMessage_onPagenum",value:function(a,e){var r=this,t=e.totalPages,o=!1,e=1,s=this._getWhiteboardFiledata(a);s&&(s.pagenum=t,s.currpage>s.pagenum&&(s.currpage=s.pagenum,o=!0),s.currpage<1&&(s.currpage=1,o=!0),e=s.currpage);t={pagenum:t};o&&(t.currpage=e),o?this._saveFiledataAndLoadCurrpageWhiteboardData(a,t):this._updateWhiteboardFiledata(a,t),a.isLoadFinished&&!a.isReceivePagenum&&(s=this._getWhiteboardFiledata(a))&&(this._jumpToPage(a,s.currpage),clearTimeout(a.h5DocumentActionTimer),a.h5DocumentActionTimer=setTimeout(function(){if(a.isLoadFinished&&(s=r._getWhiteboardFiledata(a),0<Object.keys(a.h5DocumentActionJson).length&&a.h5DocumentActionJson[s.currpage]&&0!==a.h5DocumentActionJson[s.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var n=a.h5DocumentActionJson[s.currpage][Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var i=i.value;r._postMessage(a,i)}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}a.h5DocumentActionJson[s.currpage].length=0,delete a.h5DocumentActionJson[s.currpage]}},100)),a.isReceivePagenum=!0}},{key:"_handleIframeMessage_onFileMessage",value:function(e,t,o){o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"H5DocumentAction":"ExtendH5DocumentAction",id:"default"===e?"H5DocumentAction":"H5DocumentAction_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id})}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.name,n=t.id,i=t.toID,a=void 0===i?"__all":i,r=t.data,s=t.do_not_save,l=t.expiresabs,i=t.associatedMsgID,t=t.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(i=i||e.associatedMsgID,t=t||e.associatedUserID,e.handler.sendSignallingToServer(o,n,a,r,s,l,i,t))}},{key:"_getWhiteboardFiledata",value:function(e){var t=void 0;return e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("getWhiteboardFiledata",{id:e.id,callback:function(e){t=e}}),t}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("saveFiledataAndLoadCurrpageWhiteboardData",{id:e.id,updateFileData:t})}},{key:"_updateWhiteboardFiledata",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardFiledata",{id:e.id,updateFileData:t})}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadH5DocumentIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval)),e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber>=e.maxForceReloadNumber&&e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("h5DocumentReloadFail",{id:e.id,reloadNumber:e.forceReloadNumber,success:!1})}},{key:"_sendSignalling_ShowPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:t})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.h5DocumentReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"en":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.h5DocumentReloadNumberElement.innerHTML=t||""}}]),i);o.default=a},{}],336:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("pdfobject"),l=(a=r)&&a.__esModule?a:{default:a};window.PDFObject=l.default,window.L&&window.L.Logger&&window.L.Logger.debug&&window.L.Logger.trace&&window.L.Logger.info&&window.L.Logger.warning&&window.L.Logger.error||(window.L=window.L||{},window.L.Logger=window.L.Logger||{},window.L.Logger.debug=window.L.Logger.debug||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)},window.L.Logger.trace=window.L.Logger.trace||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},window.L.Logger.info=window.L.Logger.info||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},window.L.Logger.warning=window.L.Logger.warning||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},window.L.Logger.error=window.L.Logger.error||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)}),Object&&Object.shallowAssign&&Object&&Object.customAssign||(e=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){var o=void 0;try{o=Array.isArray(t)?t.slice(0):JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i&&"object"===(void 0===i?"undefined":c(i)))for(var a in i)o[a]=i[a]}if("object"===(void 0===o?"undefined":c(o)))for(var r in o)t[r]=o[r];return t}},Object&&Object.shallowAssign||(Object.shallowAssign=e),Object&&Object.customAssign||(Object.customAssign=e)),Object&&Object.deepAssign||(Object.deepAssign=function(t){var o=void 0;if("object"!==(void 0===t?"undefined":c(t))||Array.isArray(t))o="object"===(void 0===t?"undefined":c(t))&&Array.isArray(t)?t.slice(0):t;else try{o=JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n&&"object"===(void 0===n?"undefined":c(n)))for(var i in n)void 0===o[i]?"object"===c(n[i])?Array.isArray(n[i])?o[i]=n[i].slice(0):o[i]=JSON.parse(JSON.stringify(n[i])):o[i]=n[i]:"object"===c(n[i])?o[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},"object"===c(o[i])?o[i]:Array.isArray(n[i])?[]:{},n[i]):o[i]=n[i]}if("object"===(void 0===o?"undefined":c(o)))for(var a in o)t[a]=o[a];return t}),String.prototype.colorHex=function(){if(/^(rgb|RGB)/.test(this)){for(var e=this.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),t="#",o=0;o<e.length;o++){var n=Number(e[o]).toString(16);"0"===n&&(n+=n),t+=n}return 7!==t.length&&(t=this),t}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(this))return this;var i=this.replace(/#/,"").split("");if(6===i.length)return this;if(3===i.length){for(var a="#",r=0;r<i.length;r+=1)a+=i[r]+i[r];return a}},String.prototype.colorRgb=function(){var e=this.toLowerCase();if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var t="#",o=1;o<4;o+=1)t+=e.slice(o,o+1).concat(e.slice(o,o+1));e=t}for(var n=[],i=1;i<7;i+=2)n.push(parseInt("0x"+e.slice(i,i+2)));return"RGB("+n.join(",")+")"}return e};var s=function(e,t,o,n){n=null!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,o,n):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},p=function(e,t,o,n){e.addEventListener?e.removeEventListener(t,o,n):e.attachEvent?e.detachEvent("on"+t,o):e["on"+t]=null};function d(){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,defaultWhiteboardScale:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!0,saveUndoStack:!0,remindContentTime:3e3,showShapeAuthor:!1,showMyselfRemindContent:!1,isOnlyUndoRedoClearMyselfShape:!1,synchronizationWhiteboard:!0},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.historyPenTool=void 0,this.historyShapeTool=void 0,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={}}n=new(n(d,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){/^tool_/.test(e)&&(this.commonActiveTool=e);var t=!0,o=!1,n=void 0;try{for(var i=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a=a.value;a.proprietaryTools||(a=a.id,this.activeWhiteboardTool(e,a))}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"===(void 0===e?"undefined":c(e))&&Object.deepAssign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"===(void 0===e?"undefined":c(e))&&Object.deepAssign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t,o,n,i=e.data.whiteboardID,a=this._getWhiteboardInstanceById(i);if(!a)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);!e||null==e.data||"shapeSaveEvent"!==e.data.eventType&&"clearEvent"!==e.data.eventType&&"redoEvent"!==e.data.eventType&&"laserMarkEvent"!==e.data.eventType||(e.source="pubmsg","laserMarkEvent"===e.data.eventType?this._receiveSnapshot(e,a):(t=e.id.substring(e.id.lastIndexOf("###_")+4))&&(t=(n=t.split("_"))[0]+"_"+n[1]+"_"+n[2],o=n[1],n=n[2],(i=this.getWhiteboardFiledata(i)).fileid==o&&i.currpage==n&&(this._receiveSnapshot(e,a),e.remindContent=e.data&&e.data.nickname||e.remindContent,a.showShapeAuthor&&e.remindContent&&e.fromID!=a.myselfId&&this._handlerShowRemoteRemindContentFromPubmsgData(a,e)),null!==a.waitingProcessShapeData[t]&&void 0!==a.waitingProcessShapeData[t]||(a.waitingProcessShapeData[t]=[]),a.waitingProcessShapeData[t].push(e)))}}},{key:"preloadWhiteboardImg",value:function(t,e){var o;t?((o=new Image).onload=function(){e&&"function"==typeof e&&e()},o.onerror=function(e){L.Logger.error("preload img  fail , img url is "+t)},o.src=t):L.Logger.warning("preload img url is not esixt!")}},{key:"productionWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.whiteboardElementId,o=e.thumbnailId,n=e.productionOptions,i=void 0===n?{}:n,a=e.handler,r=void 0===a?{}:a,s=e.id,l=this;if(t){var d=l._getWhiteboardInstanceID(s),c=l._getWhiteboardInstanceByID(d);if(c)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+d+") fails, the whiteboard already exists!"),c;c={};n=document.getElementById(t);if(!n)return L.Logger.error("Whiteboard elements do not exist , element id is:"+t+"!"),c;a=document.createElement("div"),e=t+"_whiteboardInstance";return a.className="whiteboard-instance-element",a.id=e,n.appendChild(a),i=Object.deepAssign({},l.defaultProductionOptions,i),(l.whiteboardInstanceStore[d]=c).filedata=i.filedata||this.getWhiteboardDefaultFiledata({fileid:"whiteboard_default"===d?0:s}),c.baseWhiteboardWidth=i.baseWhiteboardWidth,c.whiteboardInstanceID=d,c.parcelAncestorElementId=i.parcelAncestorElementId,c.isBaseboard=i.isBaseboard,c.needLooadBaseboard=i.needLooadBaseboard,c.dependenceBaseboardWhiteboardID=i.dependenceBaseboardWhiteboardID,c.defaultWhiteboardScale=i.defaultWhiteboardScale,c.watermarkImageScale=i.defaultWhiteboardScale,c.whiteboardMagnification=i.whiteboardMagnification,c.remindContentTime=i.remindContentTime,c.showShapeAuthor=i.showShapeAuthor,c.showMyselfRemindContent=i.showMyselfRemindContent,c.associatedMsgID=i.associatedMsgID,c.associatedUserID=i.associatedUserID,c.proprietaryTools=i.proprietaryTools,c.minHeight=i.minHeight,c.rotateDeg=i.rotateDeg,c.deawPermission=i.deawPermission,c.tempDeawPermission=i.tempDeawPermission,c.nickname=i.nickname,c.userid=i.userid,c.insertPictureRule=i.insertPictureRule||"default",c.synchronizationWhiteboard=i.synchronizationWhiteboard,c.whiteboardToolsInfo=Object.deepAssign({},l.whiteboardToolsInfo),i.primaryColor&&(c.whiteboardToolsInfo.primaryColor=i.primaryColor),i.secondaryColor&&(c.whiteboardToolsInfo.secondaryColor=i.secondaryColor),i.backgroundColor&&(c.whiteboardToolsInfo.backgroundColor=i.backgroundColor),i.pencilWidth&&(c.whiteboardToolsInfo.pencilWidth=i.pencilWidth),i.shapeWidth&&(c.whiteboardToolsInfo.shapeWidth=i.shapeWidth),i.eraserWidth&&(c.whiteboardToolsInfo.eraserWidth=i.eraserWidth),i.fontSize&&(c.whiteboardToolsInfo.fontSize=i.fontSize),i.fontFamily&&(c.whiteboardToolsInfo.fontFamily=i.fontFamily),i.fontStyle&&(c.whiteboardToolsInfo.fontStyle=i.fontStyle),i.fontWeight&&(c.whiteboardToolsInfo.fontWeight=i.fontWeight),c.saveRedoStack=i.saveRedoStack,c.saveUndoStack=i.saveUndoStack,c.imageThumbnailId=i.imageThumbnailId,c.imageThumbnailTipContent=i.imageThumbnailTipContent,c.registerWhiteboardToolsList={},c.stackStorage={},c.handler={},c.handler.sendSignallingToServer=r.sendSignallingToServer,c.handler.delSignallingToServer=r.delSignallingToServer,c.handler.resizeWhiteboardSizeCallback=r.resizeWhiteboardSizeCallback,c.handler.noticeUpdateToolDescCallback=r.noticeUpdateToolDescCallback,c.handler.noticeUpdateWhiteboardFiledataCallback=r.noticeUpdateWhiteboardFiledataCallback,c.handler.whiteboardWatermarkImageOnloadCallback=r.whiteboardWatermarkImageOnloadCallback,c.handler.whiteboardWatermarkImageOnFailureCallback=r.whiteboardWatermarkImageOnFailureCallback,c.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,c.active=!0,c.containerWidthAndHeight=i.containerWidthAndHeight,c.useImgOriginalSizeToContainerWidthAndHeight=i.useImgOriginalSizeToContainerWidthAndHeight,c.myselfId=i.myselfId,c.isOnlyUndoRedoClearMyselfShape=i.isOnlyUndoRedoClearMyselfShape,c.historyPenTool=this.historyPenTool,c.historyShapeTool=this.historyShapeTool,c.useToolKey=i.useToolKey,c.waitingProcessShapeData={},c.whiteboardElementId=t,c.whiteboardElement=n,c.whiteboardInstanceElementId=e,c.whiteboardInstanceElement=a,c.id=s,c.thumbnailId=o,c.lc=window.LC.init(c.whiteboardInstanceElement),c.lc.backingScale=1,c.lc.setColor("primary",c.whiteboardToolsInfo.primaryColor),c.lc.setColor("secondary",c.whiteboardToolsInfo.secondaryColor),c.lc.setColor("background",c.whiteboardToolsInfo.backgroundColor),c.lc.setWatermarkImageToLcBackground(!1),c.lc.setZoom(1),c.lc.setPan(0,0),c.lc.on("shapeSave",l._handlerShapeSaveEvent.bind(l,c)),c.lc.on("sendUndo",l._handlerUndoEvent.bind(l,c)),c.lc.on("sendRedo",l._handlerRedoEvent.bind(l,c)),c.lc.on("sendClear",l._handlerClearEvent.bind(l,c)),c.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(l,c)),c.activeTool=void 0,c.lc.myselfId=c.myselfId,c.lc.isOnlyUndoRedoClearMyselfShape=c.isOnlyUndoRedoClearMyselfShape,i.whiteboardClear&&l.clearWhiteboardAllDataById(s),l._changeWhiteboardDeawPermission(c.deawPermission,c),l._changeWhiteboardTemporaryDeawPermission(c.tempDeawPermission,c),l._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(c),l.activeWhiteboardTool(c.proprietaryTools?c.useToolKey||"tool_pencil":l.commonActiveTool,s),l._zoomIsDisable(c),l._actionIsDisable(c),l._noticeUpdateToolDesc(c),l._resizeWhiteboardHandler(c),l._noticeNpdateWhiteboardToolsInfo(c),c}L.Logger.error("whiteboardElementId is required!")}},{key:"changeWhiteboardExclusiveAttribute",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":c(t))){var o=this._getWhiteboardInstanceById(e);if(o)for(var n in t)o.hasOwnProperty(n)&&(o[n]=t[n],"myselfId"===n||"isOnlyUndoRedoClearMyselfShape"===n?o.lc&&(o.lc[n]=o[n]):"defaultWhiteboardScale"===n?o.currentWatermarkImageUrl||(o.watermarkImageScale=o.defaultWhiteboardScale,o.lc.watermarkImage=null,this._resizeWhiteboardHandler(o)):"insertPictureRule"===n&&this._resizeWhiteboardHandler(o));else L.Logger.error("[changeWhiteboardExclusiveAttribute]There are no white board Numbers that belong to id "+e)}}},{key:"updateImageThumbnailId",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?(o.imageThumbnailId=t,this._saveImageBase64ToImageThumbnail(o)):L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var o=t.saveRedoStack,n=t.saveUndoStack,t=this._getWhiteboardInstanceById(e);t?(t.saveRedoStack=void 0!==o?o:t.saveRedoStack,t.saveUndoStack=void 0!==n?n:t.saveUndoStack):L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"updateIsBaseboard",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.isBaseboard=t:L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e)}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.dependenceBaseboardWhiteboardID=t:L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e)}},{key:"updateShowRemindContent",value:function(e,t,o){var n=this._getWhiteboardInstanceById(e);n?(n.showShapeAuthor=t||n.showShapeAuthor,n.showMyselfRemindContent=o||n.showMyselfRemindContent):L.Logger.error("[updateShowRemindContent]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedMsgID=t:L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedUserID=t:L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e)}},{key:"hasWhiteboardById",value:function(e){e=this._getWhiteboardInstanceById(e);return null!=e}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._clearWhiteboardAllDataByInstance(t):L.Logger.error("[clear]There are no white board Numbers that belong to id "+e)}},{key:"productionSpecialId",value:function(e){return this.specialWhiteboardInstanceIDPrefix+e}},{key:"destroyWhiteboardInstance",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._destroyWhiteboardInstance(t):L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e)}},{key:"clearRedoAndUndoStack",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._clearRedoAndUndoStack(o,t):L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this._getWhiteboardInstanceById(e);t?(t.whiteboardMagnification=this.defaultProductionOptions.whiteboardMagnification,this._zoomIsDisable(t),this._resizeWhiteboardHandler(t)):L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardMagnification",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.whiteboardMagnification=t:L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardWatermarkImageScale",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultProductionOptions.watermarkImageScale,o=this._getWhiteboardInstanceById(e);o?this._updateWhiteboardWatermarkImageScale(o,t):L.Logger.error("[updateWhiteboardWatermarkImageScale]There are no white board Numbers that belong to id "+e)}},{key:"getFileExt",value:function(e){if(""!=e)return"."+e.replace(/.+\./,"")}},{key:"setWhiteboardWatermarkImage",value:function(e,o){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=t.resetDedaultWhiteboardMagnification,n=void 0===n||n,i=t.loadSucceedCallback,a=t.loadFailureCallback,r=this;L.Logger.debug("[setWhiteboardWatermarkImage]setWhiteboardWatermarkImage watermarkImageUrl:"+o);var s=r._getWhiteboardInstanceById(e);if(s)if(s.currentWatermarkImageUrl=o,n&&r.resetDedaultWhiteboardMagnification(e),o){if(r.showWhiteboardCanvasBackground(e),r._showWhiteboardLoading(s),".pdf"==r.getFileExt(o)&&l.default.supportsPDFs&&window.PDFObject)return s.lc.setPdf(o,function(){r._hideWhiteboardLoading(s)}),!1;clearTimeout(s.setWhiteboardWatermarkImageTimer),s.setWhiteboardWatermarkImageTimer=setTimeout(function(){var t=new Image;t.onload=function(){var e;s.currentWatermarkImageUrl?(e=t.width/t.height,s.useImgOriginalSizeToContainerWidthAndHeight&&(s.containerWidthAndHeight={width:t.width,height:t.height}),s.lc.setWatermarkImage(t),r._resizeWhiteboardByScale(s,{watermarkImage:t,watermarkImageScale:e}),s.handler.whiteboardWatermarkImageOnloadCallback&&"function"==typeof s.handler.whiteboardWatermarkImageOnloadCallback&&s.handler.whiteboardWatermarkImageOnloadCallback({width:t.width,height:t.height})):(s.lc.watermarkImage=null,r._resizeWhiteboardHandler(s)),r._hideWhiteboardLoading(s),i&&"function"==typeof i&&i(o)},t.onerror=function(e){L.Logger.error("img load fail , img url is "+o),a&&"function"==typeof a&&a(o),s&&s.handler&&s.handler.whiteboardWatermarkImageOnFailureCallback&&s.currentWatermarkImageUrl&&s.currentWatermarkImageUrl===o&&s.handler.whiteboardWatermarkImageOnFailureCallback(o)},t.src=o},150)}else r.hideWhiteboardCanvasBackground(e),s.lc.watermarkScale=1,r._resizeWhiteboardByScale(s,{isChangeWatermarkScale:!1}),r._hideWhiteboardLoading(s),s.lc.watermarkImage=null,s.lc.customCanvasBackgroundElement.style.backgroundImage="";else L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e)}},{key:"resizeWhiteboardHandler",value:function(e){if(void 0===e){var t=!0,o=!1,n=void 0;try{for(var i=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a=a.value;this._resizeWhiteboardHandler(a)}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}}else{var r=this._getWhiteboardInstanceById(e);r?this._resizeWhiteboardHandler(r):L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e)}}},{key:"updateContainerWidthAndHeight",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.width,n=t.height,t=this._getWhiteboardInstanceById(e);t?void 0!==o&&void 0!==n?(t.containerWidthAndHeight={width:o,height:n},this._resizeWhiteboardHandler(t)):L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+o+" , height:"+n+"]!"):L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="none",t.lc.customCanvasBackgroundElement.style.display="none"):L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="",t.lc.customCanvasBackgroundElement.style.display=""):L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboard",value:function(e){e=this._getWhiteboardInstanceById(e);e&&e.whiteboardElement&&(e.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){e=this._getWhiteboardInstanceById(e);e&&e.whiteboardElement&&(e.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.fontSize,n=t.fontFamily,i=t.fontStyle,a=t.fontWeight,t=this._getWhiteboardInstanceById(e);t?(t.whiteboardToolsInfo.fontSize=void 0!==o?o:t.whiteboardToolsInfo.fontSize,t.whiteboardToolsInfo.fontFamily=void 0!==n?n:t.whiteboardToolsInfo.fontFamily,t.whiteboardToolsInfo.fontStyle=void 0!==i?i:t.whiteboardToolsInfo.fontStyle,t.whiteboardToolsInfo.fontWeight=void 0!==a?a:t.whiteboardToolsInfo.fontWeight,this._noticeNpdateWhiteboardToolsInfo(t),this._updateTextFont(t)):L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e)}},{key:"updateEraserWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eraserWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.eraserWidth=void 0!==t?t:o.whiteboardToolsInfo.eraserWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updateEraserWidth(o)):L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e)}},{key:"updatePencilWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).pencilWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.pencilWidth=void 0!==t?t:o.whiteboardToolsInfo.pencilWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updatePencilWidth(o)):L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?t&&"object"===(void 0===t?"undefined":c(t))&&(Object.deepAssign(o.whiteboardToolsInfo,t),this._noticeNpdateWhiteboardToolsInfo(o)):L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"updateShapeWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).shapeWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.shapeWidth=void 0!==t?t:o.whiteboardToolsInfo.shapeWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updateShapeWidth(o)):L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateColor",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":c(t))){var o=this._getWhiteboardInstanceById(e);if(o){var n={},i=!0,a=!1,r=void 0;try{for(var s=Object.entries(t)[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var l=d.value,d=f(l,2),l=d[0],d=d[1],l=l.replace(/Color/g,"");n[l]=d,o.whiteboardToolsInfo[l+"Color"]=d,this._noticeNpdateWhiteboardToolsInfo(o)}}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}this._updateColor(o,n)}else L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e)}}},{key:"getActiveTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return t.activeTool;L.Logger.error("[getActiveTool]There are no white board Numbers that belong to id "+e)}},{key:"activeWhiteboardTool",value:function(e,t){var o,n,i,a=this;void 0!==a.useWhiteboardTool[e]?null!=t?(o=a._getWhiteboardInstanceById(t))?/^tool_/.test(e)?("tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"===e||"tool_dashed"===e?o.historyPenTool=e:"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||(o.historyShapeTool=e),o.activeTool=e,a._setWhiteboardTools(e,o),a._handlerActiveToolLaser(e,o),"tool_text"===e?a._updateTextFont(o):"tool_eraser"===e?a._updateEraserWidth(o):"tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"==e||"tool_dashed"===e?a._updatePencilWidth(o):"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||a._updateShapeWidth(o),"tool_ellipse_empty"===e||"tool_rectangle_empty"===e?o.lc.setColor("secondary","transparent"):"tool_rectangle"===e||"tool_ellipse"===e||"tool_polygon"===e?o.lc.setColor("secondary",o.whiteboardToolsInfo.primaryColor):o.lc.setColor("secondary",o.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e?(n=o.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)"),o.lc.setColor("primary",n)):o.lc.setColor("primary",o.whiteboardToolsInfo.primaryColor),o.handler.receiveActionCommandCallback&&o.handler.receiveActionCommandCallback("changeWhiteboardActiveTool",{id:o.id,activeTool:o.activeTool}),this._toolIsUse(o)):/^action_/.test(e)?("action_undo"===e?(n=o.isOnlyUndoRedoClearMyselfShape&&o.myselfId?o.myselfId:void 0,o.synchronizationWhiteboard?o.lc.sendUndo(n):o.lc.undo()):"action_redo"===e?(i=o.isOnlyUndoRedoClearMyselfShape&&o.myselfId?o.myselfId:void 0,o.synchronizationWhiteboard?o.lc.sendRedo(i):o.lc.redo()):"action_clear"===e&&(i=o.isOnlyUndoRedoClearMyselfShape&&o.myselfId?o.myselfId:void 0,o.synchronizationWhiteboard?o.lc.sendClear(i):o.lc.clear()),a._actionIsDisable(o)):/^zoom_/.test(e)&&("zoom_big"===e?o.whiteboardMagnification<a.maxMagnification&&(o.whiteboardMagnification+=.5):"zoom_small"===e?o.whiteboardMagnification>a.minMagnification&&(o.whiteboardMagnification-=.5):"zoom_default"===e&&(o.whiteboardMagnification=a.defaultProductionOptions.whiteboardMagnification),o.whiteboardMagnification>a.maxMagnification?o.whiteboardMagnification=a.maxMagnification:o.whiteboardMagnification<a.minMagnification&&(o.whiteboardMagnification=a.minMagnification),a._zoomIsDisable(o),a._resizeWhiteboardHandler(o)):L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t):L.Logger.error("[activeWhiteboardTool]id is undefined or null "):L.Logger.error("The whiteboard does not have the "+e+" tool!")}},{key:"useHistoryPenTool",value:function(e){var t=this._getWhiteboardInstanceById(e);t?(t=t.historyPenTool||"tool_pencil",this.activeWhiteboardTool(t,e)):L.Logger.error("[useHistoryPenTool]There are no white board Numbers that belong to id "+e)}},{key:"useHistoryShapeTool",value:function(e){var t=this._getWhiteboardInstanceById(e);t?(t=t.historyShapeTool||"tool_rectangle",this.activeWhiteboardTool(t,e)):L.Logger.error("[useHistoryShapeTool]There are no white board Numbers that belong to id "+e)}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardTemporaryDeawPermission(e,o):L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"updateWhiteboardProperty",value:function(e,t){var o=this;if(t&&"object"===(void 0===t?"undefined":c(t))){var n,i=this._getWhiteboardInstanceById(e);if(i){if(void 0!==t.deawPermission&&o.changeWhiteboardDeawPermission(t.deawPermission,e),void 0!==t.showShapeAuthor&&o.changeWhiteboardExclusiveAttribute(e,{showShapeAuthor:t.showShapeAuthor}),void 0!==t.myselfId&&o.changeWhiteboardExclusiveAttribute(e,{myselfId:t.myselfId}),void 0!==t.isOnlyUndoRedoClearMyselfShape&&o.changeWhiteboardExclusiveAttribute(e,{isOnlyUndoRedoClearMyselfShape:t.isOnlyUndoRedoClearMyselfShape}),void 0!==t.nickname&&o.changeWhiteboardExclusiveAttribute(e,{nickname:t.nickname}),void 0!==t.primary||void 0!==t.secondary||void 0!==t.background||void 0!==t.primaryColor||void 0!==t.secondaryColor||void 0!==t.backgroundColor){var a,r={};for(a in t)"primary"!==a&&"secondary"!==a&&"background"!==a&&"primaryColor"!==a&&"secondaryColor"!==a&&"backgroundColor"!==a||(r[a]=t[a]);o.updateColor(e,r)}void 0!==t.synchronizationWhiteboard&&o.changeWhiteboardExclusiveAttribute(e,{synchronizationWhiteboard:t.synchronizationWhiteboard}),void 0!==t.defaultWhiteboardScale&&o.changeWhiteboardExclusiveAttribute(e,{defaultWhiteboardScale:t.defaultWhiteboardScale}),void 0!==t.associatedMsgID&&o.updateWhiteboardAssociatedMsgID(e,t.associatedMsgID),void 0!==t.associatedUserID&&o.updateWhiteboardAssociatedUserID(e,t.associatedUserID),void 0===t.pencilWidth&&void 0===t.shapeWidth&&void 0===t.eraserWidth&&void 0===t.fontSize&&void 0===t.fontFamily||(n={},void 0!==t.pencilWidth&&(n.pencilWidth=Number(t.pencilWidth)),void 0!==t.shapeWidth&&(n.shapeWidth=Number(t.shapeWidth)),void 0!==t.eraserWidth&&(n.eraserWidth=Number(t.eraserWidth)),void 0!==t.fontSize&&(n.fontSize=Number(t.fontSize)),void 0!==t.fontFamily&&(n.fontFamily=t.fontFamily),this.updateWhiteboardToolsInfo(e,n),void 0===t.fontSize&&void 0===t.fontFamily||this.updateTextFont(e),void 0!==t.pencilWidth&&("tool_pencil"!==i.activeTool&&"tool_highlighter"!==i.activeTool&&"tool_line"!==i.activeTool&&"tool_arrow"!==i.activeTool&&"tool_dashed"!==i.activeTool||this.updatePencilWidth(e)),void 0!==t.shapeWidth&&("tool_rectangle"!==i.activeTool&&"tool_rectangle_empty"!==i.activeTool&&"tool_ellipse"!==i.activeTool&&"tool_ellipse_empty"!==i.activeTool&&"tool_polygon"!==i.activeTool||this.updateShapeWidth(e)),void 0!==t.eraserWidth&&"tool_eraser"===i.activeTool&&this.updateEraserWidth(e)),void 0!==t.insertPictureRule&&o.changeWhiteboardExclusiveAttribute(e,{insertPictureRule:t.insertPictureRule})}else L.Logger.error("[updateWhiteboardProperty]There are no white board Numbers that belong to id "+e)}}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardDeawPermission(e,o):L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"registerWhiteboardTools",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":c(t))){var o=this._getWhiteboardInstanceById(e);if(o){var n={},i=!0,a=!1,r=void 0;try{for(var s=Object.entries(t)[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var l=d.value,d=f(l,2),l=d[0],d=d[1];void 0!==this.useWhiteboardTool[l]?(n[l]=this._productionToolDesc(l,d),this.useWhiteboardTool[l]=!0):L.Logger.warning("The whiteboard does not have the "+l+" tool!")}}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}o.registerWhiteboardToolsList=n,o.isRegisterWhiteboardTool=!0,this._zoomIsDisable(o),this._zoomIsDisable(o),this._noticeUpdateToolDesc(o)}else L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e)}else L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!")}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return!!(t.filedata&&"object"===c(t.filedata)&&0<Object.keys(t.filedata).length);L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardFiledata",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._updateWhiteboardFiledata(o,t):L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"getRegisterWhiteboardToolsList",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.registerWhiteboardToolsList);L.Logger.error("[getRegisterWhiteboardToolsList]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"number"!=typeof t.filedata.currpage&&(t.filedata.currpage=Number(t.filedata.currpage)),"number"!=typeof t.filedata.pagenum&&(t.filedata.pagenum=Number(t.filedata.pagenum)),"number"!=typeof t.filedata.pptslide&&(t.filedata.pptslide=Number(t.filedata.pptslide)),"number"!=typeof t.filedata.pptstep&&(t.filedata.pptstep=Number(t.filedata.pptstep)),"number"!=typeof t.filedata.steptotal&&(t.filedata.steptotal=Number(t.filedata.steptotal)),Object.deepAssign({},t.filedata);L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"clearWhiteboardDataByFileidAndCurrpage",value:function(e,t,o){var n=this._getWhiteboardInstanceById(e);n?null!=t&&null!==o&&(n.waitingProcessShapeData["SharpsChange_"+t+"_"+o]=void 0,n.stackStorage["redoStack_"+t+"_"+o]=void 0,n.stackStorage["undoStack_"+t+"_"+o]=void 0,delete n.waitingProcessShapeData["SharpsChange_"+t+"_"+o],delete n.stackStorage["redoStack_"+t+"_"+o],delete n.stackStorage["undoStack_"+t+"_"+o]):L.Logger.error("[clearWhiteboardDataByFileidAndCurrpage]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e){var t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=o.loadRedoStack,i=void 0===n||n,a=o.callback,r=this._getWhiteboardInstanceById(e);r?(this._clearRedoAndUndoStack(r),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(r),n=(t=r.filedata).fileid,o=t.currpage,void 0===r.waitingProcessShapeData||null===r.waitingProcessShapeData?r.waitingProcessShapeData={}:null!=(t=r.waitingProcessShapeData["SharpsChange_"+n+"_"+o])&&0<t.length&&this._batchReceiveSnapshot(t,r),!i||(o=r.stackStorage["redoStack_"+n+"_"+o])&&0<o.length&&(r.lc.redoStack=o),this._actionIsDisable(r),a&&"function"==typeof a&&a()):L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e)}},{key:"saveWhiteboardStackToStorage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.saveRedoStack,n=t.saveUndoStack,i=this._getWhiteboardInstanceById(e);i?(o=void 0!==o?o:i.saveRedoStack,n=void 0!==n?n:i.saveUndoStack,n=(t=this.getWhiteboardFiledata(e)).fileid,t=t.currpage,o&&(i.stackStorage["redoStack_"+n+"_"+t]=i.lc.redoStack.slice(0))):L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._showWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._hideWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState;L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e)}},{key:"checkWhiteboardCanvasSize",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).isResize,o=void 0!==t&&t,t=this._getWhiteboardInstanceById(e);if(t)return t.lc&&t.lc.canvas?(0===t.lc.canvas.width||0===t.lc.canvas.height)&&(o&&this._resizeWhiteboardHandler(t),!0):void 0;L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e){var t,o,n,i,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"png",r=this._getWhiteboardInstanceById(e);r?(t=(t=this._convertCanvasToImageBase64(r,a)).replace("image/"+a.toLocaleLowerCase().replace(/jpg/i,"jpeg").match(/png|jpeg|bmp|gif/)[0],"image/octet-stream"),r=(r.nickname?r.nickname+"_":"")+r.id+"_"+(new Date).getTime()+"."+a,o=t,n=r,(i=document.createElementNS("http://www.w3.org/1999/xhtml","a")).href=o,i.download=n,(n=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(n)):L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardToolsInfo",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.whiteboardToolsInfo);L.Logger.error("[getWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"_clearRedoAndUndoStack",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.clear,n=void 0===o||o,o=t.redo,o=void 0===o||o,t=t.undo,t=void 0===t||t,i=this;n&&i._clearLc(e,{triggerEvent:!1}),o&&i._clearLcRedoStack(e),t&&i._clearLcUndoStack(e),i._actionIsDisable(e),setTimeout(function(){i._resizeWhiteboardHandler(e)},0)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"===(void 0===t?"undefined":c(t))&&(void 0!==t.currpage&&(t.currpage=Number(t.currpage)),void 0!==t.pagenum&&(t.pagenum=Number(t.pagenum)),void 0!==t.pptslide&&(t.pptslide=Number(t.pptslide)),void 0!==t.pptstep&&(t.pptstep=Number(t.pptstep)),void 0!==t.steptotal&&(t.steptotal=Number(t.steptotal)),Object.deepAssign(e.filedata,t),e.filedata.baseurl=t.baseurl,e&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler.noticeUpdateWhiteboardFiledataCallback(e.filedata))}},{key:"_batchReceiveSnapshot",value:function(n,i){var a=this;Array.isArray(n)?(n.forEach(function(e,t){var o=!0;t===n.length-1&&(o=!1),a._handlerRemoteDataToWhiteboard(e,o,i)}),a._actionIsDisable(i)):L.Logger.error("shapesArray must be an array!")}},{key:"_receiveSnapshot",value:function(e,t){this._handlerRemoteDataToWhiteboard(e,!1,t),this._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=arguments[2];if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(o.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(o,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&o.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":if(o&&o.lc&&o.lc.undoStack&&0<o.lc.undoStack.length)for(var n=!1,i=o.lc.undoStack.length-1;0<=i;i--){var a=o.lc.undoStack[i];if("AddShapeAction"===a.actionName&&a.shapeId===e.data.shapeId&&(a.undo&&a.undo(),o.lc.undoStack.splice(i,1),n=!0),n)break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data)),o.lc.saveShape(e.data.data,!1,null,t,e.fromID,e.seq);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(o.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(o,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&o.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var r=!0,s=o.lc.undoStack.length-1;0<=s;s--)if(e.data.shapeId===o.lc.undoStack[s].shapeId){r=!1;break}if(r){for(var l=!1,d=o.lc.redoStack.length-1;0<=d;d--)if(e.data.shapeId===o.lc.redoStack[d].shapeId){l=!0;break}l?o.lc.redo(!1,e.data.shapeId):(e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data)),h=void 0===(h=e.data.otherInfo)?{authorUserId:e.fromID,seq:e.seq}:h,o.lc.saveShape(e.data.data,!1,null,t,h.authorUserId,h.seq))}}else if(e.data.actionName&&"ClearAction"===e.data.actionName){for(var c=!0,u=o.lc.undoStack.length-1;0<=u;u--)if(e.data.clearActionId===o.lc.undoStack[u].id){c=!1;break}if(c){for(var h,m=!1,f=o.lc.redoStack.length-1;0<=f;f--)if(e.data.clearActionId===o.lc.redoStack[f].id){m=!0;break}m?o.lc.redo(!1,e.data.clearActionId):(h=void 0===(h=e.data.otherInfo)?{authorUserId:e.fromID,toAuthorUserId:void 0,seq:e.seq}:h,o.lc.clear(!1,e.data.clearActionId,h.authorUserId,h.toAuthorUserId,h.seq)),this._removeAllRemindContent(o)}}break;case"clearEvent":o.lc.clear(!1,e.data.clearActionId,e.fromID,e.data.toAuthorUserId,e.seq),this._removeAllRemindContent(o);break;case"laserMarkEvent":var p,g,y=o.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":y.style.display="block";break;case"hide":y.style.display="none";break;case"move":e.data&&e.data.laser&&(p=e.data.laser.left,g=e.data.laser.top,y.style.left=p+"%",y.style.top=g+"%")}}}},{key:"_productionToolDesc",value:function(e,t){return{toolKey:e,disabled:!1}}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)}},{key:"_updateToolDesc",value:function(e,t,o){if(e.registerWhiteboardToolsList[t]){var n=!0,i=!1,a=void 0;try{for(var r=Object.entries(o)[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var s=l.value,l=f(s,2),s=l[0],l=l[1];void 0!==e.registerWhiteboardToolsList[t][s]&&(e.registerWhiteboardToolsList[t][s]=l)}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}}var d=!0,c=!1,u=void 0;try{for(var h=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var m=m.value;/tool_/g.test(m)?e.registerWhiteboardToolsList[m].isUse=m===e.activeTool:/zoom_/g.test(m)&&(e.registerWhiteboardToolsList[m].zoom=e.whiteboardMagnification)}}catch(e){c=!0,u=e}finally{try{!d&&h.return&&h.return()}finally{if(c)throw u}}}},{key:"_batchUpdateToolDesc",value:function(e,t){if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a=t[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var r=r.value;Array.isArray(r)&&this._updateToolDesc(e,r[0],r[1])}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}}else L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!")}},{key:"_setWhiteboardTools",value:function(o,e){var n=this;n._automaticTraverseWhiteboardInstance(e,function(e){var t=n._productionToolByCore(o,e);e.lc.setTool(t)})}},{key:"_productionToolByCore",value:function(e,t){var o=void 0;if(void 0===this.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),o;switch(e){case"tool_pencil":case"tool_highlighter":o=new window.LC.tools.Pencil(t.lc);break;case"tool_line":o=new window.LC.tools.Line(t.lc);break;case"tool_arrow":(o=new window.LC.tools.Line(t.lc)).hasEndArrow=!0;break;case"tool_dashed":(o=new window.LC.tools.Line(t.lc)).isDashed=!0;break;case"tool_eraser":o=new window.LC.tools.Eraser(t.lc);break;case"tool_text":o=new window.LC.tools.Text(t.lc);break;case"tool_rectangle":case"tool_rectangle_empty":o=new window.LC.tools.Rectangle(t.lc);break;case"tool_ellipse":case"tool_ellipse_empty":o=new window.LC.tools.Ellipse(t.lc);break;case"tool_polygon":o=new window.LC.tools.Polygon(t.lc);break;case"tool_eyedropper":o=new window.LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":o=new window.LC.tools.SelectShape(t.lc);break;case"tool_mouse":case"tool_laser":o=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),o=t.lc.tool}return o}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this.uniqueWhiteboard||null==e?this.whiteboardInstanceDefaultID:this.whiteboardInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(this.specialWhiteboardInstanceIDPrefix,"g").test(e)&&(t=e),t}},{key:"_getWhiteboardInstanceById",value:function(e){e=this._getWhiteboardInstanceID(e);return this.whiteboardInstanceStore[e]}},{key:"_getWhiteboardInstanceByID",value:function(e){return this.whiteboardInstanceStore[e]}},{key:"_resizeWhiteboardByScale",value:function(e){var t,o,n,i,a,r,s,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=l.watermarkImage,c=l.isChangeCanvas,u=void 0===c||c,h=l.isChangeWatermarkScale,m=void 0===h||h,f=void 0!==(f=l.watermarkImageScale)?f:e.watermarkImageScale,p=e.lc;p&&(t=e.whiteboardElement,s=e.whiteboardInstanceElement,o=e.containerWidthAndHeight.width,n=e.containerWidthAndHeight.height,!e.parcelAncestorElementId||(r=document.getElementById(e.parcelAncestorElementId))&&(o=r.clientWidth,n=r.clientHeight),i={},a={},r=l=h=c=0,n*f<o?(c=Math.round(n*f*e.whiteboardMagnification),h=Math.round(n*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&d&&d.width<o&&d.height<n&&(c=d.width,h=d.height),t.style.width=c+"px",t.style.height=h+"px",s.style.width=c+"px",s.style.height=h+"px",void 0!==e.minHeight&&null!==e.minHeight&&(l=e.minHeight*f,r=e.minHeight,t.style.minWidth=l+"px",t.style.minHeight=r+"px",s.style.minWidth=l+"px",s.style.minHeight=r+"px",a.minWidth=l+"px",a.minHegiht=r+"px"),a.top="0%",a.left="50%",a.marginTop="0px",a.marginLeft=-c/2+"px"):(c=Math.round(o*e.whiteboardMagnification),h=Math.round(o/f*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&d&&d.width<o&&d.height<n&&(c=d.width,h=d.height),t.style.width=c+"px",t.style.height=h+"px",s.style.width=c+"px",s.style.height=h+"px",void 0!==e.minHeight&&null!==e.minHeight&&(l=e.minHeight*f,r=e.minHeight,t.style.minWidth=l+"px",t.style.minHeight=r+"px",s.style.minWidth=l+"px",s.style.minHeight=r+"px",a.minWidth=l+"px",a.minHegiht=r+"px"),a.top="50%",a.left="0%",a.marginTop=-h/2+"px",a.marginLeft="0px"),a.width=c+"px",a.height=h+"px",u&&(p.respondToSizeChange(),f=((u=s.clientWidth)+(s=s.clientHeight))/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*f),p.setZoom(f),p.setPan(0,0),m&&d&&(s=(u/d.width+s/d.height)/2,"relativeOriginalSize"===e.insertPictureRule&&d&&d.width<o&&d.height<n&&(s=1),p.watermarkScale=s,p.setWatermarkImage(d))),i.style=a,i.addClassName=1<e.whiteboardMagnification?"custom-scroll-bar":"",i.loadScrollBar=1<e.whiteboardMagnification,e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback?e.handler.resizeWhiteboardSizeCallback(i):i=null)}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){var t=this;e?(e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},e.waitingProcessShapeData={},this._removeAllRemindContent(e),setTimeout(function(){t._resizeWhiteboardHandler(e)},0)):L.Logger.error("[_clear]The whiteboard instance does not exist!")}},{key:"_resizeWhiteboardHandler",value:function(e){var t,o;e&&e.lc&&((t=e.lc.watermarkImage)&&t.src?(o=t.width/t.height,this._resizeWhiteboardByScale(e,{watermarkImage:t,watermarkImageScale:o})):this._resizeWhiteboardByScale(e,{isChangeWatermarkScale:!1}),this._updateAllRemindContent(e))}},{key:"_updateWhiteboardWatermarkImageScale",value:function(e,t){e.watermarkImageScale=t,this._resizeWhiteboardHandler(e)}},{key:"_productionWhiteboardRemindContent",value:function(e,t,o,n,i){var a,r,s,l=this;if(e&&n)try{e&&e.lc&&e.lc.containerEl.parentNode&&"function"==typeof e.lc.drawingCoordsToClientCoords&&((a=e.lc.drawingCoordsToClientCoords(t,o))&&((r=document.createElement("span")).className="remind-content",r.style.position="absolute",r.style.left=a.x+"px",r.style.top=a.y+"px",r.innerHTML=n,s=i?"whiteboard_remind_"+i:"whiteboard_remind_"+(new Date).getTime(),r.setAttribute("data-position-x",t),r.setAttribute("data-position-y",o),r.setAttribute("id",s),e.lc.containerEl.parentNode.appendChild(r),setTimeout(function(){l._removeRemindContentByElementId(e,s),r=null},e.remindContentTime)))}catch(e){L.Logger.error("productionWhiteboardRemindContent error:",e)}}},{key:"_updateAllRemindContent",value:function(e){try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o],i=Number(n.getAttribute("data-position-x")),a=Number(n.getAttribute("data-position-y")),a=e.lc.drawingCoordsToClientCoords(i,a);n.style.left=a.x+"px",n.style.top=a.y+"px"}}}catch(e){L.Logger.error("updateAllRemindContent error:",e)}}},{key:"_removeRemindContentByElementId",value:function(e,t){e&&e.lc&&e.lc.containerEl.parentNode&&((t=document.getElementById(t))&&(t.innerHTML="",e.lc.containerEl.parentNode.removeChild(t),t=null))}},{key:"_removeAllRemindContent",value:function(e){if(e&&e.lc&&e.lc.containerEl.parentNode)try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=t.length-1;0<=o;o--){var n=t[o];n.innerHTML="",e.lc.containerEl.parentNode.removeChild(n),n=null}}}catch(e){L.Logger.error("removeAllRemindContent error:",e)}}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){var t,o;!e.imageThumbnailId||(t=document.getElementById(e.imageThumbnailId))&&"img"===t.nodeName.toLowerCase()&&(o=this._convertCanvasToImageBase64(e,"jpg"),t.src=o,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname))}},{key:"_destroyWhiteboardInstance",value:function(e){clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),this.basicTemplateWhiteboardSignallingList[e.id]&&(this.basicTemplateWhiteboardSignallingList[e.id]=null,delete this.basicTemplateWhiteboardSignallingList[e.id]),this._clearWhiteboardAllDataByInstance(e);var t=e.whiteboardInstanceID,o=e.whiteboardElement;e.lc&&"function"==typeof e.lc.teardown&&e.lc.teardown(),o?o.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");o=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;o&&(o.innerHTML="");var n=!0,i=!1,a=void 0;try{for(var r=Object.keys(e)[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var s=s.value;e[s]=null,delete e[s]}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}this.whiteboardInstanceStore[t]=null,delete this.whiteboardInstanceStore[t]}},{key:"_clearLc",value:function(e){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).triggerEvent;e&&e.lc?(e.lc.clear(!1),this._removeAllRemindContent(e)):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(o,e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.lc;t.isTmpDrawAble!==o&&(t.isTmpDrawAble=o,e=t.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0],t.isTmpDrawAble?(e.className=e.className.replace(/( yes| no)/g,""),e.className+=" yes"):(e.className=e.className.replace(/( yes| no)/g,""),e.className+=" no"))})}},{key:"_changeWhiteboardDeawPermission",value:function(o,e){this._automaticTraverseWhiteboardInstance(e,function(e){e.deawPermission=o;var t=e.lc;t.isDrawAble!==o&&(t.isDrawAble=o,e=t.containerEl.parentNode.getElementsByClassName("draw-permission")[0],t.isDrawAble?(e.className=e.className.replace(/( yes| no)/g,""),e.className+=" yes"):(e.className=e.className.replace(/( yes| no)/g,""),e.className+=" no"))})}},{key:"_handlerActiveToolLaser",value:function(e,t){var m=this;m._automaticTraverseWhiteboardInstance(t,function(c){var t=c.lc.containerEl.parentNode,u=t.getElementsByClassName("temporary-draw-permission")[0],h=t.getElementsByClassName("laser-mark")[0];"tool_laser"===e?(p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),c._laserEventHandler_mousemove=function(e){if("tool_laser"!==c.activeTool)return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(u,"mousemove",c._laserEventHandler_mousemove),!1;var t=e.pageX,o=e.pageY,n=u.getBoundingClientRect(),i=void 0,a=void 0,r=u.clientWidth,s=u.clientHeight;switch(c.rotateDeg){case 0:i=t-n.left,a=o-n.top;break;case 90:i=o-n.top,a=s-(t-n.left);break;case 180:i=r-(t-n.left),a=s-(o-n.top);break;case 270:i=r-(o-n.top),a=t-n.left;break;default:i=t-n.left,a=o-n.top}var l=i/r*100,d=a/s*100;return h.style.left=l+"%",h.style.top=d+"%",clearTimeout(c.laserTimer),c.laserTimer=setTimeout(function(){var e;c.laserPosition&&(.3<Math.abs(l-c.laserPosition.left)||.3<Math.abs(d-c.laserPosition.top))&&(e={laser:{left:l,top:d},action:{actionName:"move"}},c.laserPosition=e.laser,m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",e))},100),!1},c._laserEventHandler_mouseenter=function(e){if("tool_laser"!==c.activeTool)return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(t,"mouseenter",c._laserEventHandler_mouseenter),!1;return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"show"}}),!(h.style.display="block")},c._laserEventHandler_mouseleave=function(e){return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none","tool_laser"!==c.activeTool&&p(t,"mouseleave",c._laserEventHandler_mouseleave),!1},m._changeWhiteboardTemporaryDeawPermission(!1,c),c.selectLaserTool=!0,p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),u.className+=" cursor-none",c.laserPosition=c.laserPosition||{left:0,top:0},s(u,"mousemove",c._laserEventHandler_mousemove),s(t,"mouseenter",c._laserEventHandler_mouseenter),s(t,"mouseleave",c._laserEventHandler_mouseleave)):(m._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,c),p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),h.style.display="none",c.selectLaserTool&&(m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),c.selectLaserTool=!1))})}},{key:"_sendSignallingToServer",value:function(e){var t,o,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=n.idPrefix,a=n.data,r=n.name,s=n.assignId,l=n.do_not_save,d=n.expiresabs,c=n.associatedMsgID,u=n.associatedUserID;e?e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer&&(t=(o=e.filedata).currpage,n=o.fileid,void 0!==t&&void 0!==n?(a&&"string"==typeof a&&(a=JSON.parse(a)),a.whiteboardID=e.id,a.isBaseboard=e.isBaseboard,a.nickname=e.nickname,void 0!==e.dependenceBaseboardWhiteboardID&&(a.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),c=c||e.associatedMsgID,u=u||e.associatedUserID,o=s||i+"###_"+r+"_"+n+"_"+t,s="__allExceptSender","shapeSaveEvent"!==a.eventType&&"undoEvent"!==a.eventType&&"redoEvent"!==a.eventType&&"clearEvent"!==a.eventType||(s="__all"),i=Object.deepAssign({},a),"__all"!==s&&this._saveBasicTemplateWhiteboardSignallingData({name:r,id:o,toID:s,data:i,do_not_save:l,expiresabs:d,associatedMsgID:c,associatedUserID:u},"pubmsg"),e.handler.sendSignallingToServer(r,o,s,a,l,d,c,u)):L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+t+","+n+"]!")):L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!")}},{key:"_delSignallingToServer",value:function(e){var t,o,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=n.idPrefix,a=n.data,r=n.name,s=n.assignId;e?e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer&&(t=(o=e.filedata).currpage,n=o.fileid,void 0!==t&&void 0!==n?(a.whiteboardID=e.id,a.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(a.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),o=s||i+"###_"+r+"_"+n+"_"+t,s="__allExceptSender","shapeSaveEvent"!==a.eventType&&"undoEvent"!==a.eventType&&"redoEvent"!==a.eventType&&"clearEvent"!==a.eventType||(s="__all"),i=Object.deepAssign({},a),"__all"!==s&&this._saveBasicTemplateWhiteboardSignallingData({name:r,id:o,toID:s,data:i},"delmsg"),e.handler.delSignallingToServer(r,o,s,a)):L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+t+","+n+"]!")):L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!")}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,o){var n,i,a,r=void 0,s=void 0,l=void 0,d=void 0,c=void 0,u=void 0,h=void 0;switch(t){case"shapeSaveEvent":null==(u=window.LC.shapeToJSON(o.shape))||null==u.className||"LinePath"!=u.className&&"ErasedLinePath"!=u.className||(u.data.smoothedPointCoordinatePairs=null,delete u.data.smoothedPointCoordinatePairs,u.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})),h={eventType:t,actionName:o.action.actionName,shapeId:o.shapeId,data:u},r=o.shapeId,s=h,l="SharpsChange",c=d=void 0,this._sendSignallingToServer(e,{idPrefix:r,data:s,name:l,assignId:d,do_not_save:c});break;case"undoEvent":"AddShapeAction"===o.action.actionName?(r=n=o.action.shapeId,s=h={eventType:t,actionName:o.action.actionName,shapeId:n},l="SharpsChange",d=void 0,this._delSignallingToServer(e,{idPrefix:r,data:s,name:l,assignId:d})):"ClearAction"===o.action.actionName&&(r=i=o.action.id,s=h={eventType:t,actionName:o.action.actionName,clearActionId:i},l="SharpsChange",d=void 0,this._delSignallingToServer(e,{idPrefix:r,data:s,name:l,assignId:d}));break;case"redoEvent":"AddShapeAction"===o.action.actionName?(null==(u=window.LC.shapeToJSON(o.action.shape))||null==u.className||"LinePath"!=u.className&&"ErasedLinePath"!=u.className||(u.data.smoothedPointCoordinatePairs=null,delete u.data.smoothedPointCoordinatePairs,u.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})),a=o.action.shapeId,i={authorUserId:o.action.authorUserId,seq:o.action.seq},h={eventType:t,actionName:o.action.actionName,shapeId:a,data:u,otherInfo:i},0,this._sendSignallingToServer(e,{idPrefix:a,data:h,name:"SharpsChange",assignId:void 0,do_not_save:void 0})):"ClearAction"===o.action.actionName&&(a=o.action.id,m={authorUserId:o.action.authorUserId,seq:o.action.seq,toAuthorUserId:o.action.toAuthorUserId},r=a,s=h={eventType:t,actionName:o.action.actionName,clearActionId:a,otherInfo:m},l="SharpsChange",c=d=void 0,this._sendSignallingToServer(e,{idPrefix:r,data:s,name:l,assignId:d,do_not_save:c}));break;case"clearEvent":var m=o.clearActionId;r=m,s=h={eventType:t,actionName:o.action.actionName,clearActionId:m},l="SharpsChange",c=d=void 0,e&&e.isOnlyUndoRedoClearMyselfShape&&e.myselfId&&(h.toAuthorUserId=e.myselfId),this._sendSignallingToServer(e,{idPrefix:r,data:s,name:l,assignId:d,do_not_save:c});break;case"laserMarkEvent":h={eventType:t,actionName:o.action.actionName},o&&o.laser&&(h.laser=o.laser),r="laserMarkEvent",s=h,l="SharpsChange",c=!(d=void 0),this._sendSignallingToServer(e,{idPrefix:r,data:s,name:l,assignId:d,do_not_save:c})}}},{key:"_updateTextFont",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.fontSize,o=e.whiteboardToolsInfo.fontFamily,n=e.whiteboardToolsInfo.fontStyle,i=e.whiteboardToolsInfo.fontWeight,e=e.lc.tool;"Text"===e.name&&(e.font=n+" "+i+" "+t+"px "+o)})}},{key:"_updateEraserWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updatePencilWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateShapeWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateColor",value:function(e,s){s&&"object"===(void 0===s?"undefined":c(s))&&this._automaticTraverseWhiteboardInstance(e,function(e){var t=!0,o=!1,n=void 0;try{for(var i=Object.keys(s)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a,r=a.value.replace(/Color/g,"");e.lc.setColor(r,e.whiteboardToolsInfo[r+"Color"]),"primary"!==r&&"secondary"!==r||"tool_rectangle"!==e.activeTool&&"tool_rectangle_empty"!==e.activeTool&&"tool_ellipse"!==e.activeTool&&"tool_ellipse_empty"!==e.activeTool&&"tool_polygon"!==e.activeTool||("tool_ellipse_empty"===e.activeTool||"tool_rectangle_empty"===e.activeTool?e.lc.setColor("secondary","transparent"):e.lc.setColor("secondary",e.whiteboardToolsInfo.primaryColor)),"primary"===r&&"tool_highlighter"===e.activeTool&&(a=e.whiteboardToolsInfo[r+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)"),e.lc.setColor(r,a))}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}})}},{key:"_actionIsDisable",value:function(e){var n=this;n._automaticTraverseWhiteboardInstance(e,function(e){if(e.active){if(0===e.lc.shapes.length)n._batchUpdateToolDesc(e,[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]]),n._noticeUpdateToolDesc(e);else{var t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];if(e.isOnlyUndoRedoClearMyselfShape&&e.myselfId){t=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];for(var o=0;o<e.lc.shapes.length;o++)if(e.lc.shapes[o].authorUserId==e.myselfId){t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];break}}n._batchUpdateToolDesc(e,t),n._noticeUpdateToolDesc(e)}e.lc.canRedo()?n._updateToolDesc(e,"action_redo",{disabled:!1}):n._updateToolDesc(e,"action_redo",{disabled:!0}),n._noticeUpdateToolDesc(e),e.lc.canUndo()?n._updateToolDesc(e,"action_undo",{disabled:!1}):n._updateToolDesc(e,"action_undo",{disabled:!0}),n._noticeUpdateToolDesc(e)}})}},{key:"_zoomIsDisable",value:function(e){var t=this;t._automaticTraverseWhiteboardInstance(e,function(e){e.active&&(e.whiteboardMagnification<=t.minMagnification?t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]]):t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]]),t._noticeUpdateToolDesc(e),e.whiteboardMagnification>=t.maxMagnification?t._updateToolDesc(e,"zoom_big",{disabled:!0}):t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))})}},{key:"_toolIsUse",value:function(e){var t=!0,o=!1,n=void 0;try{for(var i=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a=a.value;/tool_/g.test(a)?e.registerWhiteboardToolsList[a].isUse=a===e.activeTool:/zoom_/g.test(a)&&(e.registerWhiteboardToolsList[a].zoom=e.whiteboardMagnification)}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}this._noticeUpdateToolDesc(e)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){if(e)t&&"function"==typeof t&&t(e);else{var o=!0,n=!1,i=void 0;try{for(var a=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var r=r.value;t&&"function"==typeof t&&t(r)}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,o=0;o<this.awaitSaveToWhiteboardInstanceSignallingArray.length;o++){var n,i,a=this.awaitSaveToWhiteboardInstanceSignallingArray[o];a.data&&"string"==typeof a.data&&(a.data=JSON.parse(a.data)),a.data.whiteboardID!==e.id||(i=a.id.substring(a.id.lastIndexOf("###_")+4))&&(i=(n=i.split("_"))[0]+"_"+n[1]+"_"+n[2],e.waitingProcessShapeData[i]||(e.waitingProcessShapeData[i]=[]),e.waitingProcessShapeData[i].push(a),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(o,1,null))}if(t)for(var r=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;0<=r;r--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[r]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(r,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"png";if(e&&e.lc&&e.lc.canvas){var o=e.lc.canvas,e=new Image;return e.src=o.toDataURL("image/"+t),e}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas)return e.lc.canvas.toDataURL("image/"+t)}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}},{key:"_handlerShowRemoteRemindContentFromPubmsgData",value:function(e,t){var o,n=void 0,i=void 0,a=void 0;"pubmsg"===t.source&&t.data&&"shapeSaveEvent"===t.data.eventType&&("LinePath"==t.data.data.className?(0<(o=t.data.data.points.length)&&(n=t.data.data.points[o-1].x,i=t.data.data.points[o-1].y,a=t.remindContent),this._productionWhiteboardRemindContent(e,n,i,a,t.data.shapeId)):"Rectangle"==t.data.data.className||"Ellipse"==t.data.data.className?(0<t.data.data.width&&0<t.data.data.height?(n=t.data.data.x+t.data.data.width,i=t.data.data.y):0<t.data.data.width&&t.data.data.height<0?(n=t.data.data.x+t.data.data.width,i=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height<0?(n=t.data.data.x,i=t.data.data.y+t.data.data.height):t.data.data.width<0&&0<t.data.data.height&&(n=t.data.data.x,i=t.data.data.y),a=t.remindContent,this._productionWhiteboardRemindContent(e,n,i,a,t.data.shapeId)):"Text"==t.data.data.className?(n=t.data.data.x+t.data.data.renderer.metrics.width,i=t.data.data.y+20*t.data.data.renderer.metricses.length,a=t.remindContent,this._productionWhiteboardRemindContent(e,n,i,a,t.data.shapeId)):"Line"==t.data.data.className&&(n=t.data.data.x2,i=t.data.data.y2,a=t.remindContent,this._productionWhiteboardRemindContent(e,n,i,a,t.data.shapeId)))}},{key:"_noticeNpdateWhiteboardToolsInfo",value:function(e){e.handler&&"function"==typeof e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardToolsInfo",{id:e.id,whiteboardToolsInfo:Object.deepAssign({},e.whiteboardToolsInfo)})}}]),d);o.default=n},{pdfobject:332}],337:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n={commonWhiteboard:{webAddress:"",docAddress:"",backupDocAddressList:[],myUserId:void 0,myRole:void 0,myName:void 0,isConnectedRoom:!1,isPlayback:!1,deviceType:void 0,clientType:void 0},defaultWhiteboard:{sendH5DocumentRoomInfo:{},isBackEvent:!1,hasExtendDocument:!1,showpageNotice:!1,loadDynamicPptView:!0,loadH5DocumentView:!0,isMobile:!1,mediaShareToID:void 0,associatedMsgID:void 0,associatedUserID:void 0,clientMediaShare:!1,mediaSharePauseWhenOver:!1,isLoadAudioPlayer:!0,isLoadVideoPlayer:!0,isLoadDocumentRemark:!0,canRemark:!1,secondaryColor:"#ffffff",initWhiteboardProductionOptions:{},isH5MediaOutput:!1,isH5MediaOutputDominant:!1,documentToolBarConfig:{parentNode:void 0,isDrag:!0,isLoadFullScreen:!0,isLoadRemark:!1,isLoadVolume:!1,initDragPosition:{left:50,top:98},fullScreenElementId:void 0},documentRemarkConfig:{parentNode:void 0,isDrag:!0,initDragPosition:{left:50,top:98}},whiteboardToolBarConfig:{parentNode:void 0,isDrag:!0,pencilWidthScale:1,eraserWidthScale:2,initDragPosition:{left:2,top:2},loadWhiteboardTools:{mouse:!0,laser:!0,pen:!0,text:!0,shape:!0,eraser:!0,clear:!0,undo:!0,redo:!0,setting:!0}},isShowReloadFileTip:!0,pptVolumeSynchronization:!1,insertPictureRule:"default",languageType:"ch",rootBackgroundColor:"transparent",primaryColor:"#000000",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",showShapeAuthor:!1,synchronization:!0,isOnlyUndoRedoClearMyselfShape:!1,canDraw:!0,canPage:!0,addPage:!0,actionClick:!0,defaultWhiteboardScale:16/9,isUseKeyboardPage:!0,isLoadDocumentToolBar:!0,isLoadWhiteboardToolBar:!0,isDisconnectedClearWhiteboardData:!1,isNativePlayAudio:!1,isNativePlayVideo:!1,audioPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}},videoPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}}}};o.default=n},{}],338:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),window.WhiteboardGlobalShare=window.WhiteboardGlobalShare||{};var n={WHITEBOARD_SDK_VERSION:"v2.1.0",WHITEBOARD_SDK_TIME:"2018102313",dynamicPptVersions:2017091401,remoteDynamicPptUpdateTime:2018042223,dynamicPptDebugLog:!1};console.info("[whiteboard-sdk]whiteboard sdk version is "+n.WHITEBOARD_SDK_VERSION+" , update time is "+n.WHITEBOARD_SDK_TIME),o.default=n},{}],339:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var v=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=(function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}(a,[{key:"createElement",value:function(e,t,o,n,i){var a=document.createElement(e);if(void 0!==t&&a.setAttribute("id",t),void 0!==o&&(a.className=o),n&&"object"===(void 0===n?"undefined":b(n))){var r=!0,s=!1,l=void 0;try{for(var d=Object.entries(n)[Symbol.iterator]();!(r=(u=d.next()).done);r=!0){var c=u.value,u=v(c,2),c=u[0],u=u[1];a.style[c]=u}}catch(e){s=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(s)throw l}}}if(i&&"object"===(void 0===i?"undefined":b(i))){var h=!0,m=!1,f=void 0;try{for(var p=Object.entries(i)[Symbol.iterator]();!(h=(y=p.next()).done);h=!0){var g=y.value,y=v(g,2),g=y[0],y=y[1];a.setAttribute(g,y)}}catch(e){m=!0,f=e}finally{try{!h&&p.return&&p.return()}finally{if(m)throw f}}}return a}},{key:"appendChild",value:function(e,t){try{e&&t&&e.appendChild&&e.appendChild(t)}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.appendChild error ",e)}}},{key:"removeChild",value:function(e,t){try{e&&(t&&t.removeChild?t.removeChild(e):e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e))}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.removeChild error ",e)}}},{key:"removeAllChild",value:function(e){e&&(e.innerHTML="")}},{key:"hasClass",value:function(e,t){return!(!e||"string"!=typeof t)&&(new RegExp(" "+t+" ").test(e.className)||new RegExp(" "+t).test(e.className)||new RegExp(t+" ").test(e.className))}},{key:"resetClass",value:function(e,t){e&&"string"==typeof t&&(e.className=" "+t)}},{key:"addClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),"")+" "+t:e.className=" "+t;else if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a=t[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var r=r.value;e.className?e.className=e.className.replace(new RegExp(" "+r,"g"),"").replace(new RegExp(r+" ","g"),"")+" "+r:e.className=" "}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}}}},{key:"removeClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),""):e.className=" ";else if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a=t[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var r=r.value;e.className?e.className=e.className.replace(new RegExp(" "+r,"g"),"").replace(new RegExp(r+" ","g"),""):e.className=" "}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}}}},{key:"updateStyle",value:function(e,t){if(e&&t&&"object"===(void 0===t?"undefined":b(t))){var o=!0,n=!1,i=void 0;try{for(var a=Object.entries(t)[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var r=s.value,s=v(r,2),r=s[0],s=s[1];e.style[r]=s}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}}}},{key:"show",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,n=void 0;try{for(var i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a=a.value;this.updateStyle(a,{display:""})}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}}else this.updateStyle(e,{display:""})}},{key:"hide",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,n=void 0;try{for(var i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a=a.value;this.updateStyle(a,{display:"none"})}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}}else this.updateStyle(e,{display:"none"})}},{key:"getNodePosition",value:function(e){if(!e||"body"===e.tagName.toLowerCase())return[0,0];var t=e,o=this.getOffset(t),e=v(o,2),o=e[0],o=void 0===o?0:o,e=e[1],e=void 0===e?0:e;return o||e?(t=null,[o,e]):this.getNodePosition(t.offsetParent)}},{key:"getOffset",value:function(e){e=e.getBoundingClientRect();return[e.top+window.pageYOffset-document.documentElement.clientTop,e.left+window.pageXOffset-document.documentElement.clientLeft]}}]),a);function a(){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}o.default=new i},{}],340:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./Utils"),a=(n=i)&&n.__esModule?n:{default:n};e={newpptVersions:2017091401,remoteNewpptUpdateTime:2018032113,isSkipPageing:!1,isPlayVideoing:!1};e.allDocumentRemarkInfoMap=new Map,e.docAddress="",e.laterAddressList=[],e.backupDocAddressList=[],e.docAddressList=[],e.hasGetDocAddressIndexByLocalStorage=!1,e.docAddressKey="",e.localStorageDocAddressKey="",e.nowUseDocAddress=a.default.getItem(e.docAddressList,e.docAddressKey)||e.docAddress,e.showPageFromId=void 0,e.preloadFile=null,e.extendShowPageFromId=void 0,e.protocol="",e.port="",e.isNativePlayAudio=!1,e.isNativePlayVideo=!1,window.WBGlobal=e,o.default=e},{"./Utils":344}],341:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=new Map;n.set("ch",{documentToolbar:{prevPage:"上一页",nextPage:"下一页",prevStep:"上一页",nextStep:"下一页",addPage:"加页",enlargeWhiteboard:"放大",narrowWhiteboard:"缩小",pptVolume:"音量",onRemark:"打开备注",offRemark:"关闭备注",onGeneralDocumentFullScreen:"绘制区域全屏",offGeneralDocumentFullScreen:"绘制区域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5课件全屏",offH5DocumentFullScreen:"H5课件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字样式",options:{Msyh:"微软雅黑",Ming:"宋体",Arial:"Arial"}},fontSizeText:"号",pencilWidthTitle:"线条宽度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠标",tool_laser:"激光笔",penList:"笔",tool_pencil:"铅笔",tool_highlighter:"荧光笔",tool_line:"线条",tool_arrow:"箭头",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心椭圆",tool_ellipse:"椭圆",tool_eraser:"橡皮檫",action_undo:"撤销",action_redo:"恢复",action_clear:"清屏",settingList:"更多设置"}},documentRemark:{name:"备注",closeTitle:"关闭备注"}}),n.set("tw",{documentToolbar:{prevPage:"上壹頁",nextPage:"下壹頁",prevStep:"上壹頁",nextStep:"下壹頁",addPage:"加頁",enlargeWhiteboard:"放大",narrowWhiteboard:"縮小",pptVolume:"音量",onRemark:"打開備註",offRemark:"關閉備註",onGeneralDocumentFullScreen:"繪制區域全屏",offGeneralDocumentFullScreen:"繪制區域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5課件全屏",offH5DocumentFullScreen:"H5課件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字樣式",options:{Msyh:"微軟雅黑",Ming:"宋體",Arial:"Arial"}},fontSizeText:"號",pencilWidthTitle:"線條寬度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠標",tool_laser:"激光筆",penList:"筆",tool_pencil:"鉛筆",tool_highlighter:"熒光筆",tool_line:"線條",tool_arrow:"箭頭",tool_text:"文字",shapeList:"形狀",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心橢圓",tool_ellipse:"橢圓",tool_eraser:"橡皮檫",action_undo:"撤銷",action_redo:"恢復",action_clear:"清屏",settingList:"更多設置"}},documentRemark:{name:"備註",closeTitle:"關閉備註"}}),n.set("en",{documentToolbar:{prevPage:"Previous Page",nextPage:"Next Page",prevStep:"Previous Page",nextStep:"Next Page",addPage:"Add Page",enlargeWhiteboard:"Zoom In",narrowWhiteboard:"Zoom Out",pptVolume:"Volume",onRemark:"Open Courseware Remarks",offRemark:"Close Courseware Remarks",onGeneralDocumentFullScreen:"Full Screen of Drawing Area",offGeneralDocumentFullScreen:"Cancel Full Screen of Drawing Area",onDynamicPPTFullScreen:"Full Screen  of PPT",offDynamicPPTFullScreen:"Cancel Full Screen  of PPT",onH5DocumentFullScreen:"Full Screen  of Courseware",offH5DocumentFullScreen:"Cancel Full Screen  of Courseware"},whiteboardToolbar:{fontFamily:{title:"Font Format",options:{Msyh:"Microsoft YaHei",Ming:"SimSun",Arial:"Arial"}},fontSizeText:"Font",pencilWidthTitle:"Line Width",eraserWidthTitle:"Eraser Size",toolTextList:{tool_mouse:"Mouse",tool_laser:"Laser Pen",penList:"Pen",tool_pencil:"Pencil",tool_highlighter:"Highlighter",tool_line:"Line",tool_arrow:"Arrow",tool_text:"Text Input",shapeList:"Shape",tool_rectangle_empty:"Square",tool_rectangle:"Solid Square",tool_ellipse_empty:"Circle",tool_ellipse:"Solid Circle",tool_eraser:"Eraser",action_undo:"Undo",action_redo:"Recover",action_clear:"Clear Screen",settingList:"More"}},documentRemark:{name:"Courseware Remarks",closeTitle:"Close Courseware Remarks"}}),n.set("ja",{documentToolbar:{prevPage:"前のページ",nextPage:"次のページ",prevStep:"前のページ",nextStep:"次のページ",addPage:"ページを追加する",enlargeWhiteboard:"拡大",narrowWhiteboard:"縮小",pptVolume:"ボリューム",onRemark:"備考を開く",offRemark:"備考を閉じる",onGeneralDocumentFullScreen:"描画領域全画面",offGeneralDocumentFullScreen:"手書き部分全画面表示の終了",onDynamicPPTFullScreen:"PPT全画面",offDynamicPPTFullScreen:"PPT全画面表示の終了",onH5DocumentFullScreen:"h5教材全画面",offH5DocumentFullScreen:"H5教材全画面の終了"},whiteboardToolbar:{fontFamily:{title:"フォント様式",options:{Msyh:"Microsoft　Yahei",Ming:"宋体",Arial:"Arial"}},fontSizeText:"番号",pencilWidthTitle:"線の太さ",eraserWidthTitle:"消しゴムの大きさ",toolTextList:{tool_mouse:"マウス",tool_laser:"レーザーペン",penList:"鉛筆",tool_pencil:"鉛筆",tool_highlighter:"蛍光ペン",tool_line:"線",tool_arrow:"矢印",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"長方形（塗りつぶしなし）",tool_rectangle:"長方形",tool_ellipse_empty:"楕円（塗りつぶしなし）",tool_ellipse:"楕円",tool_eraser:"消しゴム",action_undo:"キャンセル",action_redo:"元に戻す",action_clear:"クリア",settingList:"詳細設定"}},documentRemark:{name:"備考",closeTitle:"关闭备注"}}),o.default=n},{}],342:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("./Utils"),r=(n=a)&&n.__esModule?n:{default:n};e=window.Log||{error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},warning:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.debug.apply(console,e)}};window.Log=e,o.default=e},{"./Utils":344}],343:[function(e,t,o){var n,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=void 0,i=function(){function i(e){return e||null}function a(e,t,o,n){var i,a,r,s,l=["then","catch","always"].reduce(function(t,o){return t[o]=function(e){return t[o]=e,t},t},{}),d=new XMLHttpRequest,t=function(e,t,o){if("get"!==o.toLowerCase()||!t)return e;o=u(t),t=-1<e.indexOf("?")?"&":"?";return e+t+o}(t,o,e);return d.open(e,t,!0),d.withCredentials=n.hasOwnProperty("withCredentials"),i=d,function(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}(a=(a=n.headers)||{})||(a["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(a).forEach(function(e){a[e]&&i.setRequestHeader(e,a[e])}),d.addEventListener("readystatechange",(r=l,s=d,function e(){s.readyState===s.DONE&&(s.removeEventListener("readystatechange",e,!1),r.always.apply(r,c(s)),(200<=s.status&&s.status<300?r.then:r.catch).apply(r,c(s)))}),!1),d.send(u(o)),l.abort=function(){return d.abort()},l}function c(t){var o;try{o=JSON.parse(t.responseText)}catch(e){o=t.responseText}return[o,t]}function u(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)?(o=e,Object.keys(o).reduce(function(e,t){return(e?e+"&":"")+n(t)+"="+n(o[t])},"")):e;var o,t}function n(e){return encodeURIComponent(e)}return function(n){return(n=n||{}).baseUrl=n.baseUrl||"",n.method&&n.url?a(n.method,n.baseUrl+n.url,i(n.data),n):["get","post","put","delete"].reduce(function(e,o){return e[o]=function(e,t){return a(o,n.baseUrl+e,i(t),n)},e},{})}},"function"==typeof define&&define.amd?define("ajax",i):"object"===(void 0===o?"undefined":a(o))?o=t.exports=i():n.ajax=i()},{}],344:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){return"object"===(void 0===e?"undefined":u(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}var r;Object&&Object.shallowAssign&&Object&&Object.customAssign||(r=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){for(var o=t,n=1;n<arguments.length;n++){var i=arguments[n];if(i&&"object"===(void 0===i?"undefined":u(i)))for(var a in i)o[a]=i[a]}return t}},Object&&Object.shallowAssign||(Object.shallowAssign=r),Object&&Object.customAssign||(Object.customAssign=r)),Object&&Object.deepAssign||(Object.deepAssign=function(e){for(var t=e,o=1;o<arguments.length;o++){var n=arguments[o];if(n&&"object"===(void 0===n?"undefined":u(n)))for(var i in n)void 0===t[i]?"object"===u(n[i])&&(Array.isArray(n[i])||a(n[i]))?t[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},n[i]):t[i]=n[i]:"object"===u(n[i])&&(Array.isArray(n[i])||a(n[i]))?t[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},"object"===u(t[i])?t[i]:Array.isArray(n[i])?[]:{},n[i]):t[i]=n[i]}return e});var m=!1;try{var s=Object.defineProperty({},"passive",{get:function(){m={passive:!0}}});window.addEventListener("test",null,s)}catch(e){console.error("[whiteboarrd-sdk]passiveEvents err:",e)}n(l,[{key:"addEvent",value:function(t,o,e){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];try{t.addEventListener?t.addEventListener(o,e,n):t.attachEvent?t.attachEvent("on"+o,e):t["on"+o]=e}catch(e){L.Logger.error("add dom event fail , event type is "+o+" , element:",t)}}},{key:"removeEvent",value:function(t,o,e,n){try{t.addEventListener?t.removeEventListener(o,e,n):t.attachEvent?t.detachEvent("on"+o,e):t["on"+o]=null}catch(e){L.Logger.error("remove dom event fail , event type is "+o+" , element:",t)}}},{key:"isEmptyJson",value:function(e){return 0===Object.keys(e).length}},{key:"isFullScreenStatus",value:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1}},{key:"launchFullscreen",value:function(e){e&&(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}},{key:"exitFullscreen",value:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()}},{key:"getFullscreenElement",value:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}},{key:"addFullscreenchange",value:function(e){this.addEvent(document,"fullscreenchange",e,!1),this.addEvent(document,"webkitfullscreenchange",e,!1),this.addEvent(document,"mozfullscreenchange",e,!1),this.addEvent(document,"MSFullscreenChange",e,!1),this.addEvent(document,"msfullscreenchange",e,!1),this.addEvent(document,"fullscreeneventchange",e,!1)}},{key:"removeFullscreenchange",value:function(e){this.removeEvent(document,"fullscreenchange",e,!1),this.removeEvent(document,"webkitfullscreenchange",e,!1),this.removeEvent(document,"mozfullscreenchange",e,!1),this.removeEvent(document,"MSFullscreenChange",e,!1),this.removeEvent(document,"msfullscreenchange",e,!1),this.removeEvent(document,"fullscreeneventchange",e,!1)}},{key:"shallowCompareJson",value:function(e,t){return e===t}},{key:"deepCompareJson",value:function(e,t){if("object"!==(void 0===e?"undefined":u(e))||Array.isArray(e)||"object"!==(void 0===e?"undefined":u(e))||Array.isArray(e))return L.Logger.warning("deepCompareJson arguments must is json!"),e===t;var o=Object.deepAssign({},t),n=!0,i=!0,a=!1,r=void 0;try{for(var s=Object.entries(e)[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var l=d.value,d=c(l,2),l=d[0],d=d[1];if(!o.hasOwnProperty(l)){n=!1;break}if(d!==o[l]){n=!1,delete o[l];break}delete o[l]}}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n&&!Object.keys(o).length}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isJson",value:function(e){return"object"===(void 0===e?"undefined":u(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}},{key:"setLocalStorageItem",value:function(e,t){try{window.localStorage?window.localStorage.setItem?window.localStorage.setItem(e,t):L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.setItem , key is "+e+" , value is "+t+"!"):this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!"))}catch(e){this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e))}}},{key:"getLocalStorageItem",value:function(e){try{return window.localStorage?window.localStorage.getItem?window.localStorage.getItem(e):(L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.getItem , key is "+e+" !"),""):(this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!")),"")}catch(e){return this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e)),""}}},{key:"toJsonStringify",value:function(e){if(!e)return e;try{if(!a(e))return e;var t=JSON.stringify(e);t&&(e=t)}catch(e){}return e}},{key:"toJsonParse",value:function(e){if(!e)return e;try{if("string"!=typeof e)return e;var t=JSON.parse(e);t&&(e=t)}catch(e){}return e}},{key:"getPcSDKVersion",value:function(){return TK&&TK.getSdkVersion&&TK.getSdkVersion()?Number(TK.getSdkVersion().replace(/./g,"").replace(/v/g,"")):0}},{key:"getItem",value:function(o,n,e){var t,i,a,r,s=void 0;if(Array.isArray(o))return t=o.find(function(e,t){return s=t+1===o.length?-1:t,e.hostname===n}),e?s&&!isNaN(s)&&o[s+1]?o[s+1].hostname:"":t&&t.protocol&&t.hostname&&t.port?(i=t.protocol,a=t.hostname,r=t.port,i+"://"+a+":"+r):""}},{key:"onElementResize",value:function(e,t){try{if(!(e instanceof HTMLElement))throw new TypeError("Parameter 1 is not instance of 'HTMLElement'.");if(/^(area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr|script|style|textarea|title)$/i.test(e.tagName))throw new TypeError("Unsupported tag type. Change the tag or wrap it in a supported tag(e.g. div).");if("function"!=typeof t)throw new TypeError("Parameter 2 is not of type 'function'.");var o=e.offsetWidth||1,n=e.offsetHeight||1,i=1e4*o,a=1e4*n,r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;z-index=-10000;overflow:hidden;visibility:hidden;";var s=r.cloneNode(!1),l=document.createElement("div");l.style.cssText="transition:0s;animation:none;";var d=l.cloneNode(!1);l.style.width=i+"px",l.style.height=a+"px",d.style.width="250%",d.style.height="250%",r.appendChild(l),s.appendChild(d),e.appendChild(r),e.appendChild(s),r.offsetParent!==e&&(e.style.position="relative"),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=i;var c=0,u=0,h=function(){c===o&&u===n||(o=c,n=u,t())},d=function(){c=e.offsetWidth||1,u=e.offsetHeight||1,c===o&&u===n||requestAnimationFrame(h),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=i};r.addEventListener("scroll",d,m),s.addEventListener("scroll",d,m)}catch(e){L.Logger.error("[whiteboarrd-sdk]onElementResize err:",e)}}}]),n=l;function l(){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this)}o.default=new n},{}],345:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=c(e("../components/TalkcloudReact")),s=c(e("../../utils/DomUtils")),d=c(e("../../utils/Utils"));function c(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,a.default),n(u,[{key:"shouldComponentUpdateProps",value:function(e){if(e.streamInfo!==this.props.streamInfo&&e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes){var t=!1,o=!0,n=!1,i=void 0;try{for(var a=Object.entries(this.props.streamInfo.attributes)[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var r=s.value,s=l(r,2),r=s[0],s=s[1];if("position"!==r&&s!==e.streamInfo.attributes[r]){t=!0;break}}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}if(e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateProps",value:function(e){var t,o,n,i,a=this;e.streamInfo!==this.props.streamInfo&&(t=void 0===e.streamInfo&&this.props.streamInfo,o=!this.props.streamInfo,n=e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes&&e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position,(t||o||n)&&(i=(new Date).getTime(),!this.updateTime||500<i-this.updateTime?(this.updateTime=i,clearTimeout(this._updateProgressTimer),this._updateProgress()):(clearTimeout(this._updateProgressTimer),this._updateProgressTimer=setTimeout(function(){i=(new Date).getTime(),a.updateTime=i,a._updateProgress()},750)))),e.volume!==this.props.volume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.volume)),e.muteVolume!==this.props.muteVolume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.muteVolume?0:this.props.volume)),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?s.default.addClass(this.elements.mediaTotalControlElement,"tk-playback"):s.default.removeClass(this.elements.mediaTotalControlElement,"tk-playback")),(e.myUserId!==this.props.myUserId||e.streamInfo!==this.props.streamInfo&&!e.streamInfo&&this.props.streamInfo)&&this._updateControlByPermissions(),d.default.deepCompareJson(e.controlPermissions,this.props.controlPermissions)&&this._updateControlByPermissions()}},{key:"destroyView",value:function(){for(var e in s.default.removeChild(this.elements.mediaTotalControlElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"playOrPauseClick",value:function(){"function"==typeof this.props.onPlayOrPauseClick&&this.props.onPlayOrPauseClick()}},{key:"closeClick",value:function(){"function"==typeof this.props.onCloseClick&&this.props.onCloseClick()}},{key:"fullScreenClick",value:function(){"function"==typeof this.props.onFullScreenClick&&this.props.onFullScreenClick()}},{key:"volumeMuteClick",value:function(){"function"==typeof this.props.onVolumeMuteClick&&this.props.onVolumeMuteClick()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),e=Math.round(e%60);return 60===e&&(t+=1,e=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(e/10)&&(e="0"+e),t+":"+e}},{key:"_createElements",value:function(){this.elements.mediaTotalControlElement=s.default.createElement("article",this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"TalkMediaPlayerTotalControl","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control "+(this.props.isVideoPlayer?"video-player-control-container ":"audio-player-control-container ")+(this.props.isPlayback?"tk-playback ":" "))}},{key:"_connectElements",value:function(){var t=this;s.default.appendChild(this.parentNode,this.elements.mediaTotalControlElement);var e=(this.props.streamInfo||{}).attributes,o=void 0===e?{}:e,n=o.filename,i=void 0===n?"":n,e=o.position,n=void 0===e?0:e,e=o.duration,e=void 0===e?0:e,o=o.pause;this.elements.mediaTotalControlElement&&(this.elements.mediaTotalControlElement.innerHTML=' \n                <article class="media-player-box clear-float " >\n                    <span class="media-player-icon add-fl '+(o?"play":"pause")+'" ></span>\n                    <div class="media-player-control-container add-fl clear-float"> \n                        <button  class="play-pause-btn add-cursor-pointer add-fl '+(o?"play":"pause")+'"  ></button>\n                        <div class="media-player-info-container add-fl"> \n                            <div class="media-player-name-time-container clear-float"> \n                                <span class="media-player-name add-fl add-nowrap" >'+i+'</span>\n                                <span class="media-player-time-container add-fr" > \n                                    <em class="curr-time" >'+this._formatTime(n/1e3)+'</em> / <em class="total-time" >'+this._formatTime(e/1e3)+'</em>\n                                </span>\n                            </div>\n                            <div class="media-player-progress-container" id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerProgressBar" >                              \n                            </div>\n                        </div>\n                        <div class="volume-info-container add-fl clear-float" > \n                            <button  class="volume-icon add-cursor-pointer add-fl" ></button>\n                            <div class="volume-bar-container add-fl"  id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerVolumeBar" ></div>\n                        </div>\n                        <button  class="close-btn add-cursor-pointer add-fl" ></button>\n                        <button  class="full-screen-btn add-cursor-pointer add-fl" ></button>\n                    </div>\n                </article> \n            ',this.elements.playPauseBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("play-pause-btn")[0],this.elements.playPauseIconElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-icon")[0],this.elements.volumeMuteBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("volume-icon")[0],this.elements.closeBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("close-btn")[0],this.elements.fullScreenBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("full-screen-btn")[0],this.elements.filenameElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-name")[0],this.elements.currTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("curr-time")[0],this.elements.totalTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("total-time")[0],this.elements.mediaPlayerProgressElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-progress-container")[0],this.elements.playPauseBtnElement.onclick=this.playOrPauseClick.bind(this),this.elements.volumeMuteBtnElement.onclick=this.volumeMuteClick.bind(this),this.elements.closeBtnElement.onclick=this.closeClick.bind(this),this.elements.fullScreenBtnElement.onclick=this.fullScreenClick.bind(this),window.TalkSlider&&(this.progressSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerProgressBar",direction:"horizontal"},onBeforeChange:function(e){t.mediaPlayerProgressSlidering=!0},onAfterChange:function(e){t.mediaPlayerProgressSlidering=!1,"function"==typeof t.props.onChangeProgress&&t.props.onChangeProgress(e),t._updateProgress(),t.tempStopUpdatePosition=!0,setTimeout(function(){t.tempStopUpdatePosition=!1},500)}}),this.volumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerVolumeBar",direction:"horizontal"},onAfterChange:function(e){"function"==typeof t.props.onChangeVolume&&t.props.onChangeVolume(e)}})),this._updateControlByPermissions())}},{key:"_updateControlByPermissions",value:function(){var e=!1,t=this.props.streamInfo||{};"file"===t.streamType&&t.userid!=this.props.myUserId&&(e=!0),s.default.updateStyle(this.elements.playPauseBtnElement,{display:!this.props.controlPermissions.hasPlayOrPause||e?"none":""}),this.elements.playPauseBtnElement.disabled=!this.props.controlPermissions.hasPlayOrPause||e,s.default.updateStyle(this.elements.closeBtnElement,{display:this.props.controlPermissions.hasClose?"":"none"}),this.elements.closeBtnElement.disabled=!this.props.controlPermissions.hasClose,this.progressSlider&&d.default.isFunction(this.progressSlider.updateDisabled)&&this.progressSlider.updateDisabled(!this.props.controlPermissions.hasChangeProgress||e),!this.props.controlPermissions.hasChangeProgress||e?s.default.addClass(this.elements.mediaPlayerProgressElement,"disabled"):s.default.removeClass(this.elements.mediaPlayerProgressElement,"disabled")}},{key:"_updateProgress",value:function(){var e,t,o;this.props.streamInfo&&(this.mediaPlayerProgressSlidering||this.tempStopUpdatePosition||!this.progressSlider||"function"!=typeof this.progressSlider.setProgress||(t=void(e=0)===(t=(o=this.props.streamInfo&&this.props.streamInfo.attributes?this.props.streamInfo.attributes:{}).position)?0:t,0!==(o=void 0===(o=o.duration)?0:o)&&(e=t/o*100,isNaN(e)&&(e=0)),e<0?e=0:100<e&&(e=100),this.elements.currTimeElement.innerHTML=this._formatTime(t/1e3),this.progressSlider.setProgress(e)))}},{key:"render",value:function(){var e=this.props,t=e.streamInfo,o=void 0===t?{}:t,n=e.muteVolume,i=e.isFullScreen,a=o.attributes,t=void 0===a?{}:a,e=t.filename,o=void 0===e?"":e,a=t.position,e=void 0===a?0:a,a=t.duration,a=void 0===a?0:a,t=t.pause;this.elements.filenameElement.innerHTML=o,this.elements.currTimeElement.innerHTML=this._formatTime(e/1e3),this.elements.totalTimeElement.innerHTML=this._formatTime(a/1e3),t?(s.default.removeClass(this.elements.playPauseBtnElement,"pause"),s.default.addClass(this.elements.playPauseBtnElement,"play"),s.default.removeClass(this.elements.playPauseIconElement,"pause"),s.default.addClass(this.elements.playPauseIconElement,"play")):(s.default.removeClass(this.elements.playPauseBtnElement,"play"),s.default.addClass(this.elements.playPauseBtnElement,"pause"),s.default.removeClass(this.elements.playPauseIconElement,"play"),s.default.addClass(this.elements.playPauseIconElement,"pause")),n?s.default.addClass(this.elements.volumeMuteBtnElement,"mute"):s.default.removeClass(this.elements.volumeMuteBtnElement,"mute"),i?s.default.addClass(this.elements.fullScreenBtnElement,"yes"):s.default.removeClass(this.elements.fullScreenBtnElement,"yes")}}]),n=u;function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this);n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n));return n.parentNode=e,n.instanceId=t,n.whiteBoardManagerInstance=o,n.elements={},n.videoDumb=void 0,n._createElements(),n._connectElements(),n.render(),n}o.default=n},{"../../utils/DomUtils":339,"../../utils/Utils":344,"../components/TalkcloudReact":347}],346:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(e("./TalkcloudReact")),l=r(e("../../utils/DomUtils"));function r(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,a.default),n(s,[{key:"componentDidUpdateState",value:function(e){e.extendShow!==this.state.extendShow&&this._noticeSelectExtendListShowOrHide(this.state.extendShow)}},{key:"componentDidUpdateProps",value:function(e){if(e.selectOptions!==this.state.selectOptions){var t=this.props,o=t.optionClassName,e=t.selectOptions,n=void 0===e?[]:e,i=t.disabled,a=t.currentValue;l.default.removeAllChild(this.elements.selectListViewElement);for(var r=0;r<n.length;r++){var s=l.default.createElement("li",void 0,"select-option "+(o||" ")+(a===n[r].value?" selected":" "));s.innerHTML=n[r].value,s.onclick=i?void 0:this.optionOnClick.bind(this,n[r].value,r),l.default.appendChild(this.elements.selectListViewElement,s)}}}},{key:"destroyView",value:function(){for(var e in l.default.removeChild(this.elements.selectViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"forceHideSelectExtendList",value:function(){this.setState({extendShow:!1})}},{key:"currentTextOnClick",value:function(e){return this.props.disabled||(this.setState({extendShow:!this.state.extendShow}),e&&(e.preventDefault(),e.stopPropagation())),!1}},{key:"optionOnClick",value:function(e,t,o){return this.props.disabled||(e!==this.props.currentValue&&this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e,t),this.setState({extendShow:!1}),o&&(o.preventDefault(),o.stopPropagation())),!1}},{key:"selectContainerOnMouseLeave",value:function(e){return this.setState({extendShow:!1}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_noticeSelectExtendListShowOrHide",value:function(e){this.props.noticeSelectExtendListShowOrHide&&"function"==typeof this.props.noticeSelectExtendListShowOrHide&&this.props.noticeSelectExtendListShowOrHide(e)}},{key:"_getRect",value:function(e){var t=e.getBoundingClientRect(),o=document.documentElement.clientTop,e=document.documentElement.clientLeft;return{top:t.top-o,bottom:t.bottom-o,left:t.left-e,right:t.right-e,width:t.width,height:t.height}}},{key:"_createConnectElements",value:function(){this.elements.selectViewRootElement=l.default.createElement("article",this.props.id,void 0,{}),this.elements.currentSelectTextElement=l.default.createElement("button",void 0,void 0,{}),this.elements.arrowElement=l.default.createElement("span"),this.elements.arrowElement.innerHTML='<em class="arrow "></em>',this.elements.selectListViewElement=l.default.createElement("ol"),l.default.appendChild(this.elements.selectViewRootElement,this.elements.currentSelectTextElement),l.default.appendChild(this.elements.selectViewRootElement,this.elements.arrowElement),l.default.appendChild(this.elements.selectViewRootElement,this.elements.selectListViewElement),l.default.appendChild(this.parentNode,this.elements.selectViewRootElement),this.elements.currentSelectTextElement.onclick=this.currentTextOnClick.bind(this),this.elements.selectViewRootElement.onmouseleave=this.selectContainerOnMouseLeave.bind(this)}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.disabled,e=e.currentValue,e=void 0===e?"":e;l.default.updateStyle(this.elements.selectListViewElement,{display:!o&&this.state.extendShow?"block":"none"}),this.listDirection=this.props.listDirection||this.listDirection,l.default.resetClass(this.elements.selectViewRootElement,"talkcloud-sdk-whiteboard  select-root tk-select-container clear-float "+(o?" disabled ":"  ")+(t||"")+(!o&&this.state.extendShow?" showExtendList":" hideExtendList")),l.default.resetClass(this.elements.currentSelectTextElement,"talkcloud-sdk-whiteboard  select-btn current-select-text-btn current-select-text "+(o?"disabled ":" ")),l.default.resetClass(this.elements.arrowElement,"arrow-container "+(o?"disabled ":" ")),l.default.resetClass(this.elements.selectListViewElement,"select-extend-list-container "+(this.props.isMobile?" ":"custom-scroll-bar")+(o?" disabled ":"  ")+(!o&&this.state.extendShow?" show":" hide")),o?this.elements.currentSelectTextElement.setAttribute("disabled","true"):this.elements.currentSelectTextElement.removeAttribute("disabled"),this.elements.currentSelectTextElement.value=e,this.elements.currentSelectTextElement.innerText=e,this.props.parentNode&&this.state.extendShow&&!this.props.disabled&&!this.props.listDirection&&(o=this._getRect(this.props.parentNode),(e=this._getRect(this.elements.selectListViewElement)).top-o.top>o.height-e.height+5?this.listDirection="up":this.listDirection="down"),l.default.removeClass(this.elements.selectViewRootElement,["down","up"]),l.default.removeClass(this.elements.selectListViewElement,["down","up"]),l.default.addClass(this.elements.selectViewRootElement,this.listDirection),l.default.addClass(this.elements.selectListViewElement,this.listDirection)}}]),n=s;function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t));return t.parentNode=e,t.elements={},t.state={extendShow:!1},t.listDirection="down",t._createConnectElements(),t.render(),t}o.default=n},{"../../utils/DomUtils":339,"./TalkcloudReact":347}],347:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=(function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}(r,[{key:"setState",value:function(e){var t=Object.deepAssign({},this.state);Object.shallowAssign(this.state,e);e=!1;this.shouldComponentUpdateState&&"function"==typeof this.shouldComponentUpdateState&&(e=this.shouldComponentUpdateState(t)),!e&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateState&&"function"==typeof this.componentDidUpdateState&&this.componentDidUpdateState(t)}},{key:"setProps",value:function(e){var t=Object.deepAssign({},this.props);Object.shallowAssign(this.props,e);e=!1;this.shouldComponentUpdateProps&&"function"==typeof this.shouldComponentUpdateProps&&(e=this.shouldComponentUpdateProps(t)),!e&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateProps&&"function"==typeof this.componentDidUpdateProps&&this.componentDidUpdateProps(t)}}]),r);function r(e){!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),"object"!==(void 0===e?"undefined":n(e))||Array.isArray(e)?this.props={}:this.props=Object.shallowAssign({},e),this.state="object"!==n(this.state)||Array.isArray(this.state)?{}:this.state}o.default=a},{}],348:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=s(e("./TalkcloudReact")),r=s(e("../../utils/DomUtils"));function s(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(l,a.default),n(l,[{key:"componentDidUpdateProps",value:function(e){this.props.volume===e.volume&&this.props.muteVolume===e.muteVolume||this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"destroyView",value:function(){for(var e in this._unplayAV(),r.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"getElementId",value:function(){return this.elements.rootElement.id}},{key:"_changeVolume",value:function(e){var t,o;void 0!==e&&"number"==typeof e&&this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&(t=(o=this.props.streamInfo||{}).userid,o=o.streamType,this.whiteBoardManagerInstance.getRoomDelegate().setVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setVolume(t,o,e))}},{key:"_createElements",value:function(){var e=(this.props.streamInfo||{}).userid;this.elements.rootElement=r.default.createElement("div",this.props.videoDumbElementIdPrefix+e,"tk-audio-or-video-player  tk-audio-player-video-dumb")}},{key:"_connectElements",value:function(){r.default.appendChild(this.parentNode,this.elements.rootElement)}},{key:"_playAV",value:function(){if(this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.elements.rootElement&&this.elements.rootElement.id){var e,t=this.props.streamInfo||{},o=t.userid;switch(t.streamType){case"media":this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia&&(e=this.elements.rootElement.id,this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia(o,e));break;case"file":this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile&&(e=this.elements.rootElement.id,this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile(o,e))}}this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"_unplayAV",value:function(){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.streamType){case"media":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia(this.userid);break;case"file":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile(this.userid)}}},{key:"render",value:function(){}}]),n=l;function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,n));return n.parentNode=e,n.instanceId=t,n.whiteBoardManagerInstance=o,n.elements={},n.userid=n.props.streamInfo?n.props.streamInfo.userid:void 0,n.streamType=n.props.streamInfo?n.props.streamInfo.streamType:void 0,n._createElements(),n._connectElements(),n._playAV(),n}o.default=n},{"../../utils/DomUtils":339,"./TalkcloudReact":347}],349:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkAudioPlayer=void 0;var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,r=e("./MediaPlayer");(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,((a=r)&&a.__esModule?a:{default:a}).default),n(s,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,n=t.userId,i=t.attributes,i=void 0===i?{}:i,t=t.published;"media"!==o&&"file"!==o||!i.audio||i.video||(t?(this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:n,streamType:o,audio:i.audio,video:i.video,attributes:i}}),n===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0)),i=i.pause,this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(i?"pause":"play",e)):(this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)))}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,n=t.attributes,n=void 0===n?{}:n,t=t.updateAttributes,t=void 0===t?{}:t;"media"!==o&&"file"!==o||!n.audio||n.video||this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:t})}),void 0!==t.pause&&this.sendMediaPlayerNoticeActionCommand(t.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,n=o.type,i=o.userId,a=o.attributes,t=void 0===a?{}:a;"media"!==n&&"file"!==n||!t.audio||t.video||this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")&&((o=this.whiteBoardManagerInstance.whiteboardViewMap.get("default"))&&o.sendActionCommand&&(a=void 0,t={playerType:"audioPlayer",userid:i,streamType:n,audio:t.audio,video:t.video,attributes:t,isDynamicPptVideo:!1},a=Object.deepAssign({type:e,fileid:t.attributes.fileid},t),o.sendActionCommand("mediaPlayerNotice",a)))}}]),n=s;function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,o,n,i,!1))}window.TalkAudioPlayer=n,o.TalkAudioPlayer=n,o.default=n},{"./MediaPlayer":352}],350:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentRemark=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=h(e("../components/TalkcloudReact")),s=h(e("../../utils/DomUtils")),l=h(e("../../utils/Utils")),d=h(e("../../utils/Global")),c=h(e("../../utils/Language")),u=h(e("../../utils/TalkAjax"));function h(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(m,r.default),i(m,[{key:"componentDidUpdateState",value:function(e){this.state.autoOpenRemark&&e.viewState.fileid==this.state.viewState.fileid&&0!=this.state.viewState.fileid&&e.viewState.page.currentPage!==this.state.viewState.page.currentPage&&this.whiteBoardManagerInstance&&l.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),e.viewState.fileid!=this.state.viewState.fileid&&(this.state.autoOpenRemark&&0!=this.state.viewState.fileid&&this.whiteBoardManagerInstance&&l.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),this._ajaxDocumentRemark()),e.viewState.remark!==this.state.viewState.remark&&this._ajaxDocumentRemark()}},{key:"componentDidUpdateProps",value:function(e){var t;e.languageType!==this.props.languageType&&this._updateLanguage(),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0)),l.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)||this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.setPosition&&(e=void 0===(e=(t=this.props.initDragPosition||{}).left)?50:e,t=void 0===(t=t.top)?100:t,this.documentRemarkTalkDrag.setPosition(e,t))}},{key:"changeParentNode",value:function(e){e&&(s.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.parentNode=e,s.default.appendChild(this.parentNode,this.elements.remarkViewRootElement))}},{key:"destroyView",value:function(){for(var e in s.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"resize",value:function(){this.documentRemarkTalkDrag&&l.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}},{key:"receiveActionCommand",value:function(e,t){"object"!==(void 0===t?"undefined":n(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentRemark]receive whiteboard view action command（action,cmd）:",e,t),"viewStateUpdate"===e&&this.setState({viewState:t.viewState})}},{key:"closeDocumentRemarkOnClick",value:function(){this.whiteBoardManagerInstance&&l.default.isFunction(this.whiteBoardManagerInstance.closeDocumentRemark)&&this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId)}},{key:"_createConnectElements",value:function(){this.elements.remarkViewRootElement=s.default.createElement("div",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" talk-cloud-remark-container remark-container",{position:"absolute",left:0,top:0,display:"none",zIndex:3}),this.elements.remarkViewRootElement.innerHTML='\n            <div class="remark-head"> \n                <span class="name"></span>\n                <button class="close"></button>\n            </div>\n            <div class="content-container"> \n                <span class="content-text  custom-scroll-bar" >  </span>\n            </div>\n        ',s.default.appendChild(this.parentNode,this.elements.remarkViewRootElement),this.elements.remarkNameElement=this.elements.remarkViewRootElement.getElementsByClassName("name")[0],this.elements.remarkCloseElement=this.elements.remarkViewRootElement.getElementsByClassName("close")[0],this.elements.remarkContentElement=this.elements.remarkViewRootElement.getElementsByClassName("content-text")[0],this.elements.remarkCloseElement.onclick=this.closeDocumentRemarkOnClick.bind(this),this._addTalkDrag()}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");e=c.default.get(t).documentRemark,t=e.name,e=e.closeTitle;this.elements.remarkNameElement.innerHTML=t,this.elements.remarkCloseElement.setAttribute("title",e)}},{key:"_addTalkDrag",value:function(){window.TalkDrag&&this.elements.remarkViewRootElement&&(this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0),this.documentRemarkTalkDrag=new window.TalkDrag(this.elements.remarkViewRootElement,{containerData:{left:50,top:90}}))}},{key:"_ajaxDocumentRemark",value:function(){var i=this,e=this.state.viewState,t=e.remark,a=e.fileid,r=this,e=!1;this.ajaxRequestingList["documentRemark_"+a]&&(new Date).getTime()-this.ajaxRequestingList["documentRemark_"+a].requestTime<5e3&&(e=!0),!e&&this.props.canRemark&&t&&0!=a&&!d.default.allDocumentRemarkInfoMap.has("documentRemark_"+a)&&(this.ajaxRequestingList["documentRemark_"+a]&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr&&l.default.isFunction(this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort)&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort(),this.ajaxRequestingList["documentRemark_"+a]={requestTime:(new Date).getTime(),ajaxXhr:void 0},this.ajaxRequestingList["documentRemark_"+a].ajaxXhr=(0,u.default)().post(this.props.webAddress+"/ClientAPI/getfileremark?ts="+(new Date).getTime(),{fileid:a}).then(function(e){if(i.ajaxRequestingList["documentRemark_"+a]=void 0,delete i.ajaxRequestingList["documentRemark_"+a],e&&0===e.result)for(var t in e){var o,n=e[t];"result"!==t&&n&&l.default.isJson(n)&&(d.default.allDocumentRemarkInfoMap.has("documentRemark_"+n.fileid)||d.default.allDocumentRemarkInfoMap.set("documentRemark_"+n.fileid,{}),(o=d.default.allDocumentRemarkInfoMap.get("documentRemark_"+n.fileid))&&(o[n.fileid+"_"+n.pageid]=n.remark),i.whiteBoardManagerInstance&&i.whiteBoardManagerInstance.whiteboardViewMap&&i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId)&&l.default.isFunction(i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate)&&i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate())}i.setState({updateState:!i.state.updateState})}).catch(function(e,t){L.Logger.error("ajax request fail  error info( response, xhr ):",e,t),i.ajaxRequestingList["documentRemark_"+a]=void 0,delete i.ajaxRequestingList["documentRemark_"+a],i.setState({updateState:!i.state.updateState})}))}},{key:"render",value:function(){var e=this.state.viewState,t=e.remark,o=e.fileid,n=e.page,i=(void 0===n?{}:n).currentPage,e=void 0===i?1:i,n=d.default.allDocumentRemarkInfoMap.get("documentRemark_"+o),i=this.props.canRemark&&t&&0!=o&&n&&n[o+"_"+e],t=!this.isShow&&i;this.isShow=i,s.default.updateStyle(this.elements.remarkViewRootElement,{display:i?"block":"none"}),i&&n&&n[o+"_"+e]&&(this.elements.remarkContentElement.innerHTML=n[o+"_"+e]),t&&this.documentRemarkTalkDrag&&l.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}}]),i=m;function m(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this);n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,n));return n.parentNode=e,n.instanceId=t,n.whiteBoardManagerInstance=o,n.configration=i,n.elements={},n.documentRemarkTalkDrag=void 0,n.ajaxRequestingList={},n.state={autoOpenRemark:!0,updateState:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,other:{primaryColor:n.configration.primaryColor,secondaryColor:n.configration.secondaryColor,backgroundColor:n.configration.backgroundColor,pencilWidth:n.configration.pencilWidth,shapeWidth:n.configration.shapeWidth,eraserWidth:n.configration.eraserWidth,fontSize:n.configration.fontSize,fontFamily:n.configration.fontFamily}}},n._createConnectElements(),n._updateLanguage(),n.render(),n}window.TalkDocumentRemark=i,o.TalkDocumentRemark=i,o.default=i},{"../../utils/DomUtils":339,"../../utils/Global":340,"../../utils/Language":341,"../../utils/TalkAjax":343,"../../utils/Utils":344,"../components/TalkcloudReact":347}],351:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentToolbar=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=c(e("../components/TalkcloudReact")),u=c(e("../../utils/DomUtils")),s=c(e("../../utils/Utils")),l=c(e("../components/Select")),b=c(e("../../utils/Language")),d=c(e("../../utils/Global"));function c(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(h,r.default),n(h,[{key:"componentDidUpdateState",value:function(e){var t,o,n;e.viewState!==this.state.viewState&&(t=e.viewState.page.currentPage===this.state.viewState.page.currentPage,o=e.viewState.page.totalPage===this.state.viewState.page.totalPage,n=e.viewState.page.skipPage&&this.state.viewState.page.skipPage?s.default.deepCompareJson(e.viewState.page.skipPage,this.state.viewState.page.skipPage):e.viewState.page.skipPage===this.state.viewState.page.skipPage,t&&o&&n||(this._isShowRemarkBtn(),this._updateSelectInfo()),e.viewState.fileid==this.state.viewState.fileid&&e.viewState.remarkText===this.state.viewState.remarkText||this._isShowRemarkBtn(),e.viewState.dynamicPptVolume!==this.state.viewState.dynamicPptVolume&&!this.pageVolumeSlidering&&this.pageVolumeSlider&&"function"==typeof this.pageVolumeSlider.setProgress&&this.pageVolumeSlider.setProgress(this.state.viewState.dynamicPptVolume)),e.tempDisabledDrag!==this.state.tempDisabledDrag&&this.documentToolbarTalkDrag&&i(this.documentToolbarTalkDrag.updateDisabled)&&this.documentToolbarTalkDrag.updateDisabled(this.state.tempDisabledDrag),e.viewState.documentType===this.state.viewState.documentType&&e.viewState.fullScreen===this.state.viewState.fullScreen&&e.viewState.remark===this.state.viewState.remark||this._updateLanguage(),e.updateState!==this.state.updateState&&this._isShowRemarkBtn()}},{key:"componentDidUpdateProps",value:function(e){var t,o;e.languageType!==this.props.languageType&&this._updateLanguage(),e.isMobile!==this.props.isMobile&&(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.props.isMobile?u.default.addClass(this.elements.documentToolbarViewRootElement,"app-mobile"):u.default.removeClass(this.elements.documentToolbarViewRootElement,"app-mobile"),this.elementsViewClass.selectPageView&&this.elementsViewClass.selectPageView.setProps({isMobile:this.props.isMobile})),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0)),s.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)||this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.setPosition&&(t=void 0===(t=(o=this.props.initDragPosition||{}).left)?50:t,o=void 0===(o=o.top)?100:o,this.documentToolbarTalkDrag.setPosition(t,o)),e.isLoadRemark===this.props.isLoadRemark&&e.canRemark===this.props.canRemark||!this.elements.remarkElement||this._isShowRemarkBtn(),e.isLoadFullScreen!==this.props.isLoadFullScreen&&this.elements.fullScreenElement&&u.default.updateStyle(this.elements.fullScreenElement,{display:this.props.isLoadFullScreen?"":"none"})}},{key:"resize",value:function(){this.documentToolbarTalkDrag&&s.default.isFunction(this.documentToolbarTalkDrag.resizeCallback)&&this.documentToolbarTalkDrag.resizeCallback()}},{key:"forceRender",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"changeParentNode",value:function(e){e&&(u.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.parentNode=e,u.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement))}},{key:"destroyView",value:function(){var e,t=!0,o=!1,n=void 0;try{for(var i=Object.values(this.elementsViewClass)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a=a.value;a&&a.destroyView&&a.destroyView()}}catch(e){o=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}for(e in this.elementsViewClass={},u.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":i(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentToolbar]receive whiteboard view action command（action,cmd）:",e,t),e){case"closeAllSelectBox":u.default.removeClass(this.elements.volumeElement,"open");break;case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"changeSelectPageOnChange",value:function(e){this.skipPage(e)}},{key:"changeSelectPageNoticeSelectExtendListShowOrHide",value:function(e){this.setState({tempDisabledDrag:e})}},{key:"prevPage",value:function(){return"dynamicPPT"===this.state.viewState.documentType?this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevStep(this.instanceId):this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevPage(this.instanceId),!1}},{key:"nextPage",value:function(){return"dynamicPPT"===this.state.viewState.documentType?this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextStep(this.instanceId):this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextPage(this.instanceId),!1}},{key:"addPage",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.addPage(this.instanceId),!1}},{key:"fullScreen",value:function(){return this.whiteBoardManagerInstance&&(this.state.viewState.fullScreen?this.whiteBoardManagerInstance.exitFullScreen(this.instanceId):this.whiteBoardManagerInstance.fullScreen(this.instanceId)),!1}},{key:"openDynamicPptVolumeOnClick",value:function(){return u.default.hasClass(this.elements.volumeElement,"open")?u.default.removeClass(this.elements.volumeElement,"open"):u.default.addClass(this.elements.volumeElement,"open"),!1}},{key:"closeDynamicPptVolumeOnMouseLeave",value:function(){return u.default.removeClass(this.elements.volumeElement,"open"),!1}},{key:"openOrCloseRemarkOnClick",value:function(){var e=this.state.viewState.remark;this.whiteBoardManagerInstance&&(e?this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId):this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId))}},{key:"changeDynamicPptVolume",value:function(e){this.whiteBoardManagerInstance&&"function"==typeof this.whiteBoardManagerInstance.changeDynamicPptVolume&&this.whiteBoardManagerInstance.changeDynamicPptVolume(e,this.instanceId)}},{key:"skipPage",value:function(e){return"number"==typeof(e=Number(e))&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.skipPage(e,this.instanceId),!1}},{key:"sendActionCommand",value:function(e,t){var o;this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)&&((o=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId))&&o.sendActionCommand&&o.sendActionCommand(e,t))}},{key:"changePageOnFocus",value:function(e){return d.default.isSkipPageing=!0,e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnClick",value:function(){return this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.elements.skipPageCurrpageElement.focus(),event&&(event.preventDefault(),event.stopPropagation()),!1}},{key:"changePageOnBlur",value:function(e){return d.default.isSkipPageing=!1,this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnKeyDown",value:function(e){if(13===e.keyCode)return this.elements.skipPageCurrpageElement&&"function"==typeof this.elements.skipPageCurrpageElement.blur?(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!1),this.elements.skipPageCurrpageElement.blur()):this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"enlargeWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.enlargeWhiteboard(this.instanceId),!1}},{key:"narrowWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.narrowWhiteboard(this.instanceId),!1}},{key:"receiveWindowMessageEvent",value:function(t){var e={};if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)&&(e=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId)),t.data){var o=void 0,n=void 0;try{o=(n=JSON.parse(t.data)).data}catch(e){return void L.Logger.warning("document tool bar receive iframe message data can't be converted to JSON , iframe data:",t.data)}"tk_dynamicPPT"===n.source&&e.getDynamicPptInstanceByID&&"function"==typeof e.getDynamicPptInstanceByID&&e.getDynamicPptInstanceByID().dynamicPptIframeElement&&t.source===e.getDynamicPptInstanceByID().dynamicPptIframeElement.contentWindow&&(L.Logger.debug("[document tool bar]receive remote iframe data form "+t.origin+":",t),"allVideoAndAudio"===o.action&&this.setState({dynamicPptAVSize:void 0!==o.allVideoAndAudioLength?o.allVideoAndAudioLength:0}))}}},{key:"stopEvent",value:function(e){return e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_changePage",value:function(){var e=Number(this.elements.skipPageCurrpageElement.innerHTML),t=this.state.viewState.page,o=void 0===t?{}:t,n=o.totalPage,t=void 0===n?1:n,n=o.currentPage,o=void 0===n?1:n;"number"!=typeof e||isNaN(e)?(n={type:"pageTypeNotNumber",currentPage:o,totalPage:t,toPage:this.elements.skipPageCurrpageElement.innerHTML},this.sendActionCommand("skipPageFailureBouncedNotice",n),this.elements.skipPageCurrpageElement.innerHTML=o):e!==o&&(e<1||t<e?(t={type:"overPageRange",currentPage:o,totalPage:t,toPage:e},this.sendActionCommand("skipPageFailureBouncedNotice",t),this.elements.skipPageCurrpageElement.innerHTML=o):this.skipPage(e))}},{key:"_createConnectElements",value:function(){var t=this;this.elements.documentToolbarViewRootElement=u.default.createElement("article",this.instanceId+"DocumentToolViewRoot","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-root "+(this.props.isMobile?"app-mobile ":" "),{zIndex:5}),this.elements.previousPageElement=u.default.createElement("button",this.instanceId+"TalkcloudPreviousPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn previous-page-btn",{}),this.elements.skipPageElement=u.default.createElement("div",this.instanceId+"TalkcloudSkipPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-select skip-page-select",{}),this.elements.nextPageElement=u.default.createElement("button",this.instanceId+"TalkcloudNextPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn next-page-btn",{}),this.elements.addPageElement=u.default.createElement("button",this.instanceId+"TalkcloudAddPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn add-page-btn",{display:"none"}),this.elements.fullScreenElement=u.default.createElement("button",this.instanceId+"TalkcloudFullScreen","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn full-screen-btn",{display:this.props.isLoadFullScreen?"":"none"}),this.elements.volumeElement=u.default.createElement("button",this.instanceId+"TalkcloudVolume","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn volume-btn",{display:this.props.isLoadVolume?"":"none"}),this.elements.remarkElement=u.default.createElement("button",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn remark-btn",{display:this.props.isLoadRemark&&this.props.canRemark?"":"none"}),this.elements.enlargeWhiteboardElement=u.default.createElement("button",this.instanceId+"TalkcloudZoomBig","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-big-btn",{}),this.elements.narrowWhiteboardElement=u.default.createElement("button",this.instanceId+"TalkcloudZoomSmall","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-small-btn",{}),this.elements.volumeElement.innerHTML='\n            <span class="volume-slider-container" onclick="return false;" id="'+this.instanceId+'PageVolumeSlider" ></span>\n        ',this.elements.skipPageElement.innerHTML='\n            <div class="page-info-container" > \n                <span contenteditable="'+!this.props.isMobile+'" class="curr-page">1</span><em>/</em><span class="total-page">1</span>\n            </div>\n        ',this.elements.skipPageCurrpageElement=this.elements.skipPageElement.getElementsByClassName("curr-page")[0],this.elements.skipPageTotalpageElement=this.elements.skipPageElement.getElementsByClassName("total-page")[0],this.elements.skipPageCurrpageElement.oninput=function(e){var t=e.target.innerHTML;(!Number(t)||5<t.length)&&(e.target.innerHTML=t.substr(0,5))},this.elements.skipPageCurrpageElement.onclick=this.changePageOnClick.bind(this),this.elements.skipPageCurrpageElement.onfocus=this.changePageOnFocus.bind(this),this.elements.skipPageCurrpageElement.onblur=this.changePageOnBlur.bind(this),this.elements.skipPageCurrpageElement.onkeydown=this.changePageOnKeyDown.bind(this),this.elements.previousPageElement.onclick=this.prevPage.bind(this),this.elements.nextPageElement.onclick=this.nextPage.bind(this),this.elements.addPageElement.onclick=this.addPage.bind(this),this.elements.fullScreenElement.onclick=this.fullScreen.bind(this),this.elements.volumeElement.onclick=this.openDynamicPptVolumeOnClick.bind(this),this.elements.volumeElement.getElementsByClassName("volume-slider-container")[0].onclick=this.stopEvent.bind(this),this.elements.volumeElement.onmouseleave=this.closeDynamicPptVolumeOnMouseLeave.bind(this),this.elements.remarkElement.onclick=this.openOrCloseRemarkOnClick.bind(this),this.elements.enlargeWhiteboardElement.onclick=this.enlargeWhiteboard.bind(this),this.elements.narrowWhiteboardElement.onclick=this.narrowWhiteboard.bind(this),this.elementsViewClass.selectPageView=new l.default(this.elements.skipPageElement,{parentNode:this.parentNode,isMobile:this.props.isMobile,onChange:this.changeSelectPageOnChange.bind(this),noticeSelectExtendListShowOrHide:this.changeSelectPageNoticeSelectExtendListShowOrHide.bind(this)}),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.previousPageElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.skipPageElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.nextPageElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.addPageElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.enlargeWhiteboardElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.narrowWhiteboardElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.fullScreenElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.volumeElement),u.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.remarkElement),u.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement),window.TalkSlider&&(this.pageVolumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+"PageVolumeSlider",direction:"vertikal"},onBeforeChange:function(e){t.pageVolumeSlidering=!0},onAfterChange:function(e){t.pageVolumeSlidering=!1,t.changeDynamicPptVolume(e)}})),this._addTalkDrag()}},{key:"_addTalkDrag",value:function(){var e,t;this.props.isDrag&&window.TalkDrag&&this.elements.documentToolbarViewRootElement&&(this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0),e=void 0===(e=(t=this.props.initDragPosition||{}).left)?50:e,t=void 0===(t=t.top)?100:t,this.documentToolbarTalkDrag=new window.TalkDrag(this.elements.documentToolbarViewRootElement,{containerData:{left:e,top:t}}))}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e,o=this.state.viewState,n=o.remark,i=o.fullScreen,a=o.documentType;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var r=b.default.get(t).documentToolbar,s=r.prevPage,l=r.nextPage,d=r.prevStep,c=r.nextStep,u=r.addPage,h=r.enlargeWhiteboard,m=r.narrowWhiteboard,f=r.pptVolume,p=r.onRemark,g=r.offRemark,y=r.onGeneralDocumentFullScreen,v=r.offGeneralDocumentFullScreen,e=r.onDynamicPPTFullScreen,o=r.offDynamicPPTFullScreen,t=r.onH5DocumentFullScreen,r=r.offH5DocumentFullScreen,y=i?v:y;"dynamicPPT"===a?y=i?o:e:"h5Document"===a&&(y=i?r:t),this.elements.previousPageElement.title="dynamicPPT"===a?d:s,this.elements.nextPageElement.title="dynamicPPT"===a?c:l,this.elements.addPageElement.title=u,this.elements.fullScreenElement.title=y,this.elements.volumeElement.title=f,this.elements.remarkElement.title=n?g:p,this.elements.enlargeWhiteboardElement.title=h,this.elements.narrowWhiteboardElement.title=m}},{key:"_updateSelectInfo",value:function(){if(this.elementsViewClass.selectPageView){var e=this.state.viewState.page,t=void 0===e?{}:e,e=t.totalPage,o=void 0===e?1:e,e=t.currentPage,e=void 0===e?1:e,t=t.skipPage,t=void 0===t?{}:t,n=[];o<1&&(o=1),e<1&&(e=1);for(var i=1;i<=o;i++)n.push({label:i,value:i});this.elementsViewClass.selectPageView.setProps({selectOptions:n,currentValue:e,disabled:t.disabled,isMobile:this.props.isMobile}),this.elements.skipPageCurrpageElement.innerHTML=e,this.elements.skipPageTotalpageElement.innerHTML=o}}},{key:"_isShowRemarkBtn",value:function(){var e;this.elements.remarkElement&&(e=this.props.isLoadRemark&&this.props.canRemark&&this.state.viewState.remarkText,u.default.updateStyle(this.elements.remarkElement,{display:e?"":"none"}))}},{key:"render",value:function(){var e=this.state.viewState,t=e.page,o=void 0===t?{}:t,n=e.zoom,i=void 0===n?{}:n,a=e.documentType,r=e.fullScreen,s=e.remark,l=(e.fileid,o.prevPage),d=void 0===l?{}:l,c=o.nextPage,t=void 0===c?{}:c,n=o.prevStep,e=void 0===n?{}:n,l=o.nextStep,c=void 0===l?{}:l,n=o.addPage,l=void 0===n?{}:n,n=o.skipPage,n=void 0===n?{}:n,o=o.currentPage,o=i.zoom_big,o=void 0===o?{}:o,i=i.zoom_small,i=void 0===i?{}:i;this.elements.previousPageElement.disabled=("dynamicPPT"===a?e:d).disabled,this.elements.nextPageElement.disabled=("dynamicPPT"===a?c:t).disabled,this.elements.addPageElement.disabled=l.disabled,this.elements.enlargeWhiteboardElement.disabled=o.disabled,this.elements.narrowWhiteboardElement.disabled=i.disabled,n.disabled?u.default.addClass(this.elements.skipPageElement,"disabled"):u.default.removeClass(this.elements.skipPageElement,"disabled"),u.default.updateStyle(this.elements.nextPageElement,{display:l.disabled?"":"none"}),u.default.updateStyle(this.elements.addPageElement,{display:l.disabled?"none":""}),r?u.default.addClass(this.elements.fullScreenElement,"yes"):u.default.removeClass(this.elements.fullScreenElement,"yes"),u.default.updateStyle(this.elements.volumeElement,{display:this.props.isLoadVolume&&"dynamicPPT"===a&&0<this.state.dynamicPptAVSize?"":"none"}),s?u.default.addClass(this.elements.remarkElement,"yes"):u.default.removeClass(this.elements.remarkElement,"yes")}}]),n=h;function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function")}(this);n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,n));return n.parentNode=e,n.instanceId=t,n.whiteBoardManagerInstance=o,n.configration=i,n.elements={},n.elementsViewClass={},n.documentToolbarTalkDrag=void 0,n.state={updateState:!1,dynamicPptAVSize:0,tempDisabledDrag:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,remarkText:"",other:{primaryColor:n.configration.primaryColor,secondaryColor:n.configration.secondaryColor,backgroundColor:n.configration.backgroundColor,pencilWidth:n.configration.pencilWidth,shapeWidth:n.configration.shapeWidth,eraserWidth:n.configration.eraserWidth,fontSize:n.configration.fontSize,fontFamily:n.configration.fontFamily}}},n._createConnectElements(),n._updateSelectInfo(),n._updateLanguage(),n.render(),n}window.TalkDocumentToolbar=n,o.TalkDocumentToolbar=n,o.default=n},{"../../utils/DomUtils":339,"../../utils/Global":340,"../../utils/Language":341,"../../utils/Utils":344,"../components/Select":346,"../components/TalkcloudReact":347}],352:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=h(e("../components/TalkcloudReact")),s=h(e("../../utils/DomUtils")),d=h(e("../../utils/Utils")),c=h(e("../components/VideoDumb")),u=h(e("../components/MediaPlayerController"));function h(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(m,r.default),n(m,[{key:"shouldComponentUpdateState",value:function(e){if(e.streamInfo!==this.state.streamInfo&&e.streamInfo&&this.state.streamInfo&&e.streamInfo.attributes&&this.state.streamInfo.attributes){var t=!1,o=!0,n=!1,i=void 0;try{for(var a=Object.entries(this.state.streamInfo.attributes)[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var r=s.value,s=l(r,2),r=s[0],s=s[1];if("position"!==r&&s!==e.streamInfo.attributes[r]){t=!0;break}}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}if(e.streamInfo.attributes.position!==this.state.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateState",value:function(e){var t,o;e.streamInfo&&!this.state.streamInfo&&(o=this.elements.rootElement,d.default.getFullscreenElement()&&d.default.getFullscreenElement().id===o.id&&d.default.exitFullscreen()),this.elements.closeVideoPlayerElement&&this.state.streamInfo&&(t=!1,"file"===(o=this.state.streamInfo||{}).streamType&&o.userid!=this.props.myUserId&&(t=!0),s.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||t?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||t),this.state.streamInfo&&this.state.streamInfo.attributes?this.progressTimer&&"media"===this.state.streamInfo.streamType&&(this.state.streamInfo.userid==this.props.myUserId||0==this.props.myRole||1==this.props.myRole)||this.progressTimer&&this.state.streamInfo.attributes.pause?this._stopProgressTimer():this.progressTimer||this.state.streamInfo.attributes.pause||this._startProgressTimer():this.progressTimer&&this._stopProgressTimer(),this.videoDumb&&(e.volume!==this.state.volume&&this.videoDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.videoDumb.setProps({muteVolume:this.state.muteVolume}),e.streamInfo!==this.state.streamInfo&&this.videoDumb.setProps({streamInfo:this.state.streamInfo})),this.mediaPlayerControllerDumb&&(e.streamInfo!==this.state.streamInfo&&this.mediaPlayerControllerDumb.setProps({streamInfo:this.state.streamInfo}),e.volume!==this.state.volume&&this.mediaPlayerControllerDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.mediaPlayerControllerDumb.setProps({muteVolume:this.state.muteVolume}),e.isFullScreen!==this.state.isFullScreen&&this.mediaPlayerControllerDumb.setProps({isFullScreen:this.state.isFullScreen}))}},{key:"componentDidUpdateProps",value:function(e){var t,o;e.isLoadControl!==this.props.isLoadControl&&(!this.mediaPlayerControllerDumb&&this.props.isLoadControl?this._loadMediaPlayerController():this.mediaPlayerControllerDumb&&!this.props.isLoadControl&&(this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=void 0)),this.elements.closeVideoPlayerElement&&e.controlPermissions.hasClose!==this.props.controlPermissions.hasClose&&(t=!1,"file"===(o=this.state.streamInfo||{}).streamType&&o.userid!=this.props.myUserId&&(t=!0),s.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||t?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||t),this.mediaPlayerControllerDumb&&(e.myUserId!==this.props.myUserId&&this.mediaPlayerControllerDumb.setProps({myUserId:this.props.myUserId}),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?s.default.addClass(this.elements.rootElement,"tk-playback"):s.default.removeClass(this.elements.rootElement,"tk-playback"),this.mediaPlayerControllerDumb.setProps({isPlayback:this.props.isPlayback})),e.controlPermissions!==this.props.controlPermissions&&this.mediaPlayerControllerDumb.setProps({controlPermissions:this.props.controlPermissions})),this.videoDumb&&e.myUserId!==this.props.myUserId&&this.videoDumb.setProps({myUserId:this.props.myUserId})}},{key:"destroyView",value:function(){for(var e in s.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"receiveEventFullScreenChange",value:function(e){var t;d.default.isFullScreenStatus()?(t=this.elements.rootElement,d.default.getFullscreenElement()&&d.default.getFullscreenElement().id===t.id?this._changeFullScreenState(!0):this._changeFullScreenState(!1)):this._changeFullScreenState(!1)}},{key:"onPlayOrPauseClick",value:function(){var e=this;if("pc"===TK.SDKTYPE&&this.state.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()){var t,o,n,i,a,r=this.whiteBoardManagerInstance.getRoomDelegate();switch(this.state.streamInfo.streamType){case"media":this.state.streamInfo.attributes.pause?(o=void 0===(o=(i=this.state.streamInfo.attributes).position)?0:o,(void 0===(i=i.duration)?0:i)<=o&&r.seekMedia(0),r.pauseShareMedia(!1),s.default.updateStyle(this.elements.closeVideoPlayerElement,{display:""}),this.props.controlCallback&&this.props.controlCallback.play&&d.default.isFunction(this.props.controlCallback.play)&&this.props.controlCallback.play()):(r.pauseShareMedia(!0),s.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}),this.props.controlCallback&&this.props.controlCallback.pause&&d.default.isFunction(this.props.controlCallback.pause)&&this.props.controlCallback.pause());break;case"file":this.state.streamInfo.userid===this.props.myUserId&&r.getNativeInterface()&&(t=r.getNativeInterface(),this.state.streamInfo.attributes.pause?(o=(i=this.state.streamInfo.attributes).position,n=void 0===o?0:o,i=i.duration,a=void 0===i?0:i,this._updateLocalFileStreamInfoPlayerPosition(function(){a<=n+1e3&&t.seekMediaFile(0),t.pauseShareMediaFile(!1),e.props.controlCallback&&e.props.controlCallback.play&&d.default.isFunction(e.props.controlCallback.play)&&(e.props.controlCallback.play(),s.default.updateStyle(e.elements.closeVideoPlayerElement,{display:""}))})):(t.pauseShareMediaFile(!0),this.props.controlCallback&&this.props.controlCallback.pause&&d.default.isFunction(this.props.controlCallback.pause)&&(this.props.controlCallback.pause(),s.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}))))}}}},{key:"onChangeVolume",value:function(e){var t={volume:e};0!==e||this.state.muteVolume?0!==e&&this.state.muteVolume&&(t.muteVolume=!1):t.muteVolume=!0,this.setState(t)}},{key:"onChangeProgress",value:function(e){if("mobile"!==TK.SDKTYPE&&this.state.streamInfo&&this.state.streamInfo.attributes&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.state.streamInfo.streamType){case"media":var t=e/100;t<0&&(t=0),1<t&&(t=1);var o=this.state.streamInfo.attributes.duration*t;this._updateStreamInfoAttributes("position",o),this.whiteBoardManagerInstance.getRoomDelegate().seekMedia(t);break;case"file":this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&((o=e/100)<0&&(o=0),1<o&&(o=1),t=this.state.streamInfo.attributes.duration*o,this._updateStreamInfoAttributes("position",t),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(o))}}},{key:"onVolumeMuteClick",value:function(){var e={muteVolume:!this.state.muteVolume};!e.muteVolume&&this.state.volume<=0&&(e.volume=100),this.setState(e)}},{key:"onCloseClick",value:function(){if(this.state.streamInfo&&this.whiteBoardManagerInstance)switch(this.state.streamInfo.streamType){case"media":this.whiteBoardManagerInstance.stopShareMedia();break;case"file":this.whiteBoardManagerInstance.stopShareLocalMedia()}}},{key:"onFullScreenClick",value:function(){var e;this.state.isFullScreen?d.default.exitFullscreen():(d.default.isFullScreenStatus()&&d.default.exitFullscreen(),e=this.elements.rootElement,d.default.launchFullscreen(e))}},{key:"_createElements",value:function(){this.elements.rootElement=s.default.createElement("section",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-container "+(this.isVideoPlayer?"tk-video-player-container ":"tk-audio-player-container ")+(this.props.isPlayback?"tk-playback ":" "),{display:this.state.streamInfo?"":"none"}),this.elements.mediaSourceElement=s.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerSourceBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-source",{display:this.isVideoPlayer?"":"none"});var e=!1,t=this.state.streamInfo||{};"file"===t.streamType&&t.userid!=this.props.myUserId&&(e=!0),this.isVideoPlayer&&(this.elements.closeVideoPlayerElement=s.default.createElement("button",void 0,"talkcloud-sdk-whiteboard add-cursor-pointer tk-video-player-close-btn ",{display:!this.props.controlPermissions.hasClose||e?"none":""})),this.elements.mediaTotalControlElement=s.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerTotalControlBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control-box",{}),this.isVideoPlayer&&(this.elements.rootElement.onmouseover=this._videoMouseover.bind(this),this.elements.rootElement.onmouseout=this._videoMouseout.bind(this),this.elements.rootElement.onclick=this._videoClick.bind(this),this.elements.mediaTotalControlElement.onmouseover=this._videoControlMouseover.bind(this),this.elements.mediaTotalControlElement.onclick=this._videoControlClick.bind(this))}},{key:"_videoMouseover",value:function(){var e=this;s.default.addClass(this.elements.rootElement,"show-controller"),clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){s.default.removeClass(e.elements.rootElement,"show-controller")},2e3)}},{key:"_videoMouseout",value:function(){s.default.removeClass(this.elements.rootElement,"show-controller")}},{key:"_videoClick",value:function(e){var t=this;this.elements.rootElement.classList.toggle("show-controller")&&(clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){s.default.removeClass(t.elements.rootElement,"show-controller")},2e3))}},{key:"_videoControlMouseover",value:function(e){clearTimeout(this.showControllerTimer),s.default.addClass(this.elements.rootElement,"show-controller"),e.stopPropagation()}},{key:"_videoControlClick",value:function(e){e.stopPropagation()}},{key:"_connectElements",value:function(){s.default.appendChild(this.elements.rootElement,this.elements.mediaSourceElement),s.default.appendChild(this.elements.rootElement,this.elements.mediaTotalControlElement),this.elements.closeVideoPlayerElement&&s.default.appendChild(this.elements.rootElement,this.elements.closeVideoPlayerElement),s.default.appendChild(this.parentNode,this.elements.rootElement),this.props.isLoadControl&&this._loadMediaPlayerController(),this.elements.closeVideoPlayerElement&&(this.elements.closeVideoPlayerElement.onclick=this.onCloseClick.bind(this))}},{key:"_loadMediaPlayerController",value:function(){this.props.isLoadControl?(this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=new u.default(this.elements.mediaTotalControlElement,this.instanceId,this.whiteBoardManagerInstance,{streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,isFullScreen:this.state.isFullScreen,isPlayback:this.props.isPlayback,myUserId:this.props.myUserId,controlPermissions:this.props.controlPermissions,isVideoPlayer:this.isVideoPlayer,onCloseClick:this.onCloseClick.bind(this),onPlayOrPauseClick:this.onPlayOrPauseClick.bind(this),onChangeVolume:this.onChangeVolume.bind(this),onVolumeMuteClick:this.onVolumeMuteClick.bind(this),onChangeProgress:this.onChangeProgress.bind(this),onFullScreenClick:this.onFullScreenClick.bind(this)})):this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),e=Math.round(e%60);return 60===e&&(t+=1,e=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(e/10)&&(e="0"+e),t+":"+e}},{key:"_startProgressTimer",value:function(){var r=this;this.props.isPlayback?this._stopProgressTimer():(this._stopProgressTimer(),this.state.streamInfo&&("media"!==this.state.streamInfo.streamType||this.state.streamInfo.userid!=this.props.myUserId&&0!=this.props.myRole&&1!=this.props.myRole?this.progressTimer=setInterval(function(){if(r.state.streamInfo){var e=r.state.streamInfo,t=e.userid,o=e.streamType,e=e.attributes,n=void 0===e?{}:e;switch(o){case"media":if("media"===r.state.streamInfo.streamType&&(r.state.streamInfo.userid==r.props.myUserId||0==r.props.myRole||1==r.props.myRole))return void r._stopProgressTimer();var i=n.position,a=void 0===i?0:i,i=n.duration,i=void 0===i?0:i;i<(a+=r.progressIntervalDuration)&&(a=i,r._stopProgressTimer()),r._updateStreamInfoAttributes("position",a);break;case"file":t!==r.props.myUserId?(a=void 0===(i=n.position)?0:i,(i=void 0===(i=n.duration)?0:i)<(a+=r.progressIntervalDuration)&&(a=i,r._stopProgressTimer()),r._updateStreamInfoAttributes("position",a)):r._updateLocalFileStreamInfoPlayerPosition()}}else r._stopProgressTimer()},this.progressIntervalDuration):this._stopProgressTimer()))}},{key:"_stopProgressTimer",value:function(){clearInterval(this.progressTimer),this.progressTimer=null}},{key:"_updateStreamInfoAttributes",value:function(e,t){var o;this.state.streamInfo&&((o={})[e]=t,this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:o})}))}},{key:"_updateLocalFileStreamInfoPlayerPosition",value:function(n){var i=this;this.state.streamInfo&&"file"===this.state.streamInfo.streamType&&this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().getMediaFileProgress(function(e){var t,o;"object"===(void 0===e?"undefined":a(e))&&(t=void 0===(o=e.position)?0:o,(o=void 0===(o=e.duration)?0:o)<t&&(t=o,i._stopProgressTimer()),i._updateStreamInfoAttributes("position",t),d.default.isFunction(n)&&n(e))})}},{key:"_changeFullScreenState",value:function(e){this.setState({isFullScreen:e})}},{key:"getVideoDumbElementId",value:function(){if(this.videoDumb)return this.videoDumb.getElementId()}},{key:"render",value:function(){this.state.streamInfo&&!this.videoDumb?this.videoDumb=new c.default(this.elements.mediaSourceElement,this.instanceId,this.whiteBoardManagerInstance,{videoDumbElementIdPrefix:this.instanceId,streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,myUserId:this.props.myUserId}):!this.state.streamInfo&&this.videoDumb&&(this.videoDumb.destroyView(),this.videoDumb=void 0),s.default.updateStyle(this.elements.rootElement,{display:this.state.streamInfo?"":"none"})}}]),n=m;function m(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=5<arguments.length&&void 0!==arguments[5]&&arguments[5];!function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this);n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,n));return n.isVideoPlayer=a,n.parentNode=e,n.instanceId=t,n.whiteBoardManagerInstance=o,n.configration=i,n.state={streamInfo:void 0,volume:100,muteVolume:!1,isFullScreen:!1},n.progressIntervalDuration=1e3,n.elements={},n.videoDumb=void 0,n._createElements(),n._connectElements(),n.render(),n}o.default=n},{"../../utils/DomUtils":339,"../../utils/Utils":344,"../components/MediaPlayerController":345,"../components/TalkcloudReact":347,"../components/VideoDumb":348}],353:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkVideoPlayer=void 0;var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=s(e("../../utils/Global")),r=s(e("../../utils/Utils"));function s(e){return e&&e.__esModule?e:{default:e}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(l,s(e("./MediaPlayer")).default),n(l,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,n=t.userId,i=t.attributes,i=void 0===i?{}:i,t=t.published;("media"===o||"file"===o)&&i.audio&&i.video&&(t?(a.default.isPlayVideoing=!0,this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:n,streamType:o,audio:i.audio,video:i.video,attributes:i}}),n===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0)),i=i.pause,this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(i?"pause":"play",e),this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand({type:"room-receiveActionCommand",message:{action:"closeDynamicPptWebPlay"}})):(a.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)))}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,n=t.attributes,n=void 0===n?{}:n,t=t.updateAttributes,t=void 0===t?{}:t;("media"===o||"file"===o)&&n.audio&&n.video&&this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:t})}),void 0!==t.pause&&this.sendMediaPlayerNoticeActionCommand(t.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:a.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:a.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,n=o.type,i=o.userId,a=o.attributes,t=void 0===a?{}:a;("media"===n||"file"===n)&&t.audio&&t.video&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")&&((o=this.whiteBoardManagerInstance.whiteboardViewMap.get("default"))&&o.sendActionCommand&&(a=void 0,(t={playerType:"videoPlayer",userid:i,streamType:n,audio:t.audio,video:t.video,attributes:t}).isDynamicPptVideo="dynamicPPT"===t.attributes.source||"videoPlayer"===t.playerType&&""===t.attributes.filename,a=Object.deepAssign({type:e,fileid:t.attributes.fileid},t),o.sendActionCommand("mediaPlayerNotice",a),r.default.isFunction(o.forceViewStateUpdate)&&o.forceViewStateUpdate()))}}]),n=l;function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,o,n,i,!0));return n.configration=i,n}window.TalkVideoPlayer=n,o.TalkVideoPlayer=n,o.default=n},{"../../utils/Global":340,"../../utils/Utils":344,"./MediaPlayer":352}],354:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=r(e("../../utils/DomUtils")),a=r(e("../../utils/Configuration")),f=r(e("../../utils/Constant")),oe=r(e("../../utils/Global")),p=r(e("../../utils/Utils")),ne=r(e("../../intermediateLayer/WhiteboardIntermediateLayer")),g=r(e("../../intermediateLayer/DynamicPptIntermediateLayer")),y=r(e("../../intermediateLayer/H5DocumentPptIntermediateLayer"));function r(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}n(s,[{key:"getConfigration",value:function(){return this.configration}},{key:"saveFiledataAndLoadCurrpageWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._saveFiledataAndLoadCurrpageWhiteboardData(e)}},{key:"noticeWhiteboardActionCommand",value:function(e,t){if("default"===this.instanceId)switch(e){case"playOrPauseDynamicPpt":"dynamicPPT"===this.fileTypeMark&&g.default.postMessage(this.instanceId,{action:t.pause?"stopDynamicPpt":"playDynamicPpt"});break;case"updateMute":"dynamicPPT"===this.fileTypeMark&&g.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:{type:"updateMute",data:{mute:t.isMute}}});break;case"ExtendedNotice":"dynamicPPT"===this.fileTypeMark&&g.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:t.extendedData});break;case"closeDynamicPptAutoVideo":"dynamicPPT"===this.fileTypeMark&&g.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}},{key:"reloadCurrentDocument",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("default"===this.instanceId||this.configration.hasExtendDocument)switch(this.fileTypeMark){case"generalDocument":var t=ne.default.getWhiteboardFiledata(this.instanceId),o=(t.cospdfpath,t.swfpath),n=t.isContentDocument,i=t.fileid,a=t.filetype,t=t.currpage;o&&"whiteboard"!==a&&0!=i&&(i=void 0,Number(n)?o&&(i=o):(n=o.lastIndexOf("."),n=o.substring(n),n=o.replace(n,"-"+t+n),i=oe.default.nowUseDocAddress+n),ne.default.setWhiteboardWatermarkImage(this.instanceId,i,{resetDedaultWhiteboardMagnification:!1}));break;case"dynamicPPT":e.isAgainreconnect||(this.forceReloadTimestampFromPpt=(new Date).getTime()),this._loadCurrentDynamicPpt({},{isAgainreconnect:e.isAgainreconnect});break;case"h5Document":this._loadCurrentH5Document({forceReloadTimestamp:(new Date).getTime()})}}},{key:"changeDocumentRemarkState",value:function(e){this.remark=e&&this.configration.canRemark,this._viewStateUpdate()}},{key:"changeFullScreenState",value:function(e){this.fullScreen=e,this._viewStateUpdate(),this.resizeWhiteboardHandler()}},{key:"destroyWhiteboardView",value:function(){for(var e in ne.default.hasWhiteboardById(this.instanceId)&&ne.default.destroyWhiteboardInstance(this.instanceId),g.default.hasDynamicPptById(this.instanceId)&&g.default.destroyDynamicPptInstance(this.instanceId),y.default.hasH5DocumentById(this.instanceId)&&y.default.destroyH5DocumentInstance(this.instanceId),u.default.removeChild(this.elements.whiteboardViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"changeWhiteBoardConfigration",value:function(e){Object.deepAssign(this.configration,e);var t={},o={},n={},i=!0,a=!1,r=void 0;try{for(var s=Object.entries(e)[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var l=d.value,d=te(l,2),l=d[0],d=d[1];"canDraw"===l?t.deawPermission=this.configration.canDraw&&this.configration.synchronization:"myUserId"===l?t.myselfId=d:"myName"===l?t.nickname=d:"primaryColor"===l||"secondaryColor"===l||"primaryColor"===l?t[l.replace(/Color/g,"")]=d:"synchronization"===l?t.synchronizationWhiteboard=this.configration.synchronization:t[l]=d,"synchronization"===l?o.synchronizationDynamicPpt=this.configration.synchronization:"actionClick"===l?o.dynamicPptActionClick=this.configration.actionClick:o[l]=d,"synchronization"===l?n.synchronizationH5Document=this.configration.synchronization:"actionClick"===l?n.h5DocumentActionClick=this.configration.actionClick:n[l]=d}}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}t.synchronizationWhiteboard=this.configration.synchronization,o.synchronizationDynamicPpt=this.configration.synchronization,n.synchronizationH5Document=this.configration.synchronization,o.dynamicPptActionClick=this.configration.actionClick,n.h5DocumentActionClick=this.configration.actionClick,t.deawPermission=this.configration.canDraw&&this.configration.synchronization,void 0!==e.synchronization&&(t.deawPermission=this.configration.canDraw&&this.configration.synchronization),ne.default.updateWhiteboardProperty(this.instanceId,t),(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.updateDynamicPptProperty(this.instanceId,o),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.updateH5DocumentProperty(this.instanceId,n),void 0!==e.loadDynamicPptView&&this.elements.dynamicPptViewElement&&(e.loadDynamicPptView&&!document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))?(u.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),this._productionDynamicPpt()):!e.loadDynamicPptView&&document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))&&(g.default.hasDynamicPptById(this.instanceId)&&g.default.destroyDynamicPptInstance(this.instanceId),u.default.removeChild(this.elements.dynamicPptViewElement,this.elements.documentViewElement))),void 0!==e.loadH5DocumentView&&this.elements.h5DocumentViewElement&&(e.loadH5DocumentView&&!document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))?(u.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),this._productionH5Document()):!e.loadH5DocumentView&&document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))&&(y.default.hasH5DocumentById(this.instanceId)&&y.default.destroyH5DocumentInstance(this.instanceId),u.default.removeChild(this.elements.h5DocumentViewElement,this.elements.documentViewElement))),void 0!==e.rootBackgroundColor&&u.default.updateStyle(this.elements.whiteboardViewRootElement,{backgroundColor:e.rootBackgroundColor}),void 0!==e.isMobile&&(e.isMobile?u.default.addClass(this.elements.whiteboardViewRootElement,"app-mobile"):u.default.removeClass(this.elements.whiteboardViewRootElement,"app-mobile")),void 0===e.canPage&&void 0===e.addPage||this._viewStateUpdate()}},{key:"receiveEventRoomPubmsg",value:function(e){e&&"string"==typeof e&&(e=JSON.parse(e)),"object"===(void 0===e?"undefined":ee(e))&&e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),"object"===ee(e.message)&&e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(t.name){case"ShowPage":case"ExtendShowPage":t.source="room-pubmsg",this._handleShowPageSignalling(t,e.local);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?ne.default.activeWhiteboardTool("tool_mouse",this.instanceId):ne.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this.volume=100*t.data.volume,this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"receiveEventRoomDelmsg",value:function(e){}},{key:"receiveEventRoomMsglist",value:function(e,t){switch(e){case"ShowPage":case"ExtendShowPage":t.source="room-msglist",this._handleShowPageSignalling(t);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?ne.default.activeWhiteboardTool("tool_mouse",this.instanceId):ne.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e,t){switch(e){case"fullScreenChangeCallback":this.changeFullScreenState(t.isFullScreen);break;case"changeDynamicPptSize":this.configration.isMobile&&"dynamicPPT"===this.fileTypeMark&&g.default.changeDynamicPptSize(this.instanceId);break;case"closeDynamicPptWebPlay":"dynamicPPT"===this.fileTypeMark&&g.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}},{key:"sendActionCommand",value:function(e,t){this.receiveActionCommand&&"function"==typeof this.receiveActionCommand&&("object"!==(void 0===t?"undefined":ee(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),this.receiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.pubMsg&&this.whiteBoardManagerInstance.pubMsg(e)}},{key:"delMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.delMsg&&this.whiteBoardManagerInstance.delMsg(e)}},{key:"getWhiteboardViewState",value:function(){return this.whiteboardViewState}},{key:"forceViewStateUpdate",value:function(){this._viewStateUpdate()}},{key:"useWhiteboardTool",value:function(e){var t;this.whiteboardViewState.tool[e]&&this.whiteboardViewState.tool[e].disabled?L.Logger.warning("whiteboard tool("+e+") state is disabled , cannot use "+e+" tool!"):(("default"===this.instanceId||this.configration.hasExtendDocument)&&this.configration.synchronization&&e!==ne.default.getActiveTool(this.instanceId)&&("tool_mouse"!==e&&"tool_mouse"===ne.default.getActiveTool(this.instanceId)||"tool_mouse"===e&&"tool_mouse"!==ne.default.getActiveTool(this.instanceId))&&(t={name:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool",id:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,selectMouse:"tool_mouse"===e},save:!0},this.pubMsg(t)),ne.default.activeWhiteboardTool(e,this.instanceId))}},{key:"executeWhiteboardAction",value:function(e){this.whiteboardViewState.action[e]&&this.whiteboardViewState.action[e].disabled?L.Logger.warning("whiteboard action("+e+") state is disabled , cannot execute "+e+" action!"):ne.default.activeWhiteboardTool(e,this.instanceId)}},{key:"executeZoomWhiteaord",value:function(e){this.whiteboardViewState.zoom[e]&&this.whiteboardViewState.zoom[e].disabled?L.Logger.warning("whiteboard zoom("+e+") state is disabled , cannot execute "+e+" zoom!"):ne.default.activeWhiteboardTool(e,this.instanceId)}},{key:"addPage",value:function(){var e=ne.default.getWhiteboardFiledata(this.instanceId),t=e.fileid,e=e.pagenum;"generalDocument"===this.fileTypeMark||0!==Number(t)?(e++,ne.default.updateWhiteboardFiledata(this.instanceId,{pagenum:e}),this.configration.synchronization&&(t={name:"default"===this.instanceId?"WBPageCount":"ExtendWBPageCount",id:"default"===this.instanceId?"WBPageCount":"WBPageCount_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,totalPage:e,fileid:t},save:!0},this.pubMsg(t)),this.nextPage()):L.Logger.warning("whiteboard addPage method can only be used in pure whiteboard.")}},{key:"nextPage",value:function(){var t=this;if(this.whiteboardViewState.page.nextPage&&this.whiteboardViewState.page.nextPage.disabled)L.Logger.warning("whiteboard nexPage state is disabled , cannot execute nextPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=ne.default.getWhiteboardFiledata(this.instanceId),o=e.currpage,e=e.pagenum;e<++o&&(o=e);o={data:{filedata:{currpage:o}}};this._sendSignalling_ShowPage(o,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":y.default.nextPage(this.instanceId);break;case"dynamicPPT":g.default.nextSlide(this.instanceId)}}},{key:"prevPage",value:function(){var t=this;if(this.whiteboardViewState.page.prevPage&&this.whiteboardViewState.page.prevPage.disabled)L.Logger.warning("whiteboard prevPage state is disabled , cannot execute prevPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=ne.default.getWhiteboardFiledata(this.instanceId).currpage;--e<1&&(e=1);e={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(e,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":y.default.prevPage(this.instanceId);break;case"dynamicPPT":g.default.prevSlide(this.instanceId)}}},{key:"skipPage",value:function(e){var t=this;switch(this.fileTypeMark){case"generalDocument":var o=ne.default.getWhiteboardFiledata(this.instanceId).pagenum;o<e&&(e=o),e<1&&(e=1);o={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(o,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":y.default.skipPage(this.instanceId,e);break;case"dynamicPPT":g.default.jumpToAnimation(this.instanceId,e,0,!0)}}},{key:"nextStep",value:function(){"dynamicPPT"===this.fileTypeMark?this.whiteboardViewState.page.nextStep&&this.whiteboardViewState.page.nextStep.disabled?L.Logger.warning("whiteboard nextStep state is disabled , cannot execute nextStep method!"):"dynamicPPT"===this.fileTypeMark&&g.default.nextStep(this.instanceId):L.Logger.warning("whiteboard nextStep method can only be used in dynamic PPT files.")}},{key:"prevStep",value:function(){"dynamicPPT"===this.fileTypeMark?this.whiteboardViewState.page.prevStep&&this.whiteboardViewState.page.prevStep.disabled?L.Logger.warning("whiteboard prevStep state is disabled , cannot execute prevStep method!"):"dynamicPPT"===this.fileTypeMark&&g.default.prevStep(this.instanceId):L.Logger.warning("whiteboard prevStep method can only be used in dynamic PPT files.")}},{key:"resizeWhiteboardSizeCallback",value:function(e){e.loadScrollBar?u.default.addClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"):u.default.removeClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"),u.default.updateStyle(this.elements.documentViewElement,{width:e.style.width,height:e.style.height}),u.default.updateStyle(this.elements.totalDocumentViewElement,{width:e.style.width,height:e.style.height,top:"50%",left:"50%"}),u.default.updateStyle(this.elements.totalDocumentViewElement,{marginLeft:"-"+this.elements.totalDocumentViewElement.offsetWidth/2+"px",marginTop:"-"+this.elements.totalDocumentViewElement.offsetHeight/2+"px"})}},{key:"noticeUpdateToolDescCallback",value:function(){this._viewStateUpdate()}},{key:"noticeUpdateWhiteboardFiledataCallback",value:function(){this._viewStateUpdate()}},{key:"receiveActionCommandCallback",value:function(e,t){if(t.id===this.instanceId)switch(e){case"closeAllSelectBox":this.sendActionCommand("closeAllSelectBox");break;case"changeWhiteboardActiveTool":this._updateViewShowAndHide();break;case"updateWhiteboardWatermarkImageScale":ne.default.updateWhiteboardWatermarkImageScale(this.instanceId,t.scale);break;case"dynamicPptLoadEnd":case"h5DocumentLoadEnd":case"generalDocumentLoadEnd":u.default.removeClass(this.elements.disableClickViewElement,"loading"),this.scale=t.scale,this._viewStateUpdate();var o=ne.default.getWhiteboardFiledata(this.instanceId);o.success=t.success,o.reloadNumber=t.reloadNumber,o.filePath=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress+o.swfpath;o={loadSuccessData:o};this.sendActionCommand("documentLoadSuccess",o);break;case"h5DocumentReloadFail":case"dynamicPptReloadFail":case"generalDocumentReloadFail":var n=ne.default.getWhiteboardFiledata(this.instanceId);n.success=t.success,n.reloadNumber=t.reloadNumber;var i={loadFailData:n};this.sendActionCommand("documentLoadFail",i);break;case"sendSignalling_ShowPage":this._sendSignalling_ShowPage(t.updatePubmsgData);break;case"saveFiledataAndLoadCurrpageWhiteboardData":case"dynamicPptSlideChange":this._saveFiledataAndLoadCurrpageWhiteboardData(t.updateFileData);break;case"dynamicPptStepChange":ne.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"publishDymanicPptNetworkMedia":"default"===this.instanceId&&(g.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"}),l=(r=ne.default.getWhiteboardFiledata(this.instanceId)).swfpath,n=r.isContentDocument,i=r.baseurl,console.error("Dymanic PPT fileData: ",r),r=void 0,Number(n)?l&&(r=l.replace(/\/newppt.html/g,"")):r=i||oe.default.nowUseDocAddress+l,t.url=r+"/"+t.url,this.whiteBoardManagerInstance&&(this.configration.clientMediaShare&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile?this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile(t.url,void 0,void 0,{IgnoreElementId:!0,toID:this.configration.mediaShareToID,attrs:t.attributes}):this.whiteBoardManagerInstance.startShareMedia(t.url,t.video,this.configration.mediaShareToID,t.attributes)));break;case"publishH5DocumentNetworkMedia":var a=t.url;a=(a=a.replace(/^https/,"http")).replace(/443/g,"80"),!this.whiteBoardManagerInstance||(s=this.whiteBoardManagerInstance.getRoomDelegate()).isPlayAudio&&(s.isPlayAudio(a,t.isPlay,c({},t.attributes,{status:t.status})),s.setPptVideoVolume&&s.setPptVideoVolume(100));break;case"publishDymanicPptNetworkAudio":var r,s,l;this.configration.isNativePlayAudio&&(r=(l=ne.default.getWhiteboardFiledata(this.instanceId)).swfpath,a=l.isContentDocument,s=l.baseurl,console.error("Dymanic PPT fileData: ",l),l=void 0,Number(a)?r&&(l=r.replace(/\/newppt.html/g,"")):l=s||oe.default.nowUseDocAddress+r,l=(l=l.replace(/^https/,"http")).replace(/443/g,"80"),t.url=l+"/"+t.url,this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate().isPlayAudio&&(this.whiteBoardManagerInstance.getRoomDelegate().isPlayAudio(t.url,t.isPlay,t.attributes),this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume(this.volume)));break;case"updateWhiteboardFiledata":ne.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"getWhiteboardFiledata":t&&t.callback&&"function"==typeof t.callback&&t.callback(ne.default.getWhiteboardFiledata(this.instanceId));break;case"reloadCurrentDocument":this.reloadCurrentDocument({isAgainreconnect:t.isAgainreconnect});break;case"reloadDynamicPptIframeSrc":t.iframeSrc&&"dynamicPPT"===this.fileTypeMark&&new RegExp(ne.default.getWhiteboardFiledata(this.instanceId).swfpath+"/newppt.html","g").test(t.iframeSrc)&&(d=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress,oe.default.docAddressKey=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey,!0),this.whiteBoardManagerInstance&&p.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",oe.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(h(oe.default.docAddressList)),docAddressIndex:oe.default.docAddressKey,oldDocAddress:d,nowDocAddress:p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress})),oe.default.nowUseDocAddress=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload dynamic ppt]change doc address , old address is "+d+" , now address is "+oe.default.nowUseDocAddress),void 0!==t.forceReloadNumber&&(this.forceReloadNumberFromPpt=t.forceReloadNumber),this._loadCurrentDynamicPpt(),L.Logger.info("["+t.source+"]load dynamic ppt failure , reload file , old url is "+t.iframeSrc+" , now url is "+g.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber));break;case"reloadH5DocumentIframeSrc":var d;t.iframeSrc&&"h5Document"===this.fileTypeMark&&new RegExp(ne.default.getWhiteboardFiledata(this.instanceId).swfpath,"g").test(t.iframeSrc)&&(d=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress,oe.default.docAddressKey=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey,!0),this.whiteBoardManagerInstance&&p.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",oe.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(h(oe.default.docAddressList)),docAddressIndex:oe.default.docAddressKey,oldDocAddress:d,nowDocAddress:p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress})),oe.default.nowUseDocAddress=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload h5 document]change doc address , old address is "+d+" , now address is "+oe.default.nowUseDocAddress),d={},t.forceReloadNumber&&(d.forceReloadNumber=t.forceReloadNumber),this._loadCurrentH5Document(d,{forceReloadNumber:t.forceReloadNumber}),L.Logger.info("["+t.source+"]load h5 document failure , reload file , old url is "+t.iframeSrc+" , now url is "+g.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber));break;case"updateWhiteboardToolsInfo":this._viewStateUpdate();break;case"h5DocumentOnJumpPage":this.whiteBoardManagerInstance.skipPage(t.toPage,this.instanceId)}}},{key:"whiteboardWatermarkImageOnFailureCallback",value:function(e){var t,o=ne.default.getWhiteboardFiledata(this.instanceId),n=(o.cospdfpath,o.swfpath),i=o.currpage,a=o.filetype,r=o.isContentDocument;"generalDocument"===this.fileTypeMark&&n&&e&&"whiteboard"!==a&&this.generalDocumentFileForceReloadNumber<this.maxGeneralFileForceReloadNumber&&(o=void 0,o=Number(r)?n:(a=n.lastIndexOf("."),a=n.substring(a),n.replace(a,"-"+i+a)),new RegExp(o,"g").test(e)?(Number(r)?(this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file ,  url is "+o+" , reload number is "+this.generalDocumentFileForceReloadNumber)):(t=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress,oe.default.docAddressKey=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey,!0),this.whiteBoardManagerInstance&&p.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",oe.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(h(oe.default.docAddressList)),docAddressIndex:oe.default.docAddressKey,oldDocAddress:t,nowDocAddress:p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress})),oe.default.nowUseDocAddress=p.default.getItem(oe.default.docAddressList,oe.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload general document]change doc address , old address is "+t+" , now address is "+oe.default.nowUseDocAddress),this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file , old url is "+(t+o)+" , now url is "+(oe.default.nowUseDocAddress+o)+" , reload number is "+this.generalDocumentFileForceReloadNumber)),t=void 0,Number(r)?o&&(t=o):t=oe.default.nowUseDocAddress+o,ne.default.setWhiteboardWatermarkImage(this.instanceId,t,{resetDedaultWhiteboardMagnification:!1})):this.generalDocumentFileForceReloadNumber=0),this.generalDocumentFileForceReloadNumber>=this.maxGeneralFileForceReloadNumber&&this.sendActionCommand("generalDocumentReloadFail",{reloadNumber:this.generalDocumentFileForceReloadNumber,success:!1})}},{key:"whiteboardWatermarkImageOnloadCallback",value:function(e){var t=e.width,e=e.height;this.scale=t/e,this.sendActionCommand("generalDocumentLoadEnd",{reloadNumber:this.generalDocumentFileForceReloadNumber,success:!0,scale:this.scale}),this._viewStateUpdate()}},{key:"resizeWhiteboardHandler",value:function(){ne.default.resizeWhiteboardHandler(this.instanceId),"dynamicPPT"===this.fileTypeMark&&"ios"===this.configration.clientType&&g.default.changeDynamicPptSize(this.instanceId)}},{key:"isWhiteboardTextEditing",value:function(){return ne.default.isWhiteboardTextEditing(this.instanceId)}},{key:"resetWhiteboardData",value:function(){this.whiteboardViewState={tool:{},action:{},zoom:{},page:{},documentType:this.fileTypeMark,fileid:this.fileid,dynamicPptVolume:this.dynamicPptVolume,fullScreen:this.fullScreen,remark:this.remark,scale:this.scale,remarkText:this.remarkText,other:{primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily}},ne.default.clearWhiteboardAllDataById(this.instanceId)}},{key:"receiveWindowMessageEvent",value:function(e){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.receiveWindowMessageEvent(this.instanceId,e),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.receiveWindowMessageEvent(this.instanceId,e)}},{key:"getWhiteboardRootElement",value:function(){return this.elements.whiteboardViewRootElement}},{key:"resetPureWhiteboardTotalPage",value:function(e){if(1<e)for(var t=2;t<=e;t++)ne.default.clearWhiteboardDataByFileidAndCurrpage(this.instanceId,0,t);var o=ne.default.getWhiteboardFiledata(this.instanceId);0==o.fileid&&(o.currpage=1,o.pagenum=1,this._saveFiledataAndLoadCurrpageWhiteboardData(o),this._generalDocumentFileShowPage(!1))}},{key:"getDynamicPptInstanceByID",value:function(){return g.default.getDynamicPptInstanceByID(this.instanceId)}},{key:"getH5DocumentInstanceByID",value:function(){return y.default.getH5DocumentInstanceByID(this.instanceId)}},{key:"_createElements",value:function(){this.elements.whiteboardViewRootElement=u.default.createElement("section",this.instanceId+"TalkcloudSdkWhiteboardRoot",(this.configration.isMobile?"app-mobile ":" ")+"talkcloud-sdk-whiteboard "+this.instanceId+" sdkwhiteboard-root",{width:"100%",height:"100%",position:"relative",left:0,top:0,backgroundColor:this.configration.rootBackgroundColor}),this.elements.totalDocumentViewElement=u.default.createElement("section",this.instanceId+"TalkcloudTotalDocument","talkcloud-sdk-whiteboard "+this.instanceId+" total-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,maxWidth:"100%",maxHeight:"100%"}),this.elements.documentViewElement=u.default.createElement("section",this.instanceId+"TalkcloudDocument","talkcloud-sdk-whiteboard "+this.instanceId+" document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0}),this.elements.whiteboardViewElement=u.default.createElement("article",this.instanceId+"TalkcloudWhiteboard","talkcloud-sdk-whiteboard "+this.instanceId+" whiteboard-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:2}),this.elements.dynamicPptViewElement=u.default.createElement("article",this.instanceId+"TalkcloudDynamicPpt","talkcloud-sdk-whiteboard "+this.instanceId+" dynamic-ppt-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.h5DocumentViewElement=u.default.createElement("article",this.instanceId+"TalkcloudH5Document","talkcloud-sdk-whiteboard "+this.instanceId+" h5-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.disableClickViewElement=u.default.createElement("div",void 0,"talkcloud-sdk-whiteboard "+this.instanceId+" disable-clock-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:4})}},{key:"_connectElements",value:function(){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&u.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&u.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),u.default.appendChild(this.elements.documentViewElement,this.elements.whiteboardViewElement),u.default.appendChild(this.elements.documentViewElement,this.elements.disableClickViewElement),u.default.appendChild(this.elements.totalDocumentViewElement,this.elements.documentViewElement),u.default.appendChild(this.elements.whiteboardViewRootElement,this.elements.totalDocumentViewElement),u.default.appendChild(this.parentNode,this.elements.whiteboardViewRootElement),this._productionWhiteboard(),this._productionDynamicPpt(),this._productionH5Document()}},{key:"_productionWhiteboard",value:function(){var l=this;ne.default.hasWhiteboardById(this.instanceId)&&ne.default.destroyWhiteboardInstance(this.instanceId);var e={whiteboardElementId:this.elements.whiteboardViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},delSignallingToServer:function(e,t,o,n){l.configration.synchronization&&l.delMsg({name:e,id:t,toID:o,data:n})},resizeWhiteboardSizeCallback:this.resizeWhiteboardSizeCallback.bind(this),noticeUpdateToolDescCallback:this.noticeUpdateToolDescCallback.bind(this),noticeUpdateWhiteboardFiledataCallback:this.noticeUpdateWhiteboardFiledataCallback.bind(this),receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this),whiteboardWatermarkImageOnFailureCallback:this.whiteboardWatermarkImageOnFailureCallback.bind(this),whiteboardWatermarkImageOnloadCallback:this.whiteboardWatermarkImageOnloadCallback.bind(this)},productionOptions:Object.deepAssign({deawPermission:this.configration.canDraw&&this.configration.synchronization,showShapeAuthor:this.configration.showShapeAuthor,myselfId:this.configration.myUserId,nickname:this.configration.myName,synchronizationWhiteboard:this.configration.synchronization,primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily,parcelAncestorElementId:this.elements.whiteboardViewRootElement.getAttribute("id"),defaultWhiteboardScale:this.configration.defaultWhiteboardScale,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isOnlyUndoRedoClearMyselfShape:this.configration.isOnlyUndoRedoClearMyselfShape,insertPictureRule:this.configration.insertPictureRule},this.configration.initWhiteboardProductionOptions||{})};ne.default.productionWhiteboard(e),ne.default.registerWhiteboardTools(this.instanceId,{tool_pencil:{},tool_highlighter:{},tool_line:{},tool_arrow:{},tool_eraser:{},tool_text:{},tool_rectangle:{},tool_rectangle_empty:{},tool_ellipse:{},tool_ellipse_empty:{},tool_mouse:{},tool_laser:{},action_undo:{},action_redo:{},action_clear:{},zoom_big:{},zoom_small:{}}),ne.default.clearRedoAndUndoStack(this.instanceId),ne.default.loadCurrpageWhiteboard(this.instanceId),"default"!==this.instanceId&&!this.configration.hasExtendDocument||ne.default.activeWhiteboardTool("tool_mouse",this.instanceId)}},{key:"_productionDynamicPpt",value:function(){var e,l=this;(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&(g.default.hasDynamicPptById(this.instanceId)&&g.default.destroyDynamicPptInstance(this.instanceId),e={dynamicPptElementId:this.elements.dynamicPptViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationDynamicPpt:this.configration.synchronization,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,againreconnectElementParentNode:this.elements.documentViewElement,dynamicPptActionClick:this.configration.actionClick}},g.default.productionDynamicPpt(e))}},{key:"_productionH5Document",value:function(){var e,l=this;(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&(y.default.hasH5DocumentById(this.instanceId)&&y.default.destroyH5DocumentInstance(this.instanceId),e={h5DocumentElementId:this.elements.h5DocumentViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationH5Document:this.configration.synchronization,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,h5DocumentActionClick:this.configration.actionClick,isH5MediaOutputDominant:this.configration.isH5MediaOutputDominant}},y.default.productionH5Document(e))}},{key:"_handleShowPageSignalling",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.source,n=e.data,i=this.fileid!=n.filedata.fileid;if(this.fileid=n.filedata.fileid,!this.configration.isPlayback)if(t)"ShowPage"===e.name?oe.default.showPageFromId=this.configration.myUserId:"ExtendShowPage"===e.name&&(oe.default.extendShowPageFromId=this.configration.myUserId);else{var a=!0;if("ShowPage"===e.name?((i||!e.fromID||oe.default.showPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(a=!1),oe.default.showPageFromId=e.fromID):"ExtendShowPage"===e.name&&((i||!e.fromID||oe.default.extendShowPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(a=!1),oe.default.extendShowPageFromId=e.fromID),a)return}this.fileTypeMark=n.isDynamicPPT?"dynamicPPT":n.isH5Document?"h5Document":"generalDocument",(n.isDynamicPPT||n.isH5Document)&&(n.filedata.pagenum=ne.default.getWhiteboardFiledata(this.instanceId).pagenum),(n.isGeneralFile||!i&&n.isDynamicPPT&&(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.isLoadFinished(this.instanceId)||!i&&n.isH5Document&&(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.isLoadFinished(this.instanceId))&&((a=n.filedata).currpage>a.pagenum&&(a.currpage=a.pagenum),a.currpage<1&&(a.currpage=1),n.isDynamicPPT&&(a.pptslide=a.currpage)),this._updateViewShowAndHide(),this._viewStateUpdate(),n.isGeneralFile?"room-pubmsg"===o&&!i&&Number(n.filedata.currpage)===ne.default.getWhiteboardFiledata(this.instanceId).currpage||(this._saveFiledataAndLoadCurrpageWhiteboardData(n.filedata),this._generalDocumentFileShowPage(i)):n.isDynamicPPT?(ne.default.setWhiteboardWatermarkImage(this.instanceId,""),this._dynamicPPTFileShowPage(i,e)):n.isH5Document&&("room-pubmsg"===o&&!i&&Number(n.filedata.currpage)===ne.default.getWhiteboardFiledata(this.instanceId).currpage||(ne.default.setWhiteboardWatermarkImage(this.instanceId,""),this._saveFiledataAndLoadCurrpageWhiteboardData(n.filedata),this._h5DocumentFileShowPage(i)))}},{key:"_generalDocumentFileShowPage",value:function(e){this.generalDocumentFileForceReloadNumber=0,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.setDynamicPptIframeSrc(this.instanceId,""),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.setH5DocumentIframeSrc(this.instanceId,""),ne.default.resetDedaultWhiteboardMagnification(this.instanceId);var t=ne.default.getWhiteboardFiledata(this.instanceId),o=(t.cospdfpath,t.swfpath),n=t.currpage,i=t.pagenum,a=t.filetype,r=t.isContentDocument;if(u.default.removeClass(this.elements.disableClickViewElement,"loading"),"whiteboard"===a)this.scale=this.configration.defaultWhiteboardScale,this._viewStateUpdate(),ne.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),ne.default.setWhiteboardWatermarkImage(this.instanceId,"",{resetDedaultWhiteboardMagnification:!1});else{t=void 0;if(Number(r)?o&&(t=o):(a=o.lastIndexOf("."),a=o.substring(a),a=o.replace(a,"-"+n+a),t=oe.default.nowUseDocAddress+a),ne.default.setWhiteboardWatermarkImage(this.instanceId,t,{resetDedaultWhiteboardMagnification:!1}),!Number(r)){var r=1,s=1;e?(this.cacheMaxPageNum=n,this.cacheMinPageNum=n,this.filePreLoadCurrPage=n,this.cacheMaxPageNum+this.filePreLoadStep<=i?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<i&&(this.cacheMaxPageNum+=i-this.cacheMaxPageNum),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,s=this.cacheMaxPageNum,r=this.cacheMinPageNum):(this.filePreLoadCurrPage<n?(r=this.cacheMaxPageNum+1,n>this.cacheMaxPageNum&&(this.cacheMaxPageNum=n),this.cacheMaxPageNum+this.filePreLoadStep<=i?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<i&&(this.cacheMaxPageNum+=i-this.cacheMaxPageNum),s=this.cacheMaxPageNum):this.filePreLoadCurrPage>n&&(s=this.cacheMinPageNum-1,n<this.cacheMinPageNum&&(this.cacheMinPageNum=n),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,r=this.cacheMinPageNum),this.filePreLoadCurrPage=n);for(var l,d=r;d<=s;d++)d!==n&&(l=o.lastIndexOf("."),l=o.substring(l),l=o.replace(l,"-"+d+l),l=oe.default.nowUseDocAddress+l,ne.default.preloadWhiteboardImg(l))}}}},{key:"_dynamicPPTFileShowPage",value:function(e,t){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&((this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.setH5DocumentIframeSrc(this.instanceId,""),e?(ne.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),this._saveFiledataAndLoadCurrpageWhiteboardData(t.data.filedata),u.default.addClass(this.elements.disableClickViewElement,"loading"),this.forceReloadNumberFromPpt=void 0,this.forceReloadTimestampFromPpt=void 0,this._loadCurrentDynamicPpt()):(t=(e=t.data.filedata).currpage,e=e.pptstep,g.default.jumpToAnimation(this.instanceId,t,e)))}},{key:"_h5DocumentFileShowPage",value:function(e){var t;(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&((this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.setDynamicPptIframeSrc(this.instanceId,""),(t=ne.default.getWhiteboardFiledata(this.instanceId)).swfpath,t=t.currpage,e?(ne.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),u.default.addClass(this.elements.disableClickViewElement,"loading"),this._loadCurrentH5Document()):y.default.jumpToPage(this.instanceId,t))}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ne.default.saveWhiteboardStackToStorage(this.instanceId),ne.default.updateWhiteboardFiledata(this.instanceId,e),ne.default.loadCurrpageWhiteboard(this.instanceId)}},{key:"_updateViewShowAndHide",value:function(){switch(this.fileTypeMark){case"generalDocument":u.default.show(this.elements.whiteboardViewElement),u.default.hide([this.elements.h5DocumentViewElement,this.elements.dynamicPptViewElement]);break;case"h5Document":u.default.show(this.elements.h5DocumentViewElement),u.default.hide(this.elements.dynamicPptViewElement),"tool_mouse"!==ne.default.getActiveTool(this.instanceId)?u.default.show(this.elements.whiteboardViewElement):u.default.hide(this.elements.whiteboardViewElement);break;case"dynamicPPT":u.default.show(this.elements.dynamicPptViewElement),u.default.hide(this.elements.h5DocumentViewElement),"tool_mouse"!==ne.default.getActiveTool(this.instanceId)?u.default.show(this.elements.whiteboardViewElement):u.default.hide(this.elements.whiteboardViewElement)}u.default.removeClass(this.elements.documentViewElement,["talkcloud-filetype-generalDocument","talkcloud-filetype-h5Document","talkcloud-filetype-dynamicPPT"]),u.default.addClass(this.elements.documentViewElement,"talkcloud-filetype-"+this.fileTypeMark),this.resizeWhiteboardHandler()}},{key:"_updatedynamicPptVolume",value:function(e){e<0?e=0:100<e&&(e=100),this.dynamicPptVolume=e,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&g.default.postMessage(this.instanceId,{action:"PptVolumeControl",volumeValue:this.dynamicPptVolume/100}),this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume(e),this.whiteBoardManagerInstance.getRoomDelegate().setPptVideoVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptVideoVolume(e),this._viewStateUpdate()}},{key:"_viewStateUpdate",value:function(){if(ne.default.hasWhiteboardById(this.instanceId)){var e={},t=ne.default.getWhiteboardFiledata(this.instanceId),o=t.currpage,n=t.pagenum,i=t.pptslide,a=t.pptstep,r=t.steptotal,t=t.fileid,s=ne.default.getRegisterWhiteboardToolsList(this.instanceId),l={nextPage:{disabled:oe.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&o<n)},prevPage:{disabled:oe.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&1<o)},skipPage:{disabled:oe.default.isPlayVideoing&&"default"===this.instanceId||!this.configration.canPage},addPage:{disabled:!(!(oe.default.isPlayVideoing&&"default"===this.instanceId||"generalDocument"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.addPage)||!(n<=o&&0===Number(t))},nextStep:{disabled:!(!(oe.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage)||n<=i&&r-1<=a},prevStep:{disabled:!(!(oe.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage)||i<=1&&a<=0},currentPage:o<1?1:o,totalPage:n<1?1:n},d=!0,c=!1,u=void 0;try{for(var h=Object.entries(s)[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var m=m.value,m=te(m,2),f=m[0],p=m[1];if(/tool_/g.test(f)){if(this.whiteboardViewState.tool[f]!==p)if("object"!==(void 0===p?"undefined":ee(p))||Array.isArray(p))e.tool=e.tool||{},e.tool[f]=p;else{var g=!0,y=!1,v=void 0;try{for(var b=Object.entries(p)[Symbol.iterator]();!(g=(w=b.next()).done);g=!0){var _=w.value,w=te(_,2),_=w[0],w=w[1];this.whiteboardViewState.tool[f]=this.whiteboardViewState.tool[f]||{},w!==this.whiteboardViewState.tool[f][_]&&(e.tool=e.tool||{},e.tool[f]=e.tool[f]||{},e.tool[f][_]=w)}}catch(e){y=!0,v=e}finally{try{!g&&b.return&&b.return()}finally{if(y)throw v}}}}else if(/action_/g.test(f)){if(this.whiteboardViewState.action[f]!==p)if("object"!==(void 0===p?"undefined":ee(p))||Array.isArray(p))e.action=e.action||{},e.action[f]=p;else{var k=!0,S=!1,P=void 0;try{for(var I=Object.entries(p)[Symbol.iterator]();!(k=(C=I.next()).done);k=!0){var x=C.value,C=te(x,2),x=C[0],C=C[1];this.whiteboardViewState.action[f]=this.whiteboardViewState.action[f]||{},C!==this.whiteboardViewState.action[f][x]&&(e.action=e.action||{},e.action[f]=e.action[f]||{},e.action[f][x]=C)}}catch(e){S=!0,P=e}finally{try{!k&&I.return&&I.return()}finally{if(S)throw P}}}}else if(/zoom_/g.test(f)&&this.whiteboardViewState.zoom[f]!==p)if("object"!==(void 0===p?"undefined":ee(p))||Array.isArray(p))e.zoom=e.zoom||{},e.zoom[f]=p;else{var T=!0,D=!1,E=void 0;try{for(var L=Object.entries(p)[Symbol.iterator]();!(T=(M=L.next()).done);T=!0){var A=M.value,M=te(A,2),A=M[0],M=M[1];this.whiteboardViewState.zoom[f]=this.whiteboardViewState.zoom[f]||{},M!==this.whiteboardViewState.zoom[f][A]&&(e.zoom=e.zoom||{},e.zoom[f]=e.zoom[f]||{},e.zoom[f][A]=M)}}catch(e){D=!0,E=e}finally{try{!T&&L.return&&L.return()}finally{if(D)throw E}}}}}catch(e){c=!0,u=e}finally{try{!d&&h.return&&h.return()}finally{if(c)throw u}}var W=!0,R=!1,j=void 0;try{for(var N=Object.entries(l)[Symbol.iterator]();!(W=(O=N.next()).done);W=!0){var O=O.value,O=te(O,2),V=O[0],F=O[1];if(this.whiteboardViewState.page[V]=this.whiteboardViewState.page[V]||{},"object"===(void 0===F?"undefined":ee(F))){var B=!0,z=!1,U=void 0;try{for(var H=Object.entries(F)[Symbol.iterator]();!(B=(K=H.next()).done);B=!0){var J=K.value,K=te(J,2),J=K[0],K=K[1];this.whiteboardViewState.page[V][J]!==K&&(e.page=e.page||{},e.page[V]=e.page[V]||{},e.page[V][J]=K)}}catch(e){z=!0,U=e}finally{try{!B&&H.return&&H.return()}finally{if(z)throw U}}}else this.whiteboardViewState.page[V]!==F&&(e.page=e.page||{},e.page[V]=F)}}catch(e){R=!0,j=e}finally{try{!W&&N.return&&N.return()}finally{if(R)throw j}}this.fileTypeMark!==this.whiteboardViewState.documentType&&(e.documentType=this.fileTypeMark),this.fileid!=this.whiteboardViewState.fileid&&(e.fileid=this.fileid),this.dynamicPptVolume!==this.whiteboardViewState.dynamicPptVolume&&(e.dynamicPptVolume=this.dynamicPptVolume),this.fullScreen!==this.whiteboardViewState.fullScreen&&(e.fullScreen=this.fullScreen),this.remark!==this.whiteboardViewState.remark&&(e.remark=this.remark),this.scale!==this.whiteboardViewState.scale&&(e.scale=this.scale);n=oe.default.allDocumentRemarkInfoMap.get("documentRemark_"+this.fileid);this.remarkText=0!=this.fileid&&n&&n[this.fileid+"_"+l.currentPage]?n[t+"_"+l.currentPage]:"",this.remarkText!==this.whiteboardViewState.remarkText&&(e.remarkText=this.remarkText);var q=ne.default.getWhiteboardToolsInfo(this.instanceId);if(q&&"object"===(void 0===q?"undefined":ee(q))){var G=!0,Y=!1,X=void 0;try{for(var Z=Object.entries(q)[Symbol.iterator]();!(G=(Q=Z.next()).done);G=!0){var $=Q.value,Q=te($,2),$=Q[0],Q=Q[1];void 0!==this.whiteboardViewState.other[$]&&this.whiteboardViewState.other[$]!==Q&&(e.other=e.other||{},e.other[$]=Q)}}catch(e){Y=!0,X=e}finally{try{!G&&Z.return&&Z.return()}finally{if(Y)throw X}}}Object.keys(e).length&&(void 0!==e.tool&&this._updateViewShowAndHide(),Object.deepAssign(this.whiteboardViewState,e),Object.keys(this.whiteboardViewState.tool).length&&Object.keys(this.whiteboardViewState.action).length&&Object.keys(this.whiteboardViewState.zoom).length&&Object.keys(this.whiteboardViewState.page).length&&(t={viewState:this.whiteboardViewState,updateViewState:e},this.sendActionCommand("viewStateUpdate",t)))}}},{key:"_sendSignalling_ShowPage",value:function(e,t){var o;"default"!==this.instanceId&&!this.configration.hasExtendDocument||(o=ne.default.getWhiteboardFiledata(this.instanceId),o={name:"default"===this.instanceId?"ShowPage":"ExtendShowPage",id:"default"===this.instanceId?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+this.instanceId,toID:"__all",data:{sourceInstanceId:this.instanceId,isGeneralFile:"generalDocument"===this.fileTypeMark,isMedia:!1,isDynamicPPT:"dynamicPPT"===this.fileTypeMark,isH5Document:"h5Document"===this.fileTypeMark,action:"",mediaType:"",filedata:o},save:!0},e&&Object.deepAssign(o,e),this.configration.synchronization&&this.pubMsg(o),t&&"function"==typeof t&&t(o))}},{key:"_loadCurrentDynamicPpt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("dynamicPPT"===this.fileTypeMark){var o=ne.default.getWhiteboardFiledata(this.instanceId),n=o.fileid,i=o.swfpath,a=o.isContentDocument,r=this.getRealBaseurl(o),i=Number(a)?i:r||oe.default.nowUseDocAddress+i+"/newppt.html",s={versions:f.default.dynamicPptVersions,fileid:n,playback:this.configration.isPlayback,classbegin:!0,publishDynamicPptMediaPermission_video:this.configration.synchronization,remoteNewpptUpdateTime:f.default.remoteDynamicPptUpdateTime,role:this.configration.myRole,dynamicPptActionClick:this.configration.actionClick,newpptPagingPage:this.configration.canPage,dynamicPptDebug:f.default.dynamicPptDebugLog,PptVolumeValue:this.dynamicPptVolume/100,deviceType:"phone"===this.configration.deviceType?0:void 0,isBackEvent:this.configration.isBackEvent,isClientPlayAudio:this.configration.isNativePlayAudio,isClientPlayVideo:this.configration.isNativePlayVideo};if(this.setPreloadParams(s,r),void 0!==this.forceReloadTimestampFromPpt&&(s.forceReloadTimestamp=this.forceReloadTimestampFromPpt),void 0!==this.forceReloadNumberFromPpt&&(s.forceReloadNumber=this.forceReloadNumberFromPpt,t.forceReloadNumber=this.forceReloadNumberFromPpt),e&&p.default.isJson(e)){var l=!0,d=!1,c=void 0;try{for(var u=Object.entries(e)[Symbol.iterator]();!(l=(m=u.next()).done);l=!0){var h=m.value,m=te(h,2),h=m[0],m=m[1];s[h]=m}}catch(e){d=!0,c=e}finally{try{!l&&u.return&&u.return()}finally{if(d)throw c}}}t.playback=this.configration.isPlayback,g.default.setDynamicPptIframeSrc(this.instanceId,i,s,o,t)}}},{key:"_loadCurrentH5Document",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("h5Document"===this.fileTypeMark){var o=ne.default.getWhiteboardFiledata(this.instanceId),n=o.fileid,i=o.swfpath,a=o.isContentDocument,r=this.getRealBaseurl(o),s=void 0;L.Logger.info("Document swfpath：",i,"isContentDocument:",a),Number(a)?i&&(s=i):s=r||oe.default.nowUseDocAddress+i;var l=this.configration.sendH5DocumentRoomInfo;if(l.isClientPlayAudio=this.configration.isNativePlayAudio,l.isClientPlayVideo=this.configration.isNativePlayVideo,l.fileid=n,this.setPreloadParams(l,r),l.role=this.configration.myRole,l.name=this.configration.myName,l.userid=this.configration.myUserId,l.serial=TK.mySerial,TK&&null!=TK.h5docpar&&(l.h5docpar=TK.h5docpar),l.isH5MediaOutput=this.configration.isH5MediaOutput,e&&p.default.isJson(e)){var d=!0,c=!1,u=void 0;try{for(var h=Object.entries(e)[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var m=f.value,f=te(m,2),m=f[0],f=f[1];l[m]=f}}catch(e){c=!0,u=e}finally{try{!d&&h.return&&h.return()}finally{if(c)throw u}}}y.default.setH5DocumentIframeSrc(this.instanceId,s,l,o,t)}}},{key:"setPreloadParams",value:function(e,t){t&&(t=oe.default.nowUseDocAddress.split(":"),e.playProtocol=t[0],e.playHostname=t[1].replace(/\//g,""),e.playPort=t[2])}},{key:"getRealBaseurl",value:function(t){var e="";if(!oe.default.preloadFile){var o=localStorage.getItem("preloadFile");try{o=JSON.parse(o)}catch(e){t.baseurl&&(o=t)}oe.default.preloadFile=o||oe.default.preloadFile,!oe.default.preloadFile&&t.baseurl&&(oe.default.preloadFile=t)}return oe.default.preloadFile&&this.isPreloadFile(t)&&(e=oe.default.preloadFile.baseurl),e}},{key:"isPreloadFile",value:function(e){return!!oe.default.preloadFile&&!!e&&String(oe.default.preloadFile.fileid)===String(e.fileid)}}]),n=s;function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Object.deepAssign({},a.default.defaultWhiteboard,a.default.commonWhiteboard),n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.parentNode=e,this.instanceId=t,this.configration=o,this.receiveActionCommand=n,this.whiteBoardManagerInstance=i,this.elements={},this.fileid=0,this.fullScreen=!1,this.remark=!1,this.scale=this.configration.defaultWhiteboardScale,this.loadDocumentFail=void 0,this.remarkText="",this.fileTypeMark="generalDocument",this.cacheMaxPageNum=1,this.cacheMinPageNum=1,this.filePreLoadCurrPage=1,this.filePreLoadStep=2,this.dynamicPptVolume=100,this.maxGeneralFileForceReloadNumber=10,this.generalDocumentFileForceReloadNumber=0,this.volume=100,this.whiteboardViewState={tool:{},action:{},zoom:{},page:{},documentType:this.fileTypeMark,fileid:this.fileid,dynamicPptVolume:this.dynamicPptVolume,fullScreen:this.fullScreen,remark:this.remark,scale:this.scale,remarkText:this.remarkText,other:{primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily}},this._createElements(),this._connectElements()}o.default=n},{"../../intermediateLayer/DynamicPptIntermediateLayer":334,"../../intermediateLayer/H5DocumentPptIntermediateLayer":335,"../../intermediateLayer/WhiteboardIntermediateLayer":336,"../../utils/Configuration":337,"../../utils/Constant":338,"../../utils/DomUtils":339,"../../utils/Global":340,"../../utils/Utils":344}],355:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),e("babel-polyfill"),e("./utils/Log");var n,i=e("./TKWhiteBoardManager"),e=(n=i)&&n.__esModule?n:{default:n};o.default=e.default},{"./TKWhiteBoardManager":333,"./utils/Log":342,"babel-polyfill":1}]},{},[355]);